<html><head><link href="stylesheets/documentation.css" rel="stylesheet" title="documentation" type="text/css" /> <title>documentation</title></head><body bgcolor="#ffecd9" text="#000000" link="#000000" vlink="#000000"><a name="START"></a><h1><font color="#0000ff">Web authoring with higher-order functions</font></h1><h3><span>Kurt N&#248;rmark   &copy;</span> &nbsp; &nbsp; normark@cs.aau.dk <br /> Department of Computer Science, Aalborg University</h3><p></p><div class="elucidator-abstract"><b>Abstract.</b> <p>In the earlier parts of this tutorial we have described the fundamental aspects of the HTML mirror in Scheme. We will now take a look at a slightly more advanced aspect, namely authoring with use of higher-order functions. This particular aspect pays tribute to the fact that in LAML, HTML is available as Scheme functions (not macros or just list structures).</p> <p>The topic of &#39;higher-order functions&#39; is a key area in functional programming. Therefore we find it important to cover higher-order functions in this tutorial. It should be noticed that LAML has been defined with particular emphasis on &#39;a good fit&#39; between higher-order functions that work on lists, and the HTML/XML mirror functions.</p></div><div>&nbsp; <p></p></div><div class="elucidator-section"><a name="curlev-sec"></a><div><a href="documentation.html#START"><img src="./images/small-up.gif" title="" alt="" border="0" /></a> <img src="./images/small-prev-blind.gif" title="" alt="" border="0" /> <a href="documentation.html#hio-sec"><img src="./images/small-next.gif" title="Higher-order functions" alt="" border="0" /></a></div><div><b><font size="5"><span>1 &nbsp; &nbsp; Summing up</span></font></b></div><div class="body-normal"><p>In this section we will briefly summarize our current knowledge of the HTML mirror functions in Scheme, as covered in details in the previous sections of this tutorial, most notably <a href="../../html-mirrors/html-mirrors.html" target="_top">the section about the HTML mirrors</a>.</p></div><div style="margin-left:10px;"><font size="2"><span>1.1 &nbsp; &nbsp; <a href="documentation.html#curlev" target="documentation-frame"><font color="#000000">Summing up</font></a></span></font> <br /></div></div><div>&nbsp; <p></p></div><div class="elucidator-entry"><a name="curlev"></a><div class="elucidator-entry-head"><a href="documentation.html#curlev-sec"><img src="./images/small-up.gif" title="Summing up" alt="" border="0" /></a> <img src="./images/small-prev-blind.gif" title="" alt="" border="0" /> <img src="./images/small-next-blind.gif" title="" alt="" border="0" />  <br /> <b><font size="4"><span>1.1 &nbsp; &nbsp; Summing up</span></font></b></div><div class="body-normal"><p>Until now in this tutorial we have seen how to use the HTML mirror functions to produce relatively straightforward web pages. We have also seen how to make pages which include pieces of Scheme programs, such as the factorial function, or functions for managing lists of bookmarks. In addition we have studied the details of HTML mirror functions, in particular the interpretation of different kinds of parameters to these.</p> <p>It is now time to go on from here. We are in a functional programming context, and therefore the ideas of higher-order function is important. In this section we will careful explain the link between web authoring and higher-order functions.</p></div></div><div class="elucidator-section"><a name="hio-sec"></a><div><a href="documentation.html#START"><img src="./images/small-up.gif" title="" alt="" border="0" /></a> <a href="documentation.html#curlev-sec"><img src="./images/small-prev.gif" title="Summing up" alt="" border="0" /></a> <a href="documentation.html#element-mod-sec"><img src="./images/small-next.gif" title="Element Modification" alt="" border="0" /></a></div><div><b><font size="5"><span>2 &nbsp; &nbsp; Higher-order functions</span></font></b></div><div class="body-normal">We start with a very brief account on higher-order functions. It is really just a few words with a reference to a LAML related teaching material, in which there are many more details. </div><div style="margin-left:10px;"><font size="2"><span>2.1 &nbsp; &nbsp; <a href="documentation.html#hio" target="documentation-frame"><font color="#000000">Higher-order functions</font></a></span></font> <br /></div></div><div>&nbsp; <p></p></div><div class="elucidator-entry"><a name="hio"></a><div class="elucidator-entry-head"><a href="documentation.html#hio-sec"><img src="./images/small-up.gif" title="Higher-order functions" alt="" border="0" /></a> <img src="./images/small-prev-blind.gif" title="" alt="" border="0" /> <img src="./images/small-next-blind.gif" title="" alt="" border="0" />  <br /> <b><font size="4"><span>2.1 &nbsp; &nbsp; Higher-order functions</span></font></b></div><div class="body-normal"><p>Higher-order functions accept functions as parameters. In addition, a higher-order function can return a function as the result. Finally, functions can be organized in data structures, such as in lists (lists of functions).</p> <p>I will not here go deeper into the general subject of higher-order functions. I have written a teaching material about functional programming in Scheme. Please take a look at the chapters that cover higher-order functions. I will recommend that you read the thematic view (text book like exposition) of this material, chapter 14 - 18. The direct link to the thematic view of chapter 14 is <a href="http://www.cs.auc.dk/~normark/prog3-03/html/notes/higher-order-fu_themes-intr-section.html" target="pp-material">here</a>.</p></div></div><div class="elucidator-section"><a name="element-mod-sec"></a><div><a href="documentation.html#START"><img src="./images/small-up.gif" title="" alt="" border="0" /></a> <a href="documentation.html#hio-sec"><img src="./images/small-prev.gif" title="Higher-order functions" alt="" border="0" /></a> <a href="documentation.html#hio-list-sec"><img src="./images/small-next.gif" title="Using higher-order list functions" alt="" border="0" /></a></div><div><b><font size="5"><span>3 &nbsp; &nbsp; Element Modification</span></font></b></div><div class="body-normal">Using element modification it is possible to generate specialized versions of a particular element, which binds attributes or part of the content to particular values</div><div style="margin-left:10px;"><font size="2"><span>3.1 &nbsp; &nbsp; <a href="documentation.html#element-mod" target="documentation-frame"><font color="#000000">Element Modification</font></a></span></font> <br /></div></div><div>&nbsp; <p></p></div><div class="elucidator-entry"><a name="element-mod"></a><div class="elucidator-entry-head"><a href="documentation.html#element-mod-sec"><img src="./images/small-up.gif" title="Element Modification" alt="" border="0" /></a> <img src="./images/small-prev-blind.gif" title="" alt="" border="0" /> <img src="./images/small-next-blind.gif" title="" alt="" border="0" />  <br /> <b><font size="4"><span>3.1 &nbsp; &nbsp; Element Modification</span></font></b></div><div class="body-normal"><p>The function <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-modify-element" target="program-frame" title="Manual: xml-in-laml">xml-modify-element</a> allows us to bind attributes to constant values in a mirror function, before the mirror function is applied. To illustrate this idea, take a look at <a class="program-file-reference-strong" href="element-mod-1-LARGE.html" target="program-frame" title="Link to program file: element-mod">element-mod</a> which uses the XHTML1.0 transitional mirror. The <a href="../../../examples/tutorial/higher-order-authoring/element-mod.html" target="program-frame" title="LAML example"><font color="#000000">resulting page</font></a> is also available.</p> <p>The name <a class="program-reference-strong" href="element-mod-1-LARGE.html#ol-alpha" target="program-frame" title="element-mod">ol-alpha</a> is bound to a modified version of the HTML mirror function <kbd>ol</kbd>, in which the <kbd>type</kbd> attribute is pre-bound to the value &quot;A&quot;. By using <kbd>ol-alpha</kbd> you will &#39;automatically&#39; add the <kbd>type</kbd> attribute to the instance of <kbd>ol</kbd>with the value &quot;A&quot; .</p> <p>The function <a class="program-reference-strong" href="element-mod-1-LARGE.html#a-target" target="program-frame" title="element-mod">a-target</a> is defined to be a modification of the <kbd>a</kbd> HTML mirror function, in which the <kbd>target</kbd> attribute is pre-bound to the parameter <kbd>t</kbd> of <a class="program-reference-weak" href="element-mod-1-LARGE.html#a-target" target="program-frame" title="element-mod">a-target</a>.</p> <p><a class="program-reference-strong" href="element-mod-1-LARGE.html#ol-roman-3" target="program-frame" title="element-mod">ol-roman-3</a> is a modified version of <kbd>ol</kbd>, in which we apply the attributes in <a class="program-reference-weak" href="element-mod-1-LARGE.html#ol-attributes" target="program-frame" title="element-mod">ol-attributes</a>. Notice the way we can pass a list (more precisely, a property list) of attributes to <kbd>xml-modify-element</kbd>.</p> <p>The function named <a class="program-reference-strong" href="element-mod-1-LARGE.html#sli" target="program-frame" title="element-mod">sli</a> is a modified version of the mirror of the li element, in which we append the value of the <kbd>(p)</kbd> expression. Thus, we see that we can use <kbd>xml-modify-element</kbd> for &#39;modification&#39; of the element contents as well as the attributes of the element.</p> <p>When we use <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-modify-element" target="program-frame" title="Manual: xml-in-laml">xml-modify-element</a> to &#39;modify&#39; the element contents, it is relevant to have a version which prepends the contents instead of appending it. The function <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-modify-element-prepend" target="program-frame" title="Manual: xml-in-laml">xml-modify-element-prepend</a> does that. See <a class="program-reference-weak" href="element-mod-1-LARGE.html#!!-li" target="program-frame" title="element-mod">!!-li</a> for an example. Again, it is instructive to see the effect on <a href="../../../examples/tutorial/higher-order-authoring/element-mod.html" target="program-frame" title="LAML example"><font color="#000000">the generated HTML page</font></a> .</p></div></div><div class="elucidator-section"><a name="hio-list-sec"></a><div><a href="documentation.html#START"><img src="./images/small-up.gif" title="" alt="" border="0" /></a> <a href="documentation.html#element-mod-sec"><img src="./images/small-prev.gif" title="Element Modification" alt="" border="0" /></a> <a href="documentation.html#par-sec"><img src="./images/small-next.gif" title="XML-in-LAML parameterization and abstraction" alt="" border="0" /></a></div><div><b><font size="5"><span>4 &nbsp; &nbsp; Using higher-order list functions</span></font></b></div><div class="body-normal"><p>In Lisp and Scheme, structured data is typically organized in list structures. In this section we will illustrate how to make use of mapping and filtering together with the HTML mirror functions.</p></div><div style="margin-left:10px;"><font size="2"><span>4.1 &nbsp; &nbsp; <a href="documentation.html#ol-ul" target="documentation-frame"><font color="#000000">Ordered and unordered lists</font></a></span></font> <br /> <font size="2"><span>4.2 &nbsp; &nbsp; <a href="documentation.html#tables" target="documentation-frame"><font color="#000000">Tables</font></a></span></font> <br /> <font size="2"><span>4.3 &nbsp; &nbsp; <a href="documentation.html#more-tables" target="documentation-frame"><font color="#000000">More Tables</font></a></span></font> <br /></div></div><div>&nbsp; <p></p></div><div class="elucidator-entry"><a name="ol-ul"></a><div class="elucidator-entry-head"><a href="documentation.html#hio-list-sec"><img src="./images/small-up.gif" title="Using higher-order list functions" alt="" border="0" /></a> <img src="./images/small-prev-blind.gif" title="" alt="" border="0" /> <a href="documentation.html#tables"><img src="./images/small-next.gif" title="Tables" alt="" border="0" /></a>  <br /> <b><font size="4"><span>4.1 &nbsp; &nbsp; Ordered and unordered lists</span></font></b></div><div class="body-normal"><p>Now consider the examples in <a class="program-reference-strong" href="lists-1-LARGE.html#write-clause-lists" target="program-frame" title="lists">write-clause-lists</a>. It may be tempting to pass a <em>list</em> of items to the <kbd>ol</kbd> or <kbd>ul</kbd> mirror functions. This can be done as in the second ul clause <span><a href="lists-1-LARGE.html#write-clause-lists-@b" target="program-frame"><img src="./images/source-mark-green.gif" title="A link to a program source marker in write-clause-lists" alt="" border="0" /></a><a name="ol-ul-@b"></a></span> of the <a class="program-file-reference-strong" href="lists-1-LARGE.html" target="program-frame" title="Link to program file: lists">lists</a> document. However, it is hardly attractive to use this form compared to the first one <span><a href="lists-1-LARGE.html#write-clause-lists-@a" target="program-frame"><img src="./images/source-mark-red.gif" title="A link to a program source marker in write-clause-lists" alt="" border="0" /></a><a name="ol-ul-@a"></a></span>, in which we embed <kbd>li</kbd> elements in the <kbd>ul</kbd> form.</p> <p>Things is a little different if we already have our data in a list, such as <a class="program-reference-weak" href="lists-1-LARGE.html#my-list" target="program-frame" title="lists">my-list</a>. In that case it more reasonable to use the third form <span><a href="lists-1-LARGE.html#write-clause-lists-@c" target="program-frame"><img src="./images/source-mark-blue.gif" title="A link to a program source marker in write-clause-lists" alt="" border="0" /></a><a name="ol-ul-@c"></a></span> in <a class="program-file-reference-strong" href="lists-1-LARGE.html" target="program-frame" title="Link to program file: lists">lists</a>, namely this one:</p> <pre>
  (ul (li-map my-list))
</pre> <p>Recall that <a class="program-reference-weak" href="lists-1-LARGE.html#li-map" target="program-frame" title="lists">li-map</a> is defined explicitly in the document, by use of a <a class="manual-reference" href="../../../lib/man/general.html#curry-generalized" target="program-frame" title="Manual: general">curry-generalized</a> <kbd>map</kbd>.</p> <p>Let us also illustrate the use of filtering. <span><a href="lists-1-LARGE.html#write-clause-lists-@d" target="program-frame"><img src="./images/source-mark-black.gif" title="A link to a program source marker in write-clause-lists" alt="" border="0" /></a><a name="ol-ul-@d"></a></span> In the list <a class="program-reference-weak" href="lists-1-LARGE.html#my-second-list" target="program-frame" title="lists">my-second-list</a> some of the items are marked with a star. We want to eliminate the unstared items in the rendered list. The fourth example shows how it can be done by use of filtering.</p> <p>The <a href="../../../examples/tutorial/higher-order-authoring/ol-ul-list.html" target="program-frame" title="LAML example"><font color="#000000">resulting web page</font></a> is available such that you can see the actual presentation of the lists from this section.</p></div></div><div class="elucidator-entry"><a name="tables"></a><div class="elucidator-entry-head"><a href="documentation.html#hio-list-sec"><img src="./images/small-up.gif" title="Using higher-order list functions" alt="" border="0" /></a> <a href="documentation.html#ol-ul"><img src="./images/small-prev.gif" title="Ordered and unordered lists" alt="" border="0" /></a> <a href="documentation.html#more-tables"><img src="./images/small-next.gif" title="More Tables" alt="" border="0" /></a>  <br /> <b><font size="4"><span>4.2 &nbsp; &nbsp; Tables</span></font></b></div><div class="body-normal"><p>Tables can in a natural way be organized as lists of rows or lists of columns. In HTML, a table is basically a list of rows. Using Scheme, it is attractive to represent tables as lists of lists (list of rows, where a row is a list of elements).</p> <p>As the first example, let us look at the factorial table example from <a href="../../getting-started/getting-started.html" target="_top">the getting started section</a>. The original example is shown in <a class="program-file-reference-strong" href="fac-2-1-LARGE.html" target="program-frame" title="Link to program file: fac-2">fac-2</a>, which already makes use of mapping.</p> <p>We have refined the factorial example to that of <a class="program-file-reference-strong" href="fac-3-1-LARGE.html" target="program-frame" title="Link to program file: fac-3">fac-3</a>. Let us go over the details.</p> <p>We first redefine <a class="program-reference-strong" href="fac-3-1-LARGE.html#map" target="program-frame" title="fac-3">map</a> to be curry generalized. The function <a class="manual-reference" href="../../../lib/man/general.html#curry-generalized" target="program-frame" title="Manual: general">curry-generalized</a> makes it possible to use <kbd>map</kbd> in a curried way. Thus,</p> <pre>
 (map td)
</pre> <p>returns a <a class="manual-reference" href="../../../lib/xml-in-laml/mirrors/man/xhtml10-transitional-mirror.html#td" target="program-frame" title="Manual: xhtml10-transitional-mirror">td</a> mapper. Without curry generalization, <kbd>(map td)</kbd> would cause an error, because <kbd>map</kbd> requires at least two parameters: a mapping function and a list.</p> <p>After <a class="program-reference-weak" href="fac-3-1-LARGE.html#map" target="program-frame" title="fac-3">map</a> and <a class="program-reference-weak" href="fac-3-1-LARGE.html#fac" target="program-frame" title="fac-3">fac</a> comes a specialization of the table mirror function <a class="program-reference-strong" href="fac-3-1-LARGE.html#table-with-border" target="program-frame" title="fac-3">table-with-border</a> with the border bound to 1. The function <a class="program-reference-strong" href="fac-3-1-LARGE.html#make-n-fac-n" target="program-frame" title="fac-3">make-n-fac-n</a> makes a list of numbers, with elements such as (<em>n</em> <em>(fac n)</em>), with <em>n</em> running from 1 to an upper limit h.</p> <p>Finally we see the <kbd>write-html</kbd> clause <a class="program-reference-strong" href="fac-3-1-LARGE.html#write-clause" target="program-frame" title="fac-3">write-clause</a>, in which we meet the crucial expression <span><a href="fac-3-1-LARGE.html#write-clause-@a" target="program-frame"><img src="./images/source-mark-red.gif" title="A link to a program source marker in write-clause" alt="" border="0" /></a><a name="tables-@a"></a></span></p> <pre>
  (map 
    (compose tr (map (compose td as-string)))
    (make-n-fac-n 55))
</pre> <p>The inner composition aggregates the <a class="manual-reference" href="../../../lib/xml-in-laml/mirrors/man/xhtml10-transitional-mirror.html#td" target="program-frame" title="Manual: xhtml10-transitional-mirror">td</a> mirror function with the string converter function <a class="manual-reference" href="../../../lib/man/general.html#as-string" target="program-frame" title="Manual: general">as-string</a>. The outer composition aggregates the <a class="manual-reference" href="../../../lib/xml-in-laml/mirrors/man/xhtml10-transitional-mirror.html#tr" target="program-frame" title="Manual: xhtml10-transitional-mirror">tr</a> mirror function and the &#39;extended <a class="manual-reference" href="../../../lib/xml-in-laml/mirrors/man/xhtml10-transitional-mirror.html#td" target="program-frame" title="Manual: xhtml10-transitional-mirror">td</a> mapper&#39;. This composed function is mapped on a list like</p> <pre>
  ((1 1)
   (2 2)
   (3 6)
   (4 24)
   ...
  )
</pre> <p>as formed by <a class="program-reference-weak" href="fac-3-1-LARGE.html#make-n-fac-n" target="program-frame" title="fac-3">make-n-fac-n</a>. The <a href="../../../examples/tutorial/higher-order-authoring/fac-3.html" target="program-frame" title="LAML example"><font color="#000000">resulting page</font></a> is similar to the pages from the earlier chapter.</p></div></div><div class="elucidator-entry"><a name="more-tables"></a><div class="elucidator-entry-head"><a href="documentation.html#hio-list-sec"><img src="./images/small-up.gif" title="Using higher-order list functions" alt="" border="0" /></a> <a href="documentation.html#tables"><img src="./images/small-prev.gif" title="Tables" alt="" border="0" /></a> <img src="./images/small-next-blind.gif" title="" alt="" border="0" />  <br /> <b><font size="4"><span>4.3 &nbsp; &nbsp; More Tables</span></font></b></div><div class="body-normal"><p>We will now take a look at another and more advanced table example, which can be seen <a href="../../../examples/tutorial/higher-order-authoring/more-tables.html" target="program-frame" title="LAML example"><font color="#000000">here</font></a>. The source document is <a class="program-file-reference-strong" href="more-tables-1-LARGE.html" target="program-frame" title="Link to program file: more-tables">more-tables</a>.</p> <p>We define <a class="program-reference-strong" href="more-tables-1-LARGE.html#sample-table" target="program-frame" title="more-tables">sample-table</a> as a list of rows. In <a class="program-reference-strong" href="more-tables-1-LARGE.html#write-html-clause" target="program-frame" title="more-tables">write-html-clause</a> we first render the table in a straightforward way  <span><a href="more-tables-1-LARGE.html#write-html-clause-@a" target="program-frame"><img src="./images/source-mark-red.gif" title="A link to a program source marker in write-html-clause" alt="" border="0" /></a><a name="more-tables-@a"></a></span> .</p> <p>Next  <span><a href="more-tables-1-LARGE.html#write-html-clause-@b" target="program-frame"><img src="./images/source-mark-green.gif" title="A link to a program source marker in write-html-clause" alt="" border="0" /></a><a name="more-tables-@b"></a></span> we show a rendering of the table in which we compose the function <a class="program-reference-weak" href="more-tables-1-LARGE.html#switch" target="program-frame" title="more-tables">switch</a> with <a class="manual-reference" href="../../../lib/xml-in-laml/mirrors/man/xhtml10-transitional-mirror.html#tr" target="program-frame" title="Manual: xhtml10-transitional-mirror">tr</a> and <kbd>(map td)</kbd>. The function <a class="program-reference-weak" href="more-tables-1-LARGE.html#switch" target="program-frame" title="more-tables">switch</a> switches the first and second element in a list. When applied via <kbd>map</kbd> on rows in a table, the effect is a switching the first and second column. See again <a href="../../../examples/tutorial/higher-order-authoring/more-tables.html" target="program-frame" title="LAML example"><font color="#000000">the resulting HTML document</font></a> for the effect of applying <span class="none-reference">switch</span> .</p> <p>The final table <span><a href="more-tables-1-LARGE.html#write-html-clause-@c" target="program-frame"><img src="./images/source-mark-blue.gif" title="A link to a program source marker in write-html-clause" alt="" border="0" /></a><a name="more-tables-@c"></a></span> made in the example is interesting because we apply the <kbd>rowspan</kbd> attribute in one of the table cells - the upper left one. We use the <a class="program-reference-weak" href="more-tables-1-LARGE.html#cell" target="program-frame" title="more-tables">cell</a> function, which is just an alias of list. In addition, we colorize all numeric cells (the third column) with a grey background. This is done by <a class="program-reference-weak" href="more-tables-1-LARGE.html#grey-numeric" target="program-frame" title="more-tables">grey-numeric</a>. Please study both the <a href="../../../examples/tutorial/higher-order-authoring/more-tables.html" target="program-frame" title="LAML example"><font color="#000000">result</font></a> and the generating expression <span><a href="more-tables-1-LARGE.html#write-html-clause-@c" target="program-frame"><img src="./images/source-mark-blue.gif" title="A link to a program source marker in write-html-clause" alt="" border="0" /></a><a name="more-tables-@c"></a></span> carefully.</p></div></div><div class="elucidator-section"><a name="par-sec"></a><div><a href="documentation.html#START"><img src="./images/small-up.gif" title="" alt="" border="0" /></a> <a href="documentation.html#hio-list-sec"><img src="./images/small-prev.gif" title="Using higher-order list functions" alt="" border="0" /></a> <a href="documentation.html#ps"><img src="./images/small-next.gif" title="Postscript" alt="" border="0" /></a></div><div><b><font size="5"><span>5 &nbsp; &nbsp; XML-in-LAML parameterization and abstraction</span></font></b></div><div class="body-normal"><p>In this section we will discuss how to generate functions which obey the XML-in-LAML mirror function parameter passing rules. In the first variant, <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-in-laml-parametrization" target="program-frame" title="Manual: xml-in-laml">xml-in-laml-parametrization</a>, we provide for a XML-in-LAML parametrization of an existing XML related function which uses straightforward positional parameters. In the second variant, <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-in-laml-abstraction" target="program-frame" title="Manual: xml-in-laml">xml-in-laml-abstraction</a>, we provide for abstractions on top of existing mirror functions.</p></div><div style="margin-left:10px;"><font size="2"><span>5.1 &nbsp; &nbsp; <a href="documentation.html#par" target="documentation-frame"><font color="#000000">XML-in-LAML parametrizations</font></a></span></font> <br /> <font size="2"><span>5.2 &nbsp; &nbsp; <a href="documentation.html#abstractions" target="documentation-frame"><font color="#000000">XML-in-LAML abstractions</font></a></span></font> <br /> <font size="2"><span>5.3 &nbsp; &nbsp; <a href="documentation.html#more-abstractions" target="documentation-frame"><font color="#000000">More XML-in-LAML abstractions</font></a></span></font> <br /></div></div><div>&nbsp; <p></p></div><div class="elucidator-entry"><a name="par"></a><div class="elucidator-entry-head"><a href="documentation.html#par-sec"><img src="./images/small-up.gif" title="XML-in-LAML parameterization and abstraction" alt="" border="0" /></a> <img src="./images/small-prev-blind.gif" title="" alt="" border="0" /> <a href="documentation.html#abstractions"><img src="./images/small-next.gif" title="XML-in-LAML abstractions" alt="" border="0" /></a>  <br /> <b><font size="4"><span>5.1 &nbsp; &nbsp; XML-in-LAML parametrizations</span></font></b></div><div class="body-normal"><p>Now take a look at <a class="program-file-reference-strong" href="color-frames-1-LARGE.html" target="program-frame" title="Link to program file: color-frames">color-frames</a>, more specifically at the <a class="manual-reference" href="../../../man/laml.html#write-html" target="program-frame" title="Manual: laml">write-html</a> clause at <a class="program-reference-strong" href="color-frames-1-LARGE.html#write-html-clause-color-frame" target="program-frame" title="color-frames">write-html-clause-color-frame</a>. We will start by using the XHTML convenience function <a class="manual-reference" href="../../../lib/man/xhtml10-convenience.html#color-frame-width" target="program-frame" title="Manual: xhtml10-convenience">color-frame-width</a> ( <span><a href="color-frames-1-LARGE.html#write-html-clause-color-frame-@a" target="program-frame"><img src="./images/source-mark-red.gif" title="A link to a program source marker in write-html-clause-color-frame" alt="" border="0" /></a><a name="par-@a"></a></span> ) to produce a color framed text, see <a href="../../../examples/tutorial/higher-order-authoring/color-frame.html" target="program-frame" title="LAML example"><font color="#000000">here</font></a> (original color frame).</p> <p>We wish to use the XML-in-LAML parameter passing techniques for <a class="manual-reference" href="../../../lib/man/xhtml10-convenience.html#color-frame-width" target="program-frame" title="Manual: xhtml10-convenience">color-frame-width</a>. That is, instead of the call</p> <pre>
  (color-frame-width &quot;Some text&quot; red 100)
</pre> <p>we prefer the following call</p> <pre>
  (new-color-frame-width &quot;Some text&quot; &#39;color red &#39;width &quot;100&quot;)
</pre> <p>or equivalently for instance</p> <pre>
  (new-color-frame-width &#39;width &quot;100&quot; &#39;color red  &quot;Some text&quot; )
</pre> <p>or perhaps something like</p> <pre>
  (new-color-frame-width &quot;Some&quot; &#39;width &quot;100&quot; &#39;color red  &quot;text&quot; )
</pre> <p>which more profoundly uses the merits of the mirror rules. In <a class="program-reference-strong" href="color-frames-1-LARGE.html#write-html-clause-color-frame" target="program-frame" title="color-frames">write-html-clause-color-frame</a> we focus on the call of <a class="program-reference-weak" href="color-frames-1-LARGE.html#new-color-frame-width" target="program-frame" title="color-frames">new-color-frame-width</a> at <span><a href="color-frames-1-LARGE.html#write-html-clause-color-frame-@b" target="program-frame"><img src="./images/source-mark-green.gif" title="A link to a program source marker in write-html-clause-color-frame" alt="" border="0" /></a><a name="par-@b"></a></span> .</p> <p>Let us now develop <a class="program-reference-strong" href="color-frames-1-LARGE.html#new-color-frame-width" target="program-frame" title="color-frames">new-color-frame-width</a> using the XML-in-LAML library higher-order function <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-in-laml-parametrization" target="program-frame" title="Manual: xml-in-laml">xml-in-laml-parametrization</a> . When we use <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-in-laml-parametrization" target="program-frame" title="Manual: xml-in-laml">xml-in-laml-parametrization</a> we can - most importantly - carry out a transformation from the new XML-in-LAML parameter format to the old one. The local function <kbd>med</kbd> (for mediator) does that, just by accessing the attributes property list. The local <kbd>val!</kbd> procedure validates the new parameter list, using the generally useful functions <a class="program-reference-weak" href="color-frames-1-LARGE.html#color-string?" target="program-frame" title="color-frames">color-string?</a> and <a class="program-reference-weak" href="color-frames-1-LARGE.html#hex-numeric-string?" target="program-frame" title="color-frames">hex-numeric-string?</a>. As prescribed in <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-in-laml-parametrization" target="program-frame" title="Manual: xml-in-laml">xml-in-laml-parametrization</a> errors are reported using the function <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-check-error" target="program-frame" title="Manual: xml-in-laml">xml-check-error</a> .</p> <p>Notice the use of <a class="manual-reference" href="../../../lib/man/general.html#get-prop" target="program-frame" title="Manual: general">get-prop</a> and <a class="manual-reference" href="../../../lib/man/general.html#defaulted-get-prop" target="program-frame" title="Manual: general">defaulted-get-prop</a>, which both work on property lists. These functions correspond to the functions <a class="manual-reference" href="../../../lib/man/general.html#get" target="program-frame" title="Manual: general">get</a> and <a class="manual-reference" href="../../../lib/man/general.html#defaulted-get" target="program-frame" title="Manual: general">defaulted-get</a>, which work on association lists. All four functions are located in the library of generally useful Scheme functions.</p> <p>Again, take a look at the <a href="../../../examples/tutorial/higher-order-authoring/color-frame.html" target="program-frame" title="LAML example"><font color="#000000">resulting HTML page</font></a> to assure yourself, that it works. Due to the non-numeric value of the width <kbd>attribute</kbd>, we get and error when we process <a class="program-file-reference-weak" href="color-frames-1-LARGE.html" target="program-frame" title="Link to program file: color-frames">color-frames</a>.</p></div></div><div class="elucidator-entry"><a name="abstractions"></a><div class="elucidator-entry-head"><a href="documentation.html#par-sec"><img src="./images/small-up.gif" title="XML-in-LAML parameterization and abstraction" alt="" border="0" /></a> <a href="documentation.html#par"><img src="./images/small-prev.gif" title="XML-in-LAML parametrizations" alt="" border="0" /></a> <a href="documentation.html#more-abstractions"><img src="./images/small-next.gif" title="More XML-in-LAML abstractions" alt="" border="0" /></a>  <br /> <b><font size="4"><span>5.2 &nbsp; &nbsp; XML-in-LAML abstractions</span></font></b></div><div class="body-normal"><p>It is often convenient to introduce ad hoc abstractions, when you write a new web document. This is very easy in Scheme, because we can just write a simple function.</p> <p>Things become a little more difficult if we want the new abstraction to obey the mirror function rules of LAML - see <a href="../../html-mirrors/html-mirrors.html" target="_top">the section about HTML mirror rules</a>. We will now see how to use <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-in-laml-abstraction" target="program-frame" title="Manual: xml-in-laml">xml-in-laml-abstraction</a> in such situations. We switch our interest to a new example web document, <a class="program-file-reference-strong" href="li-extensions-1-LARGE.html" target="program-frame" title="Link to program file: li-extensions">li-extensions</a> .</p> <p>The functions <a class="program-reference-weak" href="li-extensions-1-LARGE.html#spacy-li" target="program-frame" title="li-extensions">spacy-li</a> and <a class="program-reference-weak" href="li-extensions-1-LARGE.html#question-li" target="program-frame" title="li-extensions">question-li</a> are both generated by <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-in-laml-abstraction" target="program-frame" title="Manual: xml-in-laml">xml-in-laml-abstraction</a>. The function <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-in-laml-abstraction" target="program-frame" title="Manual: xml-in-laml">xml-in-laml-abstraction</a> is similar to <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-in-laml-parametrization" target="program-frame" title="Manual: xml-in-laml">xml-in-laml-parametrization</a>. But the function <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-in-laml-abstraction" target="program-frame" title="Manual: xml-in-laml">xml-in-laml-abstraction</a> is intended to carry out abstractions on top of an XML-in-LAML mirror function. In other words, the lambda expressions passed to <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-in-laml-abstraction" target="program-frame" title="Manual: xml-in-laml">xml-in-laml-abstraction</a> should ultimately pass the content to a &#39;terminal&#39; XML-in-LAML mirror function.</p> <p><a class="program-reference-strong" href="li-extensions-1-LARGE.html#spacy-li" target="program-frame" title="li-extensions">spacy-li</a> is a variation of the HTML mirror function <a class="manual-reference" href="../../../lib/xml-in-laml/mirrors/man/xhtml10-transitional-mirror.html#li" target="program-frame" title="Manual: xhtml10-transitional-mirror">li</a>, which embeds the list item in a <a class="manual-reference" href="../../../lib/xml-in-laml/mirrors/man/xhtml10-transitional-mirror.html#p" target="program-frame" title="Manual: xhtml10-transitional-mirror">p</a> element (presumably to make a little white space before the next list item). In <a class="program-reference-strong" href="li-extensions-1-LARGE.html#write-html-clause-li" target="program-frame" title="li-extensions">write-html-clause-li</a> we see an example use of <a class="program-reference-weak" href="li-extensions-1-LARGE.html#spacy-li" target="program-frame" title="li-extensions">spacy-li</a> ( <span><a href="li-extensions-1-LARGE.html#write-html-clause-li-@a" target="program-frame"><img src="./images/source-mark-red.gif" title="A link to a program source marker in write-html-clause-li" alt="" border="0" /></a><a name="abstractions-@a"></a></span> ). In <a class="program-reference-weak" href="li-extensions-1-LARGE.html#spacy-li" target="program-frame" title="li-extensions">spacy-li</a> notice that we pass the attribute property list to the <a class="manual-reference" href="../../../lib/xml-in-laml/mirrors/man/xhtml10-transitional-mirror.html#li" target="program-frame" title="Manual: xhtml10-transitional-mirror">li</a> element and the contents to the nested <a class="manual-reference" href="../../../lib/xml-in-laml/mirrors/man/xhtml10-transitional-mirror.html#p" target="program-frame" title="Manual: xhtml10-transitional-mirror">p</a> element. Also notice the general and characteristic &#39;LAML parameter profile&#39; is now made available to the <a class="program-reference-weak" href="li-extensions-1-LARGE.html#spacy-li" target="program-frame" title="li-extensions">spacy-li</a> function.</p> <p>The function <a class="program-reference-strong" href="li-extensions-1-LARGE.html#question-li" target="program-frame" title="li-extensions">question-li</a> introduces an ad hoc abstraction, which takes a keywords attribute. We use various HTML elements, such as <a class="manual-reference" href="../../../lib/xml-in-laml/mirrors/man/xhtml10-transitional-mirror.html#p" target="program-frame" title="Manual: xhtml10-transitional-mirror">p</a>, <a class="manual-reference" href="../../../lib/xml-in-laml/mirrors/man/xhtml10-transitional-mirror.html#b" target="program-frame" title="Manual: xhtml10-transitional-mirror">b</a>, <a class="manual-reference" href="../../../lib/xml-in-laml/mirrors/man/xhtml10-transitional-mirror.html#br" target="program-frame" title="Manual: xhtml10-transitional-mirror">br</a>, and <a class="manual-reference" href="../../../lib/xml-in-laml/mirrors/man/xhtml10-transitional-mirror.html#font" target="program-frame" title="Manual: xhtml10-transitional-mirror">font</a> to render a <a class="program-reference-weak" href="li-extensions-1-LARGE.html#question-li" target="program-frame" title="li-extensions">question-li</a> Notice that we use <a class="program-reference-weak" href="li-extensions-1-LARGE.html#spacy-li" target="program-frame" title="li-extensions">spacy-li</a> in the body of <a class="program-reference-weak" href="li-extensions-1-LARGE.html#question-li" target="program-frame" title="li-extensions">question-li</a>. Notice again the versatility of the actual parameters in <a class="program-reference-strong" href="li-extensions-1-LARGE.html#write-html-clause-li" target="program-frame" title="li-extensions">write-html-clause-li</a> ( <span><a href="li-extensions-1-LARGE.html#write-html-clause-li-@b" target="program-frame"><img src="./images/source-mark-green.gif" title="A link to a program source marker in write-html-clause-li" alt="" border="0" /></a><a name="abstractions-@b"></a></span> ).</p> <p>The <a class="program-reference-weak" href="li-extensions-1-LARGE.html#question-li" target="program-frame" title="li-extensions">question-li</a> function passes an attribute validator, generated by <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#required-implied-attributes" target="program-frame" title="Manual: xml-in-laml">required-implied-attributes</a>. The higher-order function <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#required-implied-attributes" target="program-frame" title="Manual: xml-in-laml">required-implied-attributes</a> is convenient for creation of functions that check attributes. Its first parameter is the list of required attributes, and the second parameter is the list of other possible attributes (called implied attributes in a DTD). - Notice that <kbd>x</kbd> attribute passed to the second and third list is <b>not valid</b> according to the generated checking procedure. Try process <a class="program-file-reference-strong" href="li-extensions-1-LARGE.html" target="program-frame" title="Link to program file: li-extensions">li-extensions</a> to see the effect.</p> <p>The HTML page generated by <a class="program-file-reference-strong" href="li-extensions-1-LARGE.html" target="program-frame" title="Link to program file: li-extensions">li-extensions</a> is <a href="../../../examples/tutorial/higher-order-authoring/li-extensions.html" target="program-frame" title="LAML example"><font color="#000000">here</font></a> .</p></div></div><div class="elucidator-entry"><a name="more-abstractions"></a><div class="elucidator-entry-head"><a href="documentation.html#par-sec"><img src="./images/small-up.gif" title="XML-in-LAML parameterization and abstraction" alt="" border="0" /></a> <a href="documentation.html#abstractions"><img src="./images/small-prev.gif" title="XML-in-LAML abstractions" alt="" border="0" /></a> <img src="./images/small-next-blind.gif" title="" alt="" border="0" />  <br /> <b><font size="4"><span>5.3 &nbsp; &nbsp; More XML-in-LAML abstractions</span></font></b></div><div class="body-normal"><p>We will show yet another example of the use of <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-in-laml-abstraction" target="program-frame" title="Manual: xml-in-laml">xml-in-laml-abstraction</a> in the document <a class="program-file-reference-strong" href="more-li-extensions-1-LARGE.html" target="program-frame" title="Link to program file: more-li-extensions">more-li-extensions</a>. The generated HTML document can be seen <a href="../../../examples/tutorial/higher-order-authoring/more-li-extensions.html" target="program-frame" title="LAML example"><font color="#000000">here</font></a>. The example is made to illustrate the full generality and power of <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-in-laml-abstraction" target="program-frame" title="Manual: xml-in-laml">xml-in-laml-abstraction</a>. Notice, however, that we still recommend the use of the XML in LAML framework, instead of programming several XML in LAML abstractions.</p> <p>We program an abstraction <a class="program-reference-weak" href="more-li-extensions-1-LARGE.html#question-item" target="program-frame" title="more-li-extensions">question-item</a> with the attributes <span class="none-reference">exercise</span> and <span class="none-reference">eref</span>. A <a class="program-reference-weak" href="more-li-extensions-1-LARGE.html#question-item" target="program-frame" title="more-li-extensions">question-item</a> can contain a <a class="program-reference-weak" href="more-li-extensions-1-LARGE.html#keywords" target="program-frame" title="more-li-extensions">keywords</a> clause (plural) which, in turn, can contain a number of <a class="program-reference-weak" href="more-li-extensions-1-LARGE.html#keyword" target="program-frame" title="more-li-extensions">keyword</a> clauses. In <a class="program-reference-strong" href="more-li-extensions-1-LARGE.html#write-html-clause-more-li" target="program-frame" title="more-li-extensions">write-html-clause-more-li</a> we see a couple of examples ( <span><a href="more-li-extensions-1-LARGE.html#write-html-clause-more-li-@i" target="program-frame"><img src="./images/source-mark-tetal.gif" title="A link to a program source marker in write-html-clause-more-li" alt="" border="0" /></a><a name="more-abstractions-@i"></a></span> <span><a href="more-li-extensions-1-LARGE.html#write-html-clause-more-li-@j" target="program-frame"><img src="./images/source-mark-aqua.gif" title="A link to a program source marker in write-html-clause-more-li" alt="" border="0" /></a><a name="more-abstractions-@j"></a></span> ).</p> <p>Both <a class="program-reference-weak" href="more-li-extensions-1-LARGE.html#keywords" target="program-frame" title="more-li-extensions">keywords</a> and <a class="program-reference-weak" href="more-li-extensions-1-LARGE.html#keyword" target="program-frame" title="more-li-extensions">keyword</a> return AST&#39;s in a designated adhoc language. The AST constructor <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#make-ast" target="program-frame" title="Manual: xml-in-laml">make-ast</a> is used for the construction. The second lambda expression parameters of <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-in-laml-abstraction" target="program-frame" title="Manual: xml-in-laml">xml-in-laml-abstraction</a> of <a class="program-reference-strong" href="more-li-extensions-1-LARGE.html#keywords" target="program-frame" title="more-li-extensions">keywords</a> ( <span><a href="more-li-extensions-1-LARGE.html#keywords-@c" target="program-frame"><img src="./images/source-mark-blue.gif" title="A link to a program source marker in keywords" alt="" border="0" /></a><a name="more-abstractions-@c"></a></span> ) and <a class="program-reference-strong" href="more-li-extensions-1-LARGE.html#keyword" target="program-frame" title="more-li-extensions">keyword</a> ( <span><a href="more-li-extensions-1-LARGE.html#keyword-@d" target="program-frame"><img src="./images/source-mark-black.gif" title="A link to a program source marker in keyword" alt="" border="0" /></a><a name="more-abstractions-@d"></a></span> ) check the validity of the new elements. In <a class="program-reference-strong" href="more-li-extensions-1-LARGE.html#question-item" target="program-frame" title="more-li-extensions">question-item</a> we use <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#traverse-and-collect-first-from-ast" target="program-frame" title="Manual: xml-in-laml">traverse-and-collect-first-from-ast</a> and <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#traverse-and-collect-all-from-ast" target="program-frame" title="Manual: xml-in-laml">traverse-and-collect-all-from-ast</a> to decompose the constructed AST. The pieces are put together at <span><a href="more-li-extensions-1-LARGE.html#question-item-@a" target="program-frame"><img src="./images/source-mark-red.gif" title="A link to a program source marker in question-item" alt="" border="0" /></a><a name="more-abstractions-@a"></a></span> .</p> <p>Again - this example is probably too complex relative to the task at hand. But it shows that XML-in-LAML abstractions, made by <a class="manual-reference" href="../../../lib/xml-in-laml/man/xml-in-laml.html#xml-in-laml-abstraction" target="program-frame" title="Manual: xml-in-laml">xml-in-laml-abstraction</a>, can play together in the way it is intended.</p></div></div><div class="elucidator-section"><a name="ps"></a><div><a href="documentation.html#START"><img src="./images/small-up.gif" title="" alt="" border="0" /></a> <a href="documentation.html#par-sec"><img src="./images/small-prev.gif" title="XML-in-LAML parameterization and abstraction" alt="" border="0" /></a> <img src="./images/small-next-blind.gif" title="" alt="" border="0" /></div><div><b><font size="5"><span>6 &nbsp; &nbsp; Postscript</span></font></b></div><div class="body-normal"><p>For additional information about the use of higher-order function for web authoring you can consult lecture 4 of the teaching material <a href="http://www.cs.auc.dk/~normark/prog3-02/html/notes/index.html" target="pp-material">Functional Programming in Scheme - a web-oriented approach</a>.</p></div><div style="margin-left:10px;"></div></div><div>&nbsp; <p></p></div><div>&nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p></div></body></html>