<!-- Generated from an LAML (Lisp Abstracted Markup Language) source file. LAML is designed and implemented by Kurt Nørmark, normark@cs.auc.dk. Time of generation: 21. Marts 2000 14:06:34-->

<html><head><title>Source file</title></head><body bgcolor = "#ffffff" text = "#000000" link = "#000000" vlink = "#000000" ><font size = "3"  ><pre><font color = "#70a800">; The LAML library and programs written by Kurt Normark, Aalborg University, Denmark.
; Copyright (C) 1999  Kurt Normark.
;
; This program is free software; you can redistribute it and/or modify
; it under the terms of the GNU General Public License as published by
; the Free Software Foundation; either version 2 of the License, or
; (at your option) any later version.
;
; This program is distributed in the hope that it will be useful,
; but WITHOUT ANY WARRANTY; without even the implied warranty of
; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
; GNU General Public License for more details.
;
; You should have received a copy of the GNU General Public License
; along with this program; if not, write to the Free Software
; Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  US</font>
<font color = "#70a800">;;;; This library provides a number of functions that reads a string from a text file,
;;;; and functions which write a string to a text file.
;;;; In particular the library supports very useful functions that read selected parts of a text file to strings.&lt;p&gt;
;;;;
;;;; The main functions are: read-text-file and write-text-file.
;;;; The selective reading functions are read-text-file-between-marks and read-text-file-including-marks.</font>
<font color = "#70a800">; -----------------------------------------------------------------------------</font>
<a name="read-text-file"><font color = "#70a800">;;; Reading stuff. </font>

<a name="read-text-file"><a href = "file-read.html#read-text-file"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-text-file" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from read-text-file to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(read-text-file file-name)</font></b>
  <font color = "#70a800">;; Return the textual contents of file-name, as a string</font>
 (<b>let*</b> ((ip (<font color = "#a64700">open-input-file</font> file-name))
        (res (<a href = "file-read.html#read-text-file-from-input-port" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">read-text-file-from-input-port</font></a> ip)))
     (<font color = "#a64700">close-input-port</font> ip)
     res))

<a name="file-chunck"><a href = "file-read.html#file-chunck"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-f.html#file-chunck" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from file-chunck to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >file-chunck</font></b> 1000)

<a name="read-text-file-from-input-port"><a href = "file-read.html#read-text-file-from-input-port"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-text-file-from-input-port" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from read-text-file-from-input-port to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(read-text-file-from-input-port input-port)</font></b>
  <font color = "#70a800">;; Return the textual contents of input-port, as a string</font>
 (<b>let*</b> ((res (<a href = "file-read.html#read-text-file-portion" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">read-text-file-portion</font></a> input-port <a href = "file-read.html#file-chunck" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">file-chunck</font></a>)))
  (<b>if</b> (<font color = "#a64700">not</font> (<font color = "#a64700">eof-object?</font> (<font color = "#a64700">peek-char</font> input-port)))
      (<font color = "#a64700">string-append</font> res (<a href = "file-read.html#read-text-file-from-input-port" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">read-text-file-from-input-port</font></a> input-port))
      res)))

<a name="read-text-file-portion"><a href = "file-read.html#read-text-file-portion"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-text-file-portion" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from read-text-file-portion to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(read-text-file-portion input-port portion)</font></b>
  <font color = "#70a800">; read up to portion characters from input-port</font>
 (<b>let</b> ((str (<font color = "#a64700">make-string</font> portion #\space)))
  (<a href = "file-read.html#read-into-string" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">read-into-string</font></a> input-port str 0 portion)))

<a name="read-into-string"><a href = "file-read.html#read-into-string"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-into-string" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from read-into-string to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(read-into-string input-port str position <font color = "#a64700">max</font>)</font></b>
  <font color = "#70a800">; read up to max characters into str in a tail recursive fashion.
  ; return the string</font>
 (<b>if</b> (<font color = "#a64700">=</font> position <font color = "#a64700">max</font>)
     str
     (<b>let</b> ((ch (<font color = "#a64700">read-char</font> input-port)))
       (<b>cond</b> ((<font color = "#a64700">eof-object?</font> ch) (<font color = "#a64700">substring</font> str 0 position))
	      (<b>else</b> (<b>begin</b>
	              (<font color = "#a64700">string-set!</font> str position ch)
	              (<a href = "file-read.html#read-into-string" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">read-into-string</font></a> input-port str (<font color = "#a64700">+</font> position 1) <font color = "#a64700">max</font>)))))))

<a name="state-list"><font color = "#70a800">; -----------------------------------------------------------------------------
; File reading between marks.</font>

<a name="state-list"><a href = "file-read.html#state-list"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-s.html#state-list" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from state-list to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >state-list</font></b> '()) <a name="debugging-with-marks"><font color = "#70a800">; for debugging purposes</font>
<a name="debugging-with-marks"><a href = "file-read.html#debugging-with-marks"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-d.html#debugging-with-marks" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from debugging-with-marks to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >debugging-with-marks</font></b> #f)

<a name="read-text-file-between-marks"><a href = "file-read.html#read-text-file-between-marks"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-text-file-between-marks" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from read-text-file-between-marks to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(read-text-file-between-marks file-name mark)</font></b>
  <font color = "#70a800">;; Reads the part of the file between by excluding two occurences of mark, and return it as a text string. 
  ;; Specifically, it read and return the string from, but excluding, the first occurence of mark
  ;; to, but excluding, the next occurence of mark.
  ;; If no occurence of mark can be located, return the empty string.
  ;; If only one occurence of mark occurs, return a suffix of the file from the mark to the end of file.
  ;; This function is implemented by means of a state machine which controls when the actual reading must take place.</font>
 (<b>set!</b> <a href = "file-read.html#current-state" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">current-state</font></a> 'skip)
 (<b>if</b> <a href = "file-read.html#debugging-with-marks" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">debugging-with-marks</font></a> (<b>set!</b> <a href = "file-read.html#state-list" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">state-list</font></a> (<font color = "#a64700">list</font> 'skip)))
 (<b>let*</b> ((ip (<font color = "#a64700">open-input-file</font> file-name))
        (res (<a href = "file-read.html#read-text-file-from-input-port-with-marks" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">read-text-file-from-input-port-with-marks</font></a> ip mark)))
     (<font color = "#a64700">close-input-port</font> ip)
     (<b>set!</b> <a href = "file-read.html#current-state" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">current-state</font></a> 'skip)
     res))

<a name="file-chunck-with-marks"><a href = "file-read.html#file-chunck-with-marks"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-f.html#file-chunck-with-marks" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from file-chunck-with-marks to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >file-chunck-with-marks</font></b> 1000)
<a name="current-state"><a href = "file-read.html#current-state"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-c.html#current-state" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from current-state to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >current-state</font></b> 'skip)

<a name="read-text-file-from-input-port-with-marks"><a href = "file-read.html#read-text-file-from-input-port-with-marks"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-text-file-from-input-port-with-marks" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from read-text-file-from-input-port-with-marks to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(read-text-file-from-input-port-with-marks input-port mark)</font></b>
  <font color = "#70a800">; return the textual contents of file-name, as a string</font>
 (<b>let*</b> ((res (<a href = "file-read.html#read-text-file-portion-with-marks" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">read-text-file-portion-with-marks</font></a> input-port <a href = "file-read.html#file-chunck-with-marks" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">file-chunck-with-marks</font></a> mark)))
  (<b>if</b> (<font color = "#a64700">not</font> (<font color = "#a64700">eof-object?</font> (<font color = "#a64700">peek-char</font> input-port)))
      (<font color = "#a64700">string-append</font> res (<a href = "file-read.html#read-text-file-from-input-port-with-marks" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">read-text-file-from-input-port-with-marks</font></a> input-port mark))
      res)))

<a name="read-text-file-portion-with-marks"><a href = "file-read.html#read-text-file-portion-with-marks"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-text-file-portion-with-marks" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from read-text-file-portion-with-marks to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(read-text-file-portion-with-marks input-port portion mark)</font></b>
  <font color = "#70a800">; read up to portion characters from input-port</font>
 (<b>let</b> ((str (<font color = "#a64700">make-string</font> portion #\space)))
  (<a href = "file-read.html#read-into-string-with-marks" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">read-into-string-with-marks</font></a> input-port str 0 portion mark)))

<a name="read-into-string-with-marks"><a href = "file-read.html#read-into-string-with-marks"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-into-string-with-marks" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from read-into-string-with-marks to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(read-into-string-with-marks input-port str position <font color = "#a64700">max</font> mark)</font></b>
<font color = "#70a800">; read up to max characters into str in a tail recursive fashion. Return the string.</font>
  (<b>if</b> (<font color = "#a64700">=</font> position <font color = "#a64700">max</font>)
      str
      (<b>let</b> ((ch (<font color = "#a64700">read-char</font> input-port)))
	(<b>cond</b> ((<font color = "#a64700">eof-object?</font> ch) (<font color = "#a64700">substring</font> str 0 position))
	      (<b>else</b> (<b>let*</b> ((trans-result (<a href = "file-read.html#transition" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">transition</font></a> <a href = "file-read.html#current-state" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">current-state</font></a> ch mark))
			   (next-state (<font color = "#a64700">car</font> trans-result))
			   (output-function (<font color = "#a64700">cdr</font> trans-result))
			   (output-string (output-function <a href = "file-read.html#current-state" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">current-state</font></a> next-state ch mark)))
                      (<b>if</b> <a href = "file-read.html#debugging-with-marks" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">debugging-with-marks</font></a>
                          (<b>set!</b> <a href = "file-read.html#state-list" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">state-list</font></a> (<font color = "#a64700">cons</font> next-state <a href = "file-read.html#state-list" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">state-list</font></a>)))
		      (<a href = "file-read.html#put-into-string!" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">put-into-string!</font></a> str position output-string)
                      (<b>set!</b> <a href = "file-read.html#current-state" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">current-state</font></a> next-state)
		      (<a href = "file-read.html#read-into-string-with-marks" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">read-into-string-with-marks</font></a> input-port str (<font color = "#a64700">+</font> position (<font color = "#a64700">string-length</font> output-string)) <font color = "#a64700">max</font> mark)))))))

<a name="put-into-string!"><a href = "file-read.html#put-into-string!"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#put-into-string!" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from put-into-string! to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(put-into-string! str position addition)</font></b>
  (<b>if</b> (<font color = "#a64700">&gt;</font> (<font color = "#a64700">string-length</font> addition) 0)
      (<b>begin</b> (<font color = "#a64700">string-set!</font> str position (<font color = "#a64700">string-ref</font> addition 0))
             (<a href = "file-read.html#put-into-string!" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">put-into-string!</font></a> str (<font color = "#a64700">+</font> 1 position) (<font color = "#a64700">substring</font> addition 1 (<font color = "#a64700">string-length</font> addition))))))

<a name="output-skip"><font color = "#70a800">; -------------------------------------------------
; The state machine controlling the reading process between marks
; The marks are not included in the text returned
;
; States are either a symbol or a number:
  ; The symbol skip: Do not collect the character read.
  ; The symbol skip-rest: Reading is done. Never collect more characters.
                        ; (prevents re-reading after marked region).           
  ; The symbol collect: Do collect the character read.
  ; A positive number n: We have recognized n characters of the mark
                       ; from a skipping state towards a collecting state
  ; A negative number n: We have recognized -n characters of the mark
                       ; from collecting state towards a skipping state.
;
; Observation: In negatively numbered states, we have to output a partially
; matched mark. This is done by output-pending-mark.</font>


<a name="output-skip"><a href = "file-read.html#output-skip"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-o.html#output-skip" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from output-skip to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(output-skip in-state out-state char mark)</font></b>
  "")

<a name="output-let-go"><a href = "file-read.html#output-let-go"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-o.html#output-let-go" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from output-let-go to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(output-let-go in-state out-state char mark)</font></b> 
  (<a href = "general.html#as-string" title = "general" style = "{text-decoration: none;}" ><font color = "#000080">as-string</font></a> char))

<a name="output-pending-mark"><a href = "file-read.html#output-pending-mark"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-o.html#output-pending-mark" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from output-pending-mark to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(output-pending-mark in-state out-state char mark)</font></b>
  <font color = "#70a800">; output the portion of the mark already read</font>
  (<font color = "#a64700">substring</font> mark 0 (<font color = "#a64700">abs</font> in-state)))


<a name="transition"><a href = "file-read.html#transition"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-t.html#transition" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from transition to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(transition in-state char mark)</font></b>
  (<b>let</b> ((mark0 (<font color = "#a64700">string-ref</font> mark 0)))  <font color = "#70a800">; first char in mark</font>
    (<b>cond</b>  ((<b>and</b> (<font color = "#a64700">symbol?</font> in-state) (<font color = "#a64700">eq?</font> in-state 'skip))
              (<b>cond</b> ((<font color = "#a64700">eq?</font> char mark0)                            (<font color = "#a64700">cons</font> 1 <a href = "file-read.html#output-skip" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-skip</font></a>))
                    (<b>else</b>                                        (<font color = "#a64700">cons</font> 'skip <a href = "file-read.html#output-skip" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-skip</font></a>))))

           ((<b>and</b> (<font color = "#a64700">symbol?</font> in-state) (<font color = "#a64700">eq?</font> in-state 'collect))     
              (<b>cond</b> ((<font color = "#a64700">eq?</font> char mark0)                            (<font color = "#a64700">cons</font> -1 <a href = "file-read.html#output-skip" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-skip</font></a>))
                    (<b>else</b>                                        (<font color = "#a64700">cons</font> 'collect <a href = "file-read.html#output-let-go" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-let-go</font></a>))))

           ((<b>and</b> (<a href = "file-read.html#positive-number?" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">positive-number?</font></a> in-state) (<font color = "#a64700">&lt;</font> in-state (<font color = "#a64700">string-length</font> mark))
              (<b>cond</b> ((<font color = "#a64700">eq?</font> char (<font color = "#a64700">string-ref</font> mark in-state))       
                                                                 (<font color = "#a64700">cons</font> (<font color = "#a64700">+</font> in-state 1) <a href = "file-read.html#output-skip" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-skip</font></a>))
                    (<b>else</b>                                        (<font color = "#a64700">cons</font> 'skip <a href = "file-read.html#output-skip" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-skip</font></a>)))))

           ((<b>and</b> (<a href = "file-read.html#positive-number?" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">positive-number?</font></a> in-state) (<font color = "#a64700">=</font> in-state (<font color = "#a64700">string-length</font> mark)))
                                                                 (<font color = "#a64700">cons</font> 'collect <a href = "file-read.html#output-let-go" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-let-go</font></a>))

           ((<b>and</b> (<a href = "file-read.html#negative-number?" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">negative-number?</font></a> in-state) (<font color = "#a64700">&lt;</font> (<font color = "#a64700">abs</font> in-state) (<font color = "#a64700">string-length</font> mark)))
              (<b>cond</b> ((<font color = "#a64700">eq?</font> char (<font color = "#a64700">string-ref</font> mark (<font color = "#a64700">abs</font> in-state)))       
                                                                 (<font color = "#a64700">cons</font> (<font color = "#a64700">-</font> in-state 1) <a href = "file-read.html#output-skip" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-skip</font></a>))
                    (<b>else</b>                                        (<font color = "#a64700">cons</font> 'collect <a href = "file-read.html#output-pending-mark" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-pending-mark</font></a>))))

           ((<b>and</b> (<a href = "file-read.html#negative-number?" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">negative-number?</font></a> in-state) (<font color = "#a64700">=</font> (<font color = "#a64700">abs</font> in-state) (<font color = "#a64700">string-length</font> mark)))
                                                                 (<font color = "#a64700">cons</font> 'skip-rest <a href = "file-read.html#output-skip" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-skip</font></a>))

           ((<b>and</b> (<font color = "#a64700">symbol?</font> in-state) (<font color = "#a64700">eq?</font> in-state 'skip-rest))   (<font color = "#a64700">cons</font> 'skip-rest <a href = "file-read.html#output-skip" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-skip</font></a>))

       )))

<a name="positive-number?"><a href = "file-read.html#positive-number?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#positive-number?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from positive-number? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(positive-number? x)</font></b>
  (<b>and</b> (<font color = "#a64700">number?</font> x) (<font color = "#a64700">&gt;</font> x 0)))


<a name="negative-number?"><a href = "file-read.html#negative-number?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-n.html#negative-number?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from negative-number? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(negative-number? x)</font></b>
  (<b>and</b> (<font color = "#a64700">number?</font> x) (<font color = "#a64700">&lt;</font> x 0)))



<a name="read-text-file-including-marks"><font color = "#70a800">; -----------------------------------------------------------------------------
; File reading including start-mark and end-mark
; We support potential different start and end marks</font>

<a name="read-text-file-including-marks"><a href = "file-read.html#read-text-file-including-marks"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-text-file-including-marks" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from read-text-file-including-marks to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(read-text-file-including-marks file-name start-mark end-mark)</font></b>
  <font color = "#70a800">;; Reads the part of the file between and including occurences of start-mark and end-mark, and return it as a text string.
  ;; Specifically, read and return the string from and including the first occurence of start-mark
  ;; to and including the next occurence of end-mark. 
  ;; If no occurence of the mark can be located, return the empty string.
  ;; If only the start-mark occurs, return a suffix of the file from the start-mark to the end of file.
  ;; This function is implemented by means of a state machine which controls when the actual reading must take place.</font>
 (<b>set!</b> <a href = "file-read.html#current-state" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">current-state</font></a> 'skip)
 (<b>if</b> <a href = "file-read.html#debugging-with-marks" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">debugging-with-marks</font></a> (<b>set!</b> <a href = "file-read.html#state-list" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">state-list</font></a> (<font color = "#a64700">list</font> 'skip)))
 (<b>let*</b> ((ip (<font color = "#a64700">open-input-file</font> file-name))
        (res (<a href = "file-read.html#read-text-file-from-input-port-including-marks" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">read-text-file-from-input-port-including-marks</font></a> ip start-mark end-mark)))
     (<font color = "#a64700">close-input-port</font> ip)
     (<b>set!</b> <a href = "file-read.html#current-state" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">current-state</font></a> 'skip)
     res))

<a name="read-text-file-from-input-port-including-marks"><a href = "file-read.html#read-text-file-from-input-port-including-marks"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-text-file-from-input-port-including-marks" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from read-text-file-from-input-port-including-marks to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(read-text-file-from-input-port-including-marks input-port start-mark end-mark)</font></b>
  <font color = "#70a800">; return the textual contents of file-name, as a string</font>
 (<b>let*</b> ((res (<a href = "file-read.html#read-text-file-portion-including-marks" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">read-text-file-portion-including-marks</font></a> input-port <a href = "file-read.html#file-chunck-with-marks" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">file-chunck-with-marks</font></a> start-mark end-mark)))
  (<b>if</b> (<font color = "#a64700">not</font> (<font color = "#a64700">eof-object?</font> (<font color = "#a64700">peek-char</font> input-port)))
      (<font color = "#a64700">string-append</font> res (<a href = "file-read.html#read-text-file-from-input-port-including-marks" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">read-text-file-from-input-port-including-marks</font></a> input-port start-mark end-mark))
      res)))

<a name="read-text-file-portion-including-marks"><a href = "file-read.html#read-text-file-portion-including-marks"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-text-file-portion-including-marks" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from read-text-file-portion-including-marks to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(read-text-file-portion-including-marks input-port portion start-mark end-mark)</font></b>
  <font color = "#70a800">; read up to portion characters from input-port</font>
 (<b>let</b> ((str (<font color = "#a64700">make-string</font> portion #\space)))
  (<a href = "file-read.html#read-into-string-including-marks" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">read-into-string-including-marks</font></a> input-port str 0 portion start-mark end-mark)))

<a name="read-into-string-including-marks"><a href = "file-read.html#read-into-string-including-marks"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-into-string-including-marks" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from read-into-string-including-marks to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(read-into-string-including-marks input-port str position <font color = "#a64700">max</font> start-mark end-mark)</font></b>
<font color = "#70a800">; read up to max characters into str in a tail recursive fashion. Return the string.</font>
  (<b>if</b> (<font color = "#a64700">=</font> position <font color = "#a64700">max</font>)
      str
      (<b>let</b> ((ch (<font color = "#a64700">read-char</font> input-port)))
	(<b>cond</b> ((<font color = "#a64700">eof-object?</font> ch) (<font color = "#a64700">substring</font> str 0 position))
	      (<b>else</b> (<b>let*</b> ((trans-result (<a href = "file-read.html#transition1" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">transition1</font></a> <a href = "file-read.html#current-state" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">current-state</font></a> ch start-mark end-mark))
			   (next-state (<font color = "#a64700">car</font> trans-result))
			   (output-function (<font color = "#a64700">cdr</font> trans-result))
			   (output-string (output-function <a href = "file-read.html#current-state" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">current-state</font></a> next-state ch start-mark end-mark)))
                      (<b>if</b> <a href = "file-read.html#debugging-with-marks" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">debugging-with-marks</font></a>
                          (<b>set!</b> <a href = "file-read.html#state-list" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">state-list</font></a> (<font color = "#a64700">cons</font> next-state <a href = "file-read.html#state-list" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">state-list</font></a>)))
		      (<a href = "file-read.html#put-into-string!" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">put-into-string!</font></a> str position output-string)
                      (<b>set!</b> <a href = "file-read.html#current-state" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">current-state</font></a> next-state)
		      (<a href = "file-read.html#read-into-string-including-marks" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">read-into-string-including-marks</font></a> input-port str (<font color = "#a64700">+</font> position (<font color = "#a64700">string-length</font> output-string))
                                                        <font color = "#a64700">max</font> start-mark end-mark)))))))

<a name="put-into-string!"><a href = "file-read.html#put-into-string!"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#put-into-string!" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from put-into-string! to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(put-into-string! str position addition)</font></b>
  (<b>if</b> (<font color = "#a64700">&gt;</font> (<font color = "#a64700">string-length</font> addition) 0)
      (<b>begin</b> (<font color = "#a64700">string-set!</font> str position (<font color = "#a64700">string-ref</font> addition 0))
             (<a href = "file-read.html#put-into-string!" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">put-into-string!</font></a> str (<font color = "#a64700">+</font> 1 position) (<font color = "#a64700">substring</font> addition 1 (<font color = "#a64700">string-length</font> addition))))))

<a name="output-skip1"><font color = "#70a800">; -------------------------------------------------
; The state machine controlling the reading process between marks
; The marks are not included in the text returned
;
; States are either a symbol or a number:
  ; The symbol skip: Do not collect the character read.
  ; The symbol skip-rest: Reading is done. Never collect more characters.
                        ; (prevents re-reading after marked region).           
  ; The symbol collect: Do collect the character read.
  ; A positive number n: We have recognized n characters of the start mark,
                       ; from a skipping state towards a collecting state
  ; A negative number n: We have recognized -n characters of the end-mark, 
                       ; from collecting state towards a skipping state.
;
; Observation: In negatively numbered states, we have to output a partially
; matched mark. This is done by output-pending-mark.</font>


<a name="output-skip1"><a href = "file-read.html#output-skip1"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-o.html#output-skip1" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from output-skip1 to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(output-skip1 in-state out-state char start-mark end-mark)</font></b>
  "")

<a name="output-let-go1"><a href = "file-read.html#output-let-go1"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-o.html#output-let-go1" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from output-let-go1 to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(output-let-go1 in-state out-state char start-mark end-mark)</font></b> 
  (<a href = "general.html#as-string" title = "general" style = "{text-decoration: none;}" ><font color = "#000080">as-string</font></a> char))


<a name="output-pending-start-mark"><a href = "file-read.html#output-pending-start-mark"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-o.html#output-pending-start-mark" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from output-pending-start-mark to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(output-pending-start-mark in-state out-state char start-mark end-mark)</font></b>
  <font color = "#70a800">; output the portion of the mark already read</font>
  (<font color = "#a64700">string-append</font> start-mark (<a href = "general.html#as-string" title = "general" style = "{text-decoration: none;}" ><font color = "#000080">as-string</font></a> char)))

<a name="output-pending-end-mark"><a href = "file-read.html#output-pending-end-mark"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-o.html#output-pending-end-mark" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from output-pending-end-mark to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(output-pending-end-mark in-state out-state char start-mark end-mark)</font></b>
  <font color = "#70a800">; output the portion of the mark already read</font>
  (<font color = "#a64700">substring</font> end-mark 0 (<font color = "#a64700">abs</font> in-state)))


<a name="transition1"><a href = "file-read.html#transition1"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-t.html#transition1" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from transition1 to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(transition1 in-state char start-mark end-mark)</font></b>
  (<b>let</b> ((mark0 (<font color = "#a64700">string-ref</font> start-mark 0))  <font color = "#70a800">; first char in start-mark</font>
        (markn (<font color = "#a64700">string-ref</font> end-mark 0))    <font color = "#70a800">; first char in end-mark</font>
       )
    (<b>cond</b>  ((<b>and</b> (<font color = "#a64700">symbol?</font> in-state) (<font color = "#a64700">eq?</font> in-state 'skip))
              (<b>cond</b> ((<font color = "#a64700">eq?</font> char mark0)                            (<font color = "#a64700">cons</font> 1 <a href = "file-read.html#output-skip1" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-skip1</font></a>))
                    (<b>else</b>                                        (<font color = "#a64700">cons</font> 'skip <a href = "file-read.html#output-skip1" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-skip1</font></a>))))

           ((<b>and</b> (<font color = "#a64700">symbol?</font> in-state) (<font color = "#a64700">eq?</font> in-state 'collect))     
              (<b>cond</b> ((<font color = "#a64700">eq?</font> char markn)                            (<font color = "#a64700">cons</font> -1 <a href = "file-read.html#output-let-go1" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-let-go1</font></a>))
                    (<b>else</b>                                        (<font color = "#a64700">cons</font> 'collect <a href = "file-read.html#output-let-go1" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-let-go1</font></a>))))

           ((<b>and</b> (<a href = "file-read.html#positive-number?" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">positive-number?</font></a> in-state) (<font color = "#a64700">&lt;</font> in-state (<font color = "#a64700">string-length</font> start-mark))
              (<b>cond</b> ((<font color = "#a64700">eq?</font> char (<font color = "#a64700">string-ref</font> start-mark in-state))       
                                                                 (<font color = "#a64700">cons</font> (<font color = "#a64700">+</font> in-state 1) <a href = "file-read.html#output-skip1" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-skip1</font></a>))
                    (<b>else</b>                                        (<font color = "#a64700">cons</font> 'skip <a href = "file-read.html#output-skip1" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-skip1</font></a>)))))

           ((<b>and</b> (<a href = "file-read.html#positive-number?" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">positive-number?</font></a> in-state) (<font color = "#a64700">=</font> in-state (<font color = "#a64700">string-length</font> start-mark)))
                                                                 (<font color = "#a64700">cons</font> 'collect <a href = "file-read.html#output-pending-start-mark" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-pending-start-mark</font></a>))

           ((<b>and</b> (<a href = "file-read.html#negative-number?" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">negative-number?</font></a> in-state) (<font color = "#a64700">&lt;</font> (<font color = "#a64700">abs</font> in-state) (<font color = "#a64700">string-length</font> end-mark)))
              (<b>cond</b> ((<font color = "#a64700">eq?</font> char (<font color = "#a64700">string-ref</font> end-mark (<font color = "#a64700">abs</font> in-state)))       
                                                                 (<font color = "#a64700">cons</font> (<font color = "#a64700">-</font> in-state 1) <a href = "file-read.html#output-let-go1" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-let-go1</font></a>))
                    (<b>else</b>                                        (<font color = "#a64700">cons</font> 'collect <a href = "file-read.html#output-let-go1" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-let-go1</font></a>))))

           ((<b>and</b> (<a href = "file-read.html#negative-number?" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">negative-number?</font></a> in-state) (<font color = "#a64700">=</font> (<font color = "#a64700">abs</font> in-state) (<font color = "#a64700">string-length</font> end-mark)))
                                                                 (<font color = "#a64700">cons</font> 'skip-rest <a href = "file-read.html#output-skip1" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-skip1</font></a>))

           ((<b>and</b> (<font color = "#a64700">symbol?</font> in-state) (<font color = "#a64700">eq?</font> in-state 'skip-rest))   (<font color = "#a64700">cons</font> 'skip-rest <a href = "file-read.html#output-skip1" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">output-skip1</font></a>))

       )))


<font color = "#70a800">; ---------------------------------------------------------------------------------------------------------------</font>
<a name="code-example"><font color = "#70a800">;; Convenient and specialized function returning the contents of a program file.
;; Other usages are also possible.
;; Reads an external file, either an entire file (if no optional mark parameter)
;; or a region surrounded by mark.</font>

<a name="code-example"><a href = "file-read.html#code-example"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-c.html#code-example" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from code-example to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(code-example file . mark)</font></b>
  (<b>let</b> ((code-text
           (<b>if</b> (<font color = "#a64700">null?</font> mark) 
               (<a href = "file-read.html#read-text-file" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">read-text-file</font></a> file)
               (<a href = "file-read.html#read-text-file-between-marks" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">read-text-file-between-marks</font></a> file (<font color = "#a64700">car</font> mark)))))
     code-text))





<font color = "#70a800">; ---------------------------------------------------------------------------------------------------------------</font>
<font color = "#70a800">;;; Writing stuff. </font>
<a name="write-text-file"><font color = "#70a800">;; Write the text string str to the file named file-name. 
;; After this function call, the file contains exactly the string str.
;; Opening and closing is done by this function.</font>
<a name="write-text-file"><a href = "file-read.html#write-text-file"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-w.html#write-text-file" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from write-text-file to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(write-text-file str file-name)</font></b>
   (<b>if</b> (file-exists? file-name) (delete-file file-name))
   (<b>let*</b> ((op (<font color = "#a64700">open-output-file</font> file-name)))
     (<a href = "file-read.html#write-text-file-to-port" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">write-text-file-to-port</font></a> str op)
     (<font color = "#a64700">close-output-port</font> op)))

<a name="write-string-to-port"><font color = "#70a800">;; Write the string str to port, which is assumed to be open.
;; This function does not close the port.</font>
<a name="write-string-to-port"><a href = "file-read.html#write-string-to-port"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-w.html#write-string-to-port" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from write-string-to-port to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(write-string-to-port str port)</font></b>
  (<a href = "file-read.html#write-text-file-to-port" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">write-text-file-to-port</font></a> str port))

<a name="write-text-file-to-port"><a href = "file-read.html#write-text-file-to-port"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-w.html#write-text-file-to-port" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from write-text-file-to-port to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(write-text-file-to-port str port)</font></b>
  (<a href = "file-read.html#write-text-file-to-port-1" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">write-text-file-to-port-1</font></a> 0 (<font color = "#a64700">string-length</font> str) str port))

<a name="write-text-file-to-port-1"><a href = "file-read.html#write-text-file-to-port-1"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-w.html#write-text-file-to-port-1" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In file-read: Link from write-text-file-to-port-1 to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<b>define</b> <b><font color = "#ff0000"  >(write-text-file-to-port-1 i <font color = "#a64700">max</font> str port)</font></b>
  (<b>if</b> (<font color = "#a64700">&lt;</font> i <font color = "#a64700">max</font>)
    (<b>begin</b>
       (<font color = "#a64700">write-char</font> (<font color = "#a64700">string-ref</font> str i) port)
       (<a href = "file-read.html#write-text-file-to-port-1" title = "file-read" style = "{text-decoration: none;}" ><font color = "#000080">write-text-file-to-port-1</font></a> (<font color = "#a64700">+</font> i 1) <font color = "#a64700">max</font> str port))))
  

</pre></font>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p></body></html>