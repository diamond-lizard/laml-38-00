<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><title>Reference Manual of the XML parser and pretty printer for LAML</title> <link href="../../../css-stylesheets/manual/manual-stylesheet.css" rel="stylesheet" type="text/css" /> <link rel="SHORTCUT ICON" href="../../../images/16-16-icon.ico" /></head> <body class="manual-body"><a name="MANUAL-TOP"></a> <table border="0px" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td width="33%" align="left" valign="top"><font size="2"><span class="manual-top-banner-when-generated">Generated: Monday, November 14, 2011, 09:19:50</span></font></td> <td width="34%" align="center" valign="top"><font size="2"><span>Copyright  &copy; 2011 , Kurt Nørmark</span></font></td> <td width="33%" align="right" valign="top"><font size="2"><a href="../../../index.html" title="The local LAML software home page" target="_top"><img src="../../../images/laml-home.gif" alt="The local LAML software home page" border="0" /></a></font></td></tr></tbody></table> <h1 class="manual-title">Reference Manual of the XML parser and pretty printer for LAML</h1> <p></p> <h3><span class="manual-author-element"><span>Kurt Nørmark   &copy;</span> normark@cs.aau.dk</span> <span class="manual-affiliation-element">Department of Computer Science, Aalborg University, Denmark.</span></h3> <p></p>   <div class="manual-source-file-description">LAML Source file: tools/xml-html-support/xml-support.scm</div> <p></p> <a name="MANUAL-ABSTRACT"></a> <div class="manual-abstract"> This is a simple, non-validating XML parser for LAML together with XML pretty printing support. As of the current version, the parser is not complete. Nevertheless, it is useful tool for parsing most everyday XML documents to a Lisp data structure. <p> Given a well-formed XML document this parser returns a Lisp tree structure that represents the parse tree of the XML document. The parser handles start tags, end tags, and empty tags (in this parser called start-end tags). Entities and their declarations are not handled at all.<p> The top level functions are xml-parse and xml-parse-file. The xml-parser can be loaded as a library as well.<p> There exists <a href="../doc/xml-parser.html" target="_top">elucidative documentation</a> of this parser. See also <a href="html-support.html">the HTML parsing and pretty printing support</a>, which is built on top of the XML tools, and the illustrative  <a href="../../../examples/xml-parser-and-pretty-printer/index.html">examples </a>  of the XML parser and pretty printer.<p> This tool assumes that <kbd> laml.scm </kbd> and the general library are loaded.  The tool loads the collect-skip and the file-read libraries.<p> The typographical rebreaking and re-indenting of running text is still missing.<p> The LAML interactive tool procedures <kbd> xml-pp </kbd> and <kbd> xml-parse </kbd> in <kbd> laml.scm </kbd> are convenient top-level pretty printing and parse procedures respectively.<p> Please notice that this is not a production quality parser and pretty printer! It is currently used for internal purposes.<p> From LAML version 20, the XML pretty printing in lib/xml-in-laml/xml-in-laml.scm replaces the XML pretty printing in this library. </div> <p></p> <a name="MANUAL-TOC"></a> <div class="manual-table-of-contents-header">Table of Contents:</div> <div style="margin-left:12px;"><div><table border="0"><tbody><tr><td width="280" valign="top"><a href="#SECTION1"><font size="2">1.  The format of the parse tree.</font></a></td> <td width="280" valign="top"><a href="#SECTION4"><font size="2">4.  AST-level parser functions.</font></a></td> <td width="280" valign="top"><a href="#SECTION7"><font size="2">7.  Variables that control the pretty printing.</font></a></td></tr> <tr><td width="280" valign="top"><a href="#SECTION2"><font size="2">2.  Constants.</font></a></td> <td width="280" valign="top"><a href="#SECTION5"><font size="2">5.  Utility parser functions.</font></a></td> <td width="280" valign="top"><a href="#SECTION8"><font size="2">8.  Parse tree conversions.</font></a></td></tr> <tr><td width="280" valign="top"><a href="#SECTION3"><font size="2">3.  Native low-level level parser functions.</font></a></td> <td width="280" valign="top"><a href="#SECTION6"><font size="2">6.  Top level XML pretty printing functions.</font></a></td> <td width="280" valign="top"> </td></tr></tbody></table></div></div> <p></p> <a name="MANUAL-INDEX"></a> <div class="manual-alphabetic-index-header">Alphabetic index:</div> <div style="margin-left:12px;"><table border="3" class="manual-alphabetic-index"><tr><td class="manual-header-title"><a href="#collect-attributes-in-tree">collect-attributes-in-tree</a></td> <td class="manual-header-form">(collect-attributes-in-tree tree attr-key)</td> <td class="manual-header-description">Traverse the parse tree, tree, and return the list all attribute values of the attribute attr-key found in the tree.</td></tr> <tr><td class="manual-header-title"><a href="#indentation-delta">indentation-delta</a></td> <td class="manual-header-form">indentation-delta</td> <td class="manual-header-description">An integer which gives the level of indentation </td></tr> <tr><td class="manual-header-title"><a href="#is-tag-of-kind?">is-tag-of-kind?</a></td> <td class="manual-header-form">(is-tag-of-kind? tag-kind)</td> <td class="manual-header-description">Return a predicate which tests whether a subtree or node is of tag-kind (a symbol or string).</td></tr> <tr><td class="manual-header-title"><a href="#parse-tree-to-ast">parse-tree-to-ast</a></td> <td class="manual-header-form">(parse-tree-to-ast pt language)</td> <td class="manual-header-description">Convert a HTML/XML parse tree to a LAML abstract syntax tree in language.</td></tr> <tr><td class="manual-header-title"><a href="#parse-tree-to-element-structure">parse-tree-to-element-structure</a></td> <td class="manual-header-form">(parse-tree-to-element-structure pt)</td> <td class="manual-header-description">Convert a HTML/XML parse tree to an element structure ala LENO.</td></tr> <tr><td class="manual-header-title"><a href="#parse-tree-to-laml">parse-tree-to-laml</a></td> <td class="manual-header-form">(parse-tree-to-laml tree output-file)</td> <td class="manual-header-description">Transform an XML or HTML parse tree to a similar surface LAML expression on output-file.</td></tr> <tr><td class="manual-header-title"><a href="#parse-xml">parse-xml</a></td> <td class="manual-header-form">(parse-xml file-path)</td> <td class="manual-header-description">This function parses a file and returns the parse tree.</td></tr> <tr><td class="manual-header-title"><a href="#parse-xml-file">parse-xml-file</a></td> <td class="manual-header-form">(parse-xml-file in-file-path out-file-path)</td> <td class="manual-header-description">Top level parse function which takes an XML file name as input, and delivers a parse tree on out-file-path.</td></tr> <tr><td class="manual-header-title"><a href="#parse-xml-file-to-ast">parse-xml-file-to-ast</a></td> <td class="manual-header-form">(parse-xml-file-to-ast in-file-path out-file-path xml-language)</td> <td class="manual-header-description">Top level parse function which takes an XML file name as input, and delivers an XML-in-LAML AST on out-file-path.</td></tr> <tr><td class="manual-header-title"><a href="#parse-xml-string">parse-xml-string</a></td> <td class="manual-header-form">(parse-xml-string xml-string)</td> <td class="manual-header-description">This function parses a string with XML contents and returns the parse tree.</td></tr> <tr><td class="manual-header-title"><a href="#parse-xml-string-to-ast">parse-xml-string-to-ast</a></td> <td class="manual-header-form">(parse-xml-string-to-ast xml-string xml-language)</td> <td class="manual-header-description">This function parses a string with XML contents and returns an XML-in-LAML AST.</td></tr> <tr><td class="manual-header-title"><a href="#parse-xml-to-ast">parse-xml-to-ast</a></td> <td class="manual-header-form">(parse-xml-to-ast file-path xml-language)</td> <td class="manual-header-description">This function parses an XML file and returns the corresponding XML-in-LAML AST.</td></tr> <tr><td class="manual-header-title"><a href="#parser-status">parser-status</a></td> <td class="manual-header-form">(parser-status)</td> <td class="manual-header-description">Display parser status in case of error in the parse process.</td></tr> <tr><td class="manual-header-title"><a href="#prefered-maximum-width">prefered-maximum-width</a></td> <td class="manual-header-form">prefered-maximum-width</td> <td class="manual-header-description">An integer that expresses the preferred maximum column width </td></tr> <tr><td class="manual-header-title"><a href="#pretty-print-xml-parse-tree">pretty-print-xml-parse-tree</a></td> <td class="manual-header-form">(pretty-print-xml-parse-tree parse-tree)</td> <td class="manual-header-description">Pretty prints a HTML parse tree, and return the result as a string.</td></tr> <tr><td class="manual-header-title"><a href="#pretty-print-xml-parse-tree-file">pretty-print-xml-parse-tree-file</a></td> <td class="manual-header-form">(pretty-print-xml-parse-tree-file in-file-path [out-file-path])</td> <td class="manual-header-description">Pretty prints the XML parse tree (Lisp file) in in-file-path.</td></tr> <tr><td class="manual-header-title"><a href="#resulting-parse-tree">resulting-parse-tree</a></td> <td class="manual-header-form">resulting-parse-tree</td> <td class="manual-header-description">A global varible holding the latest produced parse tree </td></tr> <tr><td class="manual-header-title"><a href="#traverse-and-collect-from-parse-tree">traverse-and-collect-from-parse-tree</a></td> <td class="manual-header-form">(traverse-and-collect-from-parse-tree tree node-interesting? result-transformer)</td> <td class="manual-header-description">Traverse the parse tree, tree, and return a list of result-transformed nodes  that satisfy the node-interesting? predicate in the parse tree.</td></tr> <tr><td class="manual-header-title"><a href="#use-single-lining">use-single-lining</a></td> <td class="manual-header-form">use-single-lining</td> <td class="manual-header-description">A boolean which controls the application of single line pretty printing.</td></tr> <tr><td class="manual-header-title"><a href="#white-space-preserving-tags">white-space-preserving-tags</a></td> <td class="manual-header-form">white-space-preserving-tags</td> <td class="manual-header-description">A list of tag names for which white space is preserved.</td></tr> <tr><td class="manual-header-title"><a href="#xml-parser-preserve-white-space">xml-parser-preserve-white-space</a></td> <td class="manual-header-form">xml-parser-preserve-white-space</td> <td class="manual-header-description">A constant that controls if white space is uniformly preserved by the XML parser.</td></tr></table></div> <p></p> <table class="manual-table"><tr><td width="3000px" colspan="4"></td></tr> <tr class="manual-section"><td class="manual-section" colspan="4"><a name="SECTION1"></a> <span><a href="#MANUAL-TOP"><img src="../../../images/small-up.gif" title="Manual top" alt="" border="0" /></a> <img src="../../../images/small-prev-blind.gif" title="" alt="" border="0" /> <a href="#SECTION2"><img src="../../../images/small-next.gif" title="Next manual section" alt="" border="0" /></a></span> <br /> <span class="manual-section-number">1</span> <span class="manual-section-title">The format of the parse tree.</span></td></tr> <tr><td colspan="4" class="manual-section-description">A <em>parse tree</em> T  produced by this tool is of the form <pre>    (tree N ST1 ST2 ... STn) </pre> where STi, i=1..n are parse trees (recursively) and N is a node (see below). <p> A leaf node N may be of the form <pre>    (tree N) </pre> or just N if N is a string (corresponding to textual contents) or an empty tag (a tag without contents).<p> An <em>inner node</em> of a parse tree corresponds to a tag (an element) with contents. Such a node is represented by the following &#39;tag structure&#39;: <pre>    (tag kind tag-name . attr-info) </pre> tag is a symbol (for tagging). kind is either start or start-end (both symbols). tag-name is a string. Attr-info is the attribute on property list format.<p> A <em>terminal node</em> may be a start-end node, a comment node or just a contents string. End tags are not represented  in the parse tree.<p> Here is an example of a start-end node (empty node) with two properties: <pre>    (tag start-end "title" role "xxx" size "5") </pre> Comments are represented as comment nodes of the form <pre>    (comment comment-string) </pre> <p> Declaration nodes of the form <pre>    (declaration kind value) </pre> are also possible. They are for instance used for document type (???) information in HTML. Finally nodes of the form <pre>    (xml-declaration attribute-property-list) </pre> are supported.</td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr class="manual-section"><td class="manual-section" colspan="4"><a name="SECTION2"></a> <span><a href="#MANUAL-TOP"><img src="../../../images/small-up.gif" title="Manual top" alt="" border="0" /></a> <a href="#SECTION1"><img src="../../../images/small-prev.gif" title="Previous manual section" alt="" border="0" /></a> <a href="#SECTION3"><img src="../../../images/small-next.gif" title="Next manual section" alt="" border="0" /></a></span> <br /> <span class="manual-section-number">2</span> <span class="manual-section-title">Constants.</span></td></tr> <tr><td colspan="4" class="manual-section-description">Constants that affect the working of the parser. </td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="xml-parser-preserve-white-space"></a> xml-parser-preserve-white-space</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">xml-parser-preserve-white-space</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">A constant that controls if white space is uniformly preserved by the XML parser. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#xml-parser-preserve-white-space">xml-parser-preserve-white-space</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="white-space-preserving-tags"></a> white-space-preserving-tags</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">white-space-preserving-tags</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">A list of tag names for which white space is preserved. A list of strings. No angle brackets (&#39;<&#39; or &#39;>&#39;)should be given in the names. Must be assigned to the appropriate value before a parse function is called. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#white-space-preserving-tags">white-space-preserving-tags</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr class="manual-section"><td class="manual-section" colspan="4"><a name="SECTION3"></a> <span><a href="#MANUAL-TOP"><img src="../../../images/small-up.gif" title="Manual top" alt="" border="0" /></a> <a href="#SECTION2"><img src="../../../images/small-prev.gif" title="Previous manual section" alt="" border="0" /></a> <a href="#SECTION4"><img src="../../../images/small-next.gif" title="Next manual section" alt="" border="0" /></a></span> <br /> <span class="manual-section-number">3</span> <span class="manual-section-title">Native low-level level parser functions.</span></td></tr> <tr><td colspan="4" class="manual-section-description">The top level parser functions in this section deliver specialized low level parse trees (in some ad hoc list structure).</td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="parse-xml-file"></a> parse-xml-file</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(parse-xml-file in-file-path out-file-path)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Top level parse function which takes an XML file name as input, and delivers a parse tree on out-file-path. file-path is a file path (relative or absolute) with or without an extension. The default extension is xml. The parse tree is written on the file out-file-path. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#parse-xml-file">parse-xml-file</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="parse-xml"></a> parse-xml</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(parse-xml file-path)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">This function parses a file and returns the parse tree. file-path is a file path (relative or absolute) without any extension.  </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Returns</td> <td colspan="3" class="manual-plain-returns">The parse tree in the original, low level parse tree format (a list structure)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#parse-xml">parse-xml</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="parse-xml-string"></a> parse-xml-string</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(parse-xml-string xml-string)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">This function parses a string with XML contents and returns the parse tree. xml-string is a string with xml contents </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Returns</td> <td colspan="3" class="manual-plain-returns">The parse tree in the original, low level parse tree format (a list structure)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#parse-xml-string">parse-xml-string</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr class="manual-section"><td class="manual-section" colspan="4"><a name="SECTION4"></a> <span><a href="#MANUAL-TOP"><img src="../../../images/small-up.gif" title="Manual top" alt="" border="0" /></a> <a href="#SECTION3"><img src="../../../images/small-prev.gif" title="Previous manual section" alt="" border="0" /></a> <a href="#SECTION5"><img src="../../../images/small-next.gif" title="Next manual section" alt="" border="0" /></a></span> <br /> <span class="manual-section-number">4</span> <span class="manual-section-title">AST-level parser functions.</span></td></tr> <tr><td colspan="4" class="manual-section-description">The top level parser functions in this section deliver XML-in-LAML abstract syntax trees. These trees are much more useful than the low-level parse trees delivered by the functions in the previous section.</td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="parse-xml-file-to-ast"></a> parse-xml-file-to-ast</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(parse-xml-file-to-ast in-file-path out-file-path xml-language)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Top level parse function which takes an XML file name as input, and delivers an XML-in-LAML AST on out-file-path. The AST is written on the file out-file-path. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="3">Parameters</td> <td class="manual-plain-parameter-name">in-file-path</td> <td class="manual-plain-parameter-description" colspan="2">a file path (relative or absolute) with or without an extension. The default extension is xml.</td></tr> <tr class="manual-row"><td class="manual-plain-parameter-name">out-file-path</td> <td colspan="3" class="manual-plain-parameter-description">path the output file.</td></tr> <tr class="manual-row"><td class="manual-plain-parameter-name">xml-language</td> <td colspan="3" class="manual-plain-parameter-description">the name of the XML language in LAML, to which the resulting AST belongs. A symbol.</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#parse-xml-file-to-ast">parse-xml-file-to-ast</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="parse-xml-to-ast"></a> parse-xml-to-ast</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(parse-xml-to-ast file-path xml-language)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">This function parses an XML file and returns the corresponding XML-in-LAML AST. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="2">Parameters</td> <td class="manual-plain-parameter-name">file-path</td> <td class="manual-plain-parameter-description" colspan="2">a file path (relative or absolute) without any extension. </td></tr> <tr class="manual-row"><td class="manual-plain-parameter-name">xml-language</td> <td colspan="3" class="manual-plain-parameter-description">the name of the XML language in LAML, to which the resulting AST belongs. A symbol.</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Returns</td> <td colspan="3" class="manual-plain-returns">An XML-in-LAML AST.</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#parse-xml-to-ast">parse-xml-to-ast</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="parse-xml-string-to-ast"></a> parse-xml-string-to-ast</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(parse-xml-string-to-ast xml-string xml-language)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">This function parses a string with XML contents and returns an XML-in-LAML AST. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="2">Parameters</td> <td class="manual-plain-parameter-name">xml-string</td> <td class="manual-plain-parameter-description" colspan="2">a string with xml contents.</td></tr> <tr class="manual-row"><td class="manual-plain-parameter-name">xml-language</td> <td colspan="3" class="manual-plain-parameter-description">the name of the XML language in LAML, to which the resulting AST belongs. A symbol.</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Returns</td> <td colspan="3" class="manual-plain-returns">An XML-in-LAML AST.</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#parse-xml-string-to-ast">parse-xml-string-to-ast</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="resulting-parse-tree"></a> resulting-parse-tree</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">resulting-parse-tree</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">A global varible holding the latest produced parse tree </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#resulting-parse-tree">resulting-parse-tree</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr class="manual-section"><td class="manual-section" colspan="4"><a name="SECTION5"></a> <span><a href="#MANUAL-TOP"><img src="../../../images/small-up.gif" title="Manual top" alt="" border="0" /></a> <a href="#SECTION4"><img src="../../../images/small-prev.gif" title="Previous manual section" alt="" border="0" /></a> <a href="#SECTION6"><img src="../../../images/small-next.gif" title="Next manual section" alt="" border="0" /></a></span> <br /> <span class="manual-section-number">5</span> <span class="manual-section-title">Utility parser functions.</span></td></tr> <tr><td colspan="4" class="manual-section-description"> The functions in this section are all miscelaneous and utility functions of the parser.</td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="traverse-and-collect-from-parse-tree"></a> traverse-and-collect-from-parse-tree</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(traverse-and-collect-from-parse-tree tree node-interesting? result-transformer)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Traverse the parse tree, tree, and return a list of result-transformed nodes  that satisfy the node-interesting? predicate in the parse tree. In other words, apply the node-interesting? predicate to all subtrees of the tree during the traversal, and return the result-transformed list of subtrees. Both the functions node-interesting? and result-transformer are applied on trees and subtrees. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">Examples</td> <td class="manual-plain-example" colspan="3">(traverse-and-collect-from-parse-tree resulting-parse-tree (is-tag-of-kind? &#39;a) parse-tree-to-laml-expression) </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#traverse-and-collect-from-parse-tree">traverse-and-collect-from-parse-tree</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="collect-attributes-in-tree"></a> collect-attributes-in-tree</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(collect-attributes-in-tree tree attr-key)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Traverse the parse tree, tree, and return the list all attribute values of the attribute attr-key found in the tree. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">Examples</td> <td class="manual-plain-example" colspan="3">(collect-attributes-in-tree tree &#39;href) </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#collect-attributes-in-tree">collect-attributes-in-tree</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="is-tag-of-kind?"></a> is-tag-of-kind?</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(is-tag-of-kind? tag-kind)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Return a predicate which tests whether a subtree or node is of tag-kind (a symbol or string). This function is a useful second parameter to traverse-and-collect-from-parse-tree. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="2">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#is-tag-of-kind?">is-tag-of-kind?</a></td></tr> <tr class="manual-row"><td class="manual-plain-reference-role">related function</td> <td colspan="3" class="manual-plain-reference-anchor"><a class="manual-plain-internal-reference" href="#traverse-and-collect-from-parse-tree">traverse-and-collect-from-parse-tree</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="parser-status"></a> parser-status</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(parser-status)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Display parser status in case of error in the parse process. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#parser-status">parser-status</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr class="manual-section"><td class="manual-section" colspan="4"><a name="SECTION6"></a> <span><a href="#MANUAL-TOP"><img src="../../../images/small-up.gif" title="Manual top" alt="" border="0" /></a> <a href="#SECTION5"><img src="../../../images/small-prev.gif" title="Previous manual section" alt="" border="0" /></a> <a href="#SECTION7"><img src="../../../images/small-next.gif" title="Next manual section" alt="" border="0" /></a></span> <br /> <span class="manual-section-number">6</span> <span class="manual-section-title">Top level XML pretty printing functions.</span></td></tr> <tr><td colspan="4" class="manual-section-description"></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="pretty-print-xml-parse-tree-file"></a> pretty-print-xml-parse-tree-file</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(pretty-print-xml-parse-tree-file in-file-path [out-file-path])</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Pretty prints the XML parse tree (Lisp file) in in-file-path. Outputs the pretty printed result in out-file-path, which defaults to in-file-path if not explicitly passed. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#pretty-print-xml-parse-tree-file">pretty-print-xml-parse-tree-file</a></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Note</td> <td colspan="3" class="manual-plain-misc">For XML-in-LAML ASTs use pretty-render-to-output-port instead of this function</td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="pretty-print-xml-parse-tree"></a> pretty-print-xml-parse-tree</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(pretty-print-xml-parse-tree parse-tree)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Pretty prints a HTML parse tree, and return the result as a string. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#pretty-print-xml-parse-tree">pretty-print-xml-parse-tree</a></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Note</td> <td colspan="3" class="manual-plain-misc">For XML-in-LAML ASTs use pretty-xml-render instead of this function</td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr class="manual-section"><td class="manual-section" colspan="4"><a name="SECTION7"></a> <span><a href="#MANUAL-TOP"><img src="../../../images/small-up.gif" title="Manual top" alt="" border="0" /></a> <a href="#SECTION6"><img src="../../../images/small-prev.gif" title="Previous manual section" alt="" border="0" /></a> <a href="#SECTION8"><img src="../../../images/small-next.gif" title="Next manual section" alt="" border="0" /></a></span> <br /> <span class="manual-section-number">7</span> <span class="manual-section-title">Variables that control the pretty printing.</span></td></tr> <tr><td colspan="4" class="manual-section-description">These variables apply for both HTML and XML.</td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="indentation-delta"></a> indentation-delta</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">indentation-delta</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">An integer which gives the level of indentation </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#indentation-delta">indentation-delta</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="use-single-lining"></a> use-single-lining</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">use-single-lining</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">A boolean which controls the application of single line pretty printing. If true, the pretty printer will pretty print short list forms on a single line </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#use-single-lining">use-single-lining</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="prefered-maximum-width"></a> prefered-maximum-width</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">prefered-maximum-width</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">An integer that expresses the preferred maximum column width </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#prefered-maximum-width">prefered-maximum-width</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr class="manual-section"><td class="manual-section" colspan="4"><a name="SECTION8"></a> <span><a href="#MANUAL-TOP"><img src="../../../images/small-up.gif" title="Manual top" alt="" border="0" /></a> <a href="#SECTION7"><img src="../../../images/small-prev.gif" title="Previous manual section" alt="" border="0" /></a> <img src="../../../images/small-next-blind.gif" title="" alt="" border="0" /></span> <br /> <span class="manual-section-number">8</span> <span class="manual-section-title">Parse tree conversions.</span></td></tr> <tr><td colspan="4" class="manual-section-description">In this section we provide a number of conversion functions that work on parse trees.</td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="parse-tree-to-laml"></a> parse-tree-to-laml</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(parse-tree-to-laml tree output-file)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Transform an XML or HTML parse tree to a similar surface LAML expression on output-file.  This function accept parse tree rooted by the symbols html-tree, xml-tree, as well the symbol tree. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="2">Parameters</td> <td class="manual-plain-parameter-name">tree</td> <td class="manual-plain-parameter-description" colspan="2">an XML or HTML parse tree</td></tr> <tr class="manual-row"><td class="manual-plain-parameter-name">output-file</td> <td colspan="3" class="manual-plain-parameter-description">The name of the file on which to write the LAML expression. Can be full path. Must include extension.</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="2">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#parse-tree-to-laml">parse-tree-to-laml</a></td></tr> <tr class="manual-row"><td class="manual-plain-reference-role">laml.scm function</td> <td colspan="3" class="manual-plain-reference-anchor"><a class="manual-plain-external-reference" href="../../../man/laml.html#html-to-laml">html-to-laml</a></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Note</td> <td colspan="3" class="manual-plain-misc">When the resulting file is LAML processed, the LAML file will write the a LAML file, say f.laml, to f.html in the same directory as the laml file.</td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="parse-tree-to-ast"></a> parse-tree-to-ast</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(parse-tree-to-ast pt language)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Convert a HTML/XML parse tree to a LAML abstract syntax tree in language. The returned LAML abstract syntax tree will have positive spacing (which means that a white space is represented explicitly by the #t value). This function accept parse tree rooted by the symbols html-tree, xml-tree, as well the symbol tree. Recall that the syntax trees are used as the internal format by the validating mirrors of LAML. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="2">Parameters</td> <td class="manual-plain-parameter-name">pt</td> <td class="manual-plain-parameter-description" colspan="2">The parse tree</td></tr> <tr class="manual-row"><td class="manual-plain-parameter-name">language</td> <td colspan="3" class="manual-plain-parameter-description">The name of the XML language, such as xhtml10-transitional. A symbol.</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="2">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#parse-tree-to-ast">parse-tree-to-ast</a></td></tr> <tr class="manual-row"><td class="manual-plain-reference-role">related function</td> <td colspan="3" class="manual-plain-reference-anchor"><a class="manual-plain-internal-reference" href="#parse-tree-to-element-structure">parse-tree-to-element-structure</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="parse-tree-to-element-structure"></a> parse-tree-to-element-structure</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(parse-tree-to-element-structure pt)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Convert a HTML/XML parse tree to an element structure ala LENO. This function accept parse tree rooted by the symbols html-tree, xml-tree, as well the symbol tree. Modelled after parse-tree-to-ast. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="2">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="xml-support-ep/xml-support-1.html#parse-tree-to-element-structure">parse-tree-to-element-structure</a></td></tr> <tr class="manual-row"><td class="manual-plain-reference-role">related function</td> <td colspan="3" class="manual-plain-reference-anchor"><a class="manual-plain-internal-reference" href="#parse-tree-to-ast">parse-tree-to-ast</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr></table> <div class="manual-end-remark">Generated: Monday, November 14, 2011, 09:19:50 <br /> Generated by LAML <a href="http://www.cs.aau.dk/~normark/schemedoc/index.html" style="color:inherit;">SchemeDoc</a> using LAML Version 38.0 (November 14, 2011, full) <br /> </div> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p></body></html>