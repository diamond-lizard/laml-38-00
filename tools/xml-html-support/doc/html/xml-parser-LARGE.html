<!-- Generated from an LAML (Lisp Abstracted Markup Language) source file. Version 30.2 (January 20, 2006, full, alpha). LAML is designed and implemented by Kurt Nørmark, normark@cs.auc.dk. Time of generation: January 21, 2006 16:32:04-->

<html><head><title>Source file</title></head><body bgcolor = "#ffffff" text = "#000000" link = "#000000" vlink = "#000000" ><font size = "3"  ><pre><font color = "#70a800">; The LAML library and programs are written by Kurt Normark, Aalborg University, Denmark.
; Copyright (C) 1999  Kurt Normark, normark@s.auc.dk.
;
; This program is free software; you can redistribute it and/or modify
; it under the terms of the GNU General Public License as published by
; the Free Software Foundation; either version 2 of the License, or
; (at your option) any later version.
;
; This program is distributed in the hope that it will be useful,
; but WITHOUT ANY WARRANTY; without even the implied warranty of
; MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
; GNU General Public License for more details.
;
; You should have received a copy of the GNU General Public License
; along with this program; if not, write to the Free Software
; Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</font>

<font color = "#70a800">;;;; This is a simple, non-validating XML parser for LAML together with XML pretty printing support.
;;;; As of the current version, the parser is not complete. Nevertheless, it is useful tool for parsing most
;;;; everyday XML documents to a Lisp data structure. &lt;p&gt; Given a well-formed XML document
;;;; this parser returns a Lisp tree structure that represents the parse tree of the XML document.
;;;; The parser handles start tags, end tags, and empty tags (in this parser called start-end tags).
;;;; Entities and their declarations are not handled at all.&lt;p&gt;
;;;; The top level functions are xml-parse and xml-parse-file. The xml-parser can be loaded as a library as well.&lt;p&gt;
;;;; There exists &lt;a href="../doc/xml-parser.html" target="_top"&gt;elucidative documentation&lt;/a&gt; of this parser.
;;;; See also &lt;a href="html-support.html"&gt;the HTML parsing and pretty printing support&lt;/a&gt;, which is
;;;; built on top of the XML tools, and the illustrative 
;;;; &lt;a href="../../../examples/xml-parser-and-pretty-printer/index.html"&gt;examples &lt;/a&gt; 
;;;; of the XML parser and pretty printer.&lt;p&gt;
;;;; This tool assumes that &lt;kbd&gt; laml.scm &lt;/kbd&gt; and the general library are loaded. 
;;;; The tool loads the collect-skip and the file-read libraries.&lt;p&gt;
;;;; The typographical rebreaking and re-indenting of running text is still missing.&lt;p&gt;
;;;; The LAML interactive tool procedures &lt;kbd&gt; xml-pp &lt;/kbd&gt; and &lt;kbd&gt; xml-parse &lt;/kbd&gt;
;;;; in &lt;kbd&gt; laml.scm &lt;/kbd&gt; are convenient top-level pretty printing and parse procedures respectively.&lt;p&gt;
;;;; Please notice that this is not a production quality parser and pretty printer! It is currently used for
;;;; internal purposes.&lt;p&gt;
;;;; From LAML version 20, the XML pretty printing in lib/xml-in-laml/xml-in-laml.scm replaces the XML pretty printing
;;;; in this library.
;;;; .title Reference Manual of the XML parser and pretty printer for LAML</font>

(lib-load "collect-skip.scm")
(lib-load "file-read.scm")


<font color = "#70a800">;;; The format of the parse tree.
;;; A &lt;em&gt;parse tree&lt;/em&gt; T  produced by this tool is of the form
;;; &lt;pre&gt;    (tree N ST1 ST2 ... STn) &lt;/pre&gt;
;;; where STi, i=1..n are parse trees (recursively) and N is a node (see below). &lt;p&gt;
;;; A leaf node N may be of the form
;;; &lt;pre&gt;    (tree N) &lt;/pre&gt;
;;; or just N if N is a string (corresponding to textual contents) or an empty tag (a tag without contents).&lt;p&gt;
;;; An &lt;em&gt;inner node&lt;/em&gt; of a parse tree corresponds to a tag (an element) with contents. Such a node is represented
;;; by the following 'tag structure':
;;; &lt;pre&gt;    (tag kind tag-name . attr-info) &lt;/pre&gt;
;;; tag is a symbol (for tagging). kind is either start or start-end (both symbols).
;;; tag-name is a string. Attr-info is the attribute on property list format.&lt;p&gt;
;;; A &lt;em&gt;terminal node&lt;/em&gt; may be a start-end node, a comment node or just a contents string. End tags are not represented 
;;; in the parse tree.&lt;p&gt;
;;; Here is an example of a start-end node (empty node) with two properties:
;;; &lt;pre&gt;    (tag start-end "title" role "xxx" size "5") &lt;/pre&gt;
;;; Comments are represented as comment nodes of the form
;;; &lt;pre&gt;    (comment comment-string) &lt;/pre&gt; &lt;p&gt;
;;; Declaration nodes of the form
;;; &lt;pre&gt;    (declaration kind value) &lt;/pre&gt;
;;; are also possible. They are for instance used for document type (???) information in HTML. Finally nodes of the form
;;; &lt;pre&gt;    (xml-declaration attribute-property-list) &lt;/pre&gt;
;;; are supported.</font>

<a name="parse-error"><font color = "#70a800">; ---------------------------------------------------------------------------------------------------
; Parse specific error and message funtions.</font>
<a name="parse-error"><a href = "xml-parser.html#parse-error"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-error" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-error to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-error . x)</font></b>
  (display-message (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> "PARSE ERROR: " (<a href = "r4rs_8.htm#IDX540" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">apply</font></a> <a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> (<a href = "r4rs_8.htm#IDX542" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">map</font></a> as-string x))))
  (<a href = "xml-parser-LARGE.html#parser-status" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parser-status</font></a>)
  (error "STOPPING THE PARSER"))


<a name="parse-message"><a href = "xml-parser.html#parse-message"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-message" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-message to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-message . x)</font></b>
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> <a href = "xml-parser-LARGE.html#xml-parse-verbose" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">xml-parse-verbose</font></a>
      (display-message (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> (<a href = "r4rs_8.htm#IDX540" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">apply</font></a> <a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> (<a href = "r4rs_8.htm#IDX542" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">map</font></a> as-string x))))))

<a name="skip-white-space"><font color = "#70a800">; ---------------------------------------------------------------------------------------------------
; Overall functions</font>
<a name="skip-white-space"><a href = "xml-parser.html#skip-white-space"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-s.html#skip-white-space" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from skip-white-space to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#front-and-white" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "1.2. Handling white space, comments, and front matters." border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(skip-white-space)</font></b>
  (<a href = "collect-skip-LARGE.html#skip-while" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">skip-while</font></a> <a href = "collect-skip-LARGE.html#is-white-space?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">is-white-space?</font></a>))

<a name="skip-white-space-and-comments"><font color = "#70a800">; Skip white space and XML comments</font><a name="skip-white-space-and-comments"><a href = "xml-parser.html#skip-white-space-and-comments"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-s.html#skip-white-space-and-comments" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from skip-white-space-and-comments to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#front-and-white" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "1.2. Handling white space, comments, and front matters." border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(skip-white-space-and-comments)</font></b>
  (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
  (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> 4)
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> <a href = "collect-skip-LARGE.html#end-of-file?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">end-of-file?</font></a>) (<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "&lt;!--"))
      (<a href = "r4rs_6.htm#IDX117" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>begin</b></a> 
        (<a href = "xml-parser-LARGE.html#parse-message" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-message</font></a> "Skipping comment")
        (<a href = "collect-skip-LARGE.html#read-a-string" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-string</font></a> 4)
        (<a href = "collect-skip-LARGE.html#skip-until-string" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">skip-until-string</font></a> "--&gt;" #t)
        (<a href = "xml-parser-LARGE.html#skip-white-space-and-comments" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space-and-comments</font></a>))))


<font color = "#70a800">; ---------------------------------------------------------------------------------------------------</font><font color = "#70a800">;;; Native low-level level parser functions.
;;; The top level parser functions in this section deliver specialized low level parse trees (in some ad hoc list structure).</font>
<a name="parse-xml-file"><font color = "#70a800">;; Top level parse function which takes an XML file name as input, and delivers a parse tree on out-file-path.
;; file-path is a file path (relative or absolute) with or without an extension. The default extension is xml.
;; The parse tree is written on the file out-file-path.</font><a name="parse-xml-file"><a href = "xml-parser.html#parse-xml-file"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-xml-file" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-xml-file to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#start-entry" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "1.1. The start" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-xml-file in-file-path out-file-path)</font></b>
 (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((init-in-path (file-name-initial-path in-file-path))
       (in-file-name-prop (file-name-proper in-file-path))
       (in-ext (file-name-extension in-file-path))
      )
   (<a href = "xml-parser-LARGE.html#reset-xml-parser" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">reset-xml-parser</font></a>)
   (<a href = "r4rs_6.htm#IDX107" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let*</b></a> ((input-port (<a href = "r4rs_8.htm#IDX595" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">open-input-file</font></a> (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> init-in-path in-file-name-prop "." (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (empty-string? in-ext) "xml" in-ext)))))
      (<a href = "r4rs_6.htm#SEC32" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>set!</b></a> <a href = "collect-skip-LARGE.html#ip" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ip</font></a> input-port)
      (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((parse-tree (<a href = "xml-parser-LARGE.html#parse-xml-ip" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-xml-ip</font></a>))
            (target-file-name out-file-path))
       (<a href = "r4rs_6.htm#SEC32" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>set!</b></a> <a href = "xml-parser-LARGE.html#resulting-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">resulting-parse-tree</font></a> parse-tree)
       (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (file-exists? target-file-name) (delete-file target-file-name))
       (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((op (<a href = "r4rs_8.htm#IDX596" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">open-output-file</font></a> target-file-name)))
         (<a href = "r4rs_8.htm#IDX626" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">write</font></a> parse-tree op)
         (<a href = "r4rs_8.htm#IDX598" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">close-output-port</font></a> op)))

      (display-message (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> "DONE. The parse tree is in " out-file-path))
      (display-message "Use (scheme-pp &lt;file&gt;) to pretty pring the parse tree.")
      (display-message "The result is also in the variable resulting-parse-tree for interactive use.")
      (<a href = "r4rs_8.htm#IDX597" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">close-input-port</font></a> <a href = "collect-skip-LARGE.html#ip" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ip</font></a>))))

<a name="parse-xml"><font color = "#70a800">;; This function parses a file and returns the parse tree.
;; file-path is a file path (relative or absolute) without any extension. 
;; .returns The parse tree in the original, low level parse tree format (a list structure)</font><a name="parse-xml"><a href = "xml-parser.html#parse-xml"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-xml" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-xml to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#start-entry" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "1.1. The start" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-xml file-path)</font></b>
 (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((init-path (file-name-initial-path file-path))
       (file-name-prop (file-name-proper file-path))
       (ext (file-name-extension file-path))
      )
   (<a href = "xml-parser-LARGE.html#reset-xml-parser" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">reset-xml-parser</font></a>)
   (<a href = "r4rs_6.htm#IDX107" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let*</b></a> ((input-port (<a href = "r4rs_8.htm#IDX595" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">open-input-file</font></a> (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> init-path file-name-prop "." (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (empty-string? ext) "xml" ext)))))
      (<a href = "r4rs_6.htm#SEC32" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>set!</b></a> <a href = "collect-skip-LARGE.html#ip" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ip</font></a> input-port)
      (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((parse-tree (<a href = "xml-parser-LARGE.html#parse-xml-ip" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-xml-ip</font></a>)))
        (<a href = "r4rs_8.htm#IDX597" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">close-input-port</font></a> <a href = "collect-skip-LARGE.html#ip" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ip</font></a>)
        parse-tree))))

<a name="parse-xml-string"><font color = "#70a800">;; This function parses a string with XML contents and returns the parse tree.
;; xml-string is a string with xml contents
;; .returns The parse tree in the original, low level parse tree format (a list structure)</font><a name="parse-xml-string"><a href = "xml-parser.html#parse-xml-string"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-xml-string" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-xml-string to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-xml-string xml-string)</font></b>
   (<a href = "xml-parser-LARGE.html#reset-xml-parser" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">reset-xml-parser</font></a>)
   (<a href = "r4rs_6.htm#SEC32" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>set!</b></a> <a href = "collect-skip-LARGE.html#ip" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ip</font></a> xml-string)
   (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((parse-tree (<a href = "xml-parser-LARGE.html#parse-xml-ip" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-xml-ip</font></a>)))
     parse-tree))


<a name="reset-xml-parser"><a href = "xml-parser.html#reset-xml-parser"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#reset-xml-parser" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from reset-xml-parser to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(reset-xml-parser)</font></b>
  (<a href = "collect-skip-LARGE.html#reset-look-ahead-buffer" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">reset-look-ahead-buffer</font></a>)
  (<a href = "r4rs_6.htm#SEC32" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>set!</b></a> <a href = "xml-parser-LARGE.html#parse-stack" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack</font></a> '()))


<font color = "#70a800">; ---------------------------------------------------------------------------------------------------</font><font color = "#70a800">;;; AST-level parser functions.
;;; The top level parser functions in this section deliver XML-in-LAML abstract syntax trees.
;;; These trees are much more useful than the low-level parse trees delivered by the functions in the previous section.</font>
<a name="parse-xml-file-to-ast"><font color = "#70a800">;; Top level parse function which takes an XML file name as input, and delivers an XML-in-LAML AST on out-file-path.
;; The AST is written on the file out-file-path.
;; .parameter in-file-path a file path (relative or absolute) with or without an extension. The default extension is xml.
;; .parameter out-file-path path the output file.
;; .parameter xml-language the name of the XML language in LAML, to which the resulting AST belongs. A symbol.</font><a name="parse-xml-file-to-ast"><a href = "xml-parser.html#parse-xml-file-to-ast"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-xml-file-to-ast" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-xml-file-to-ast to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-xml-file-to-ast in-file-path out-file-path xml-language)</font></b>
 (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((init-in-path (file-name-initial-path in-file-path))
       (in-file-name-prop (file-name-proper in-file-path))
       (in-ext (file-name-extension in-file-path))
      )
   (<a href = "xml-parser-LARGE.html#reset-xml-parser" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">reset-xml-parser</font></a>)
   (<a href = "r4rs_6.htm#IDX107" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let*</b></a> ((input-port (<a href = "r4rs_8.htm#IDX595" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">open-input-file</font></a> (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> init-in-path in-file-name-prop "." (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (empty-string? in-ext) "xml" in-ext)))))
      (<a href = "r4rs_6.htm#SEC32" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>set!</b></a> <a href = "collect-skip-LARGE.html#ip" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ip</font></a> input-port)
      (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((parse-tree (<a href = "xml-parser-LARGE.html#parse-tree-to-ast" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree-to-ast</font></a> (<a href = "xml-parser-LARGE.html#parse-xml-ip" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-xml-ip</font></a>) xml-language))
            (target-file-name out-file-path))
       (<a href = "r4rs_6.htm#SEC32" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>set!</b></a> <a href = "xml-parser-LARGE.html#resulting-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">resulting-parse-tree</font></a> parse-tree)
       (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (file-exists? target-file-name) (delete-file target-file-name))
       (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((op (<a href = "r4rs_8.htm#IDX596" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">open-output-file</font></a> target-file-name)))
         (<a href = "r4rs_8.htm#IDX626" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">write</font></a> parse-tree op)
         (<a href = "r4rs_8.htm#IDX598" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">close-output-port</font></a> op)))

      (display-message (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> "DONE. The XML-in-LAML AST is in " out-file-path))
      (display-message "The result is also in the variable resulting-parse-tree for interactive use.")
      (<a href = "r4rs_8.htm#IDX597" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">close-input-port</font></a> <a href = "collect-skip-LARGE.html#ip" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ip</font></a>))))

<a name="parse-xml-to-ast"><font color = "#70a800">;; This function parses an XML file and returns the corresponding XML-in-LAML AST.
;; .parameter file-path a file path (relative or absolute) without any extension. 
;; .parameter xml-language the name of the XML language in LAML, to which the resulting AST belongs. A symbol.
;; .returns An XML-in-LAML AST.</font><a name="parse-xml-to-ast"><a href = "xml-parser.html#parse-xml-to-ast"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-xml-to-ast" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-xml-to-ast to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-xml-to-ast file-path xml-language)</font></b>
 (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((init-path (file-name-initial-path file-path))
       (file-name-prop (file-name-proper file-path))
       (ext (file-name-extension file-path))
      )
   (<a href = "xml-parser-LARGE.html#reset-xml-parser" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">reset-xml-parser</font></a>)
   (<a href = "r4rs_6.htm#IDX107" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let*</b></a> ((input-port (<a href = "r4rs_8.htm#IDX595" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">open-input-file</font></a> (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> init-path file-name-prop "." (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (empty-string? ext) "xml" ext)))))
      (<a href = "r4rs_6.htm#SEC32" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>set!</b></a> <a href = "collect-skip-LARGE.html#ip" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ip</font></a> input-port)
      (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((parse-tree (<a href = "xml-parser-LARGE.html#parse-tree-to-ast" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree-to-ast</font></a> (<a href = "xml-parser-LARGE.html#parse-xml-ip" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-xml-ip</font></a>) xml-language)))
        (<a href = "r4rs_8.htm#IDX597" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">close-input-port</font></a> <a href = "collect-skip-LARGE.html#ip" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ip</font></a>)
        parse-tree))))

<a name="parse-xml-string-to-ast"><font color = "#70a800">;; This function parses a string with XML contents and returns an XML-in-LAML AST.
;; .parameter xml-string a string with xml contents.
;; .parameter xml-language the name of the XML language in LAML, to which the resulting AST belongs. A symbol.
;; .returns An XML-in-LAML AST.</font><a name="parse-xml-string-to-ast"><a href = "xml-parser.html#parse-xml-string-to-ast"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-xml-string-to-ast" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-xml-string-to-ast to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-xml-string-to-ast xml-string xml-language)</font></b>
   (<a href = "xml-parser-LARGE.html#reset-xml-parser" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">reset-xml-parser</font></a>)
   (<a href = "r4rs_6.htm#SEC32" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>set!</b></a> <a href = "collect-skip-LARGE.html#ip" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ip</font></a> xml-string)
   (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((parse-tree (<a href = "xml-parser-LARGE.html#parse-tree-to-ast" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree-to-ast</font></a> (<a href = "xml-parser-LARGE.html#parse-xml-ip" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-xml-ip</font></a>) xml-language)))
     parse-tree))


<a name="xml-parse-verbose"><font color = "#70a800">; ---------------------------------------------------------------------------------------------------
;::parse-stack::
; Parse state: the parse stack</font>
<a name="xml-parse-verbose"><a href = "xml-parser.html#xml-parse-verbose"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-x.html#xml-parse-verbose" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from xml-parse-verbose to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >xml-parse-verbose</font></b> #f)

<a name="parse-stack"><a href = "xml-parser.html#parse-stack"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-stack" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-stack to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#start-entry" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "1.1. The start" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >parse-stack</font></b> '())

<a name="parse-stack-push"><a href = "xml-parser.html#parse-stack-push"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-stack-push" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-stack-push to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-stack-push x)</font></b>
  (<a href = "r4rs_6.htm#SEC32" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>set!</b></a> <a href = "xml-parser-LARGE.html#parse-stack" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack</font></a> (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> x <a href = "xml-parser-LARGE.html#parse-stack" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack</font></a>)))

<a name="parse-stack-pop"><a href = "xml-parser.html#parse-stack-pop"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-stack-pop" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-stack-pop to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-stack-pop)</font></b>
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> (<a href = "xml-parser-LARGE.html#parse-stack-empty?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack-empty?</font></a>))
      (<a href = "r4rs_6.htm#SEC32" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>set!</b></a> <a href = "xml-parser-LARGE.html#parse-stack" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack</font></a> (<a href = "r4rs_8.htm#IDX249" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cdr</font></a> <a href = "xml-parser-LARGE.html#parse-stack" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack</font></a>))
      (<a href = "xml-parser-LARGE.html#parse-error" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-error</font></a> (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> "Trying to pop an empty parse stack"))))

<a name="parse-stack-top"><a href = "xml-parser.html#parse-stack-top"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-stack-top" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-stack-top to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-stack-top)</font></b>
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> (<a href = "xml-parser-LARGE.html#parse-stack-empty?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack-empty?</font></a>))
      (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> <a href = "xml-parser-LARGE.html#parse-stack" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack</font></a>)
      (<a href = "xml-parser-LARGE.html#parse-error" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-error</font></a> (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> "Trying to access the top of an empty parse stack"))))

<a name="parse-stack-empty?"><a href = "xml-parser.html#parse-stack-empty?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-stack-empty?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-stack-empty? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-stack-empty?)</font></b>
  (<a href = "r4rs_8.htm#IDX261" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">null?</font></a> <a href = "xml-parser-LARGE.html#parse-stack" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack</font></a>))

<a name="parse-stack-but-top"><a href = "xml-parser.html#parse-stack-but-top"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-stack-but-top" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-stack-but-top to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-stack-but-top)</font></b>
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> (<a href = "xml-parser-LARGE.html#parse-stack-empty?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack-empty?</font></a>))
      (<a href = "r4rs_8.htm#IDX249" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cdr</font></a> <a href = "xml-parser-LARGE.html#parse-stack" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack</font></a>)
      (<a href = "xml-parser-LARGE.html#parse-error" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-error</font></a> (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> "Trying to access the top of an empty parse stack"))))

<a name="parse-stack-top-and-pop"><a href = "xml-parser.html#parse-stack-top-and-pop"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-stack-top-and-pop" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-stack-top-and-pop to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-stack-top-and-pop)</font></b>
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> (<a href = "xml-parser-LARGE.html#parse-stack-empty?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack-empty?</font></a>))
      (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((res (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> <a href = "xml-parser-LARGE.html#parse-stack" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack</font></a>)))
        (<a href = "r4rs_6.htm#SEC32" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>set!</b></a> <a href = "xml-parser-LARGE.html#parse-stack" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack</font></a> (<a href = "r4rs_8.htm#IDX249" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cdr</font></a> <a href = "xml-parser-LARGE.html#parse-stack" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack</font></a>))
        res
      )
      (<a href = "xml-parser-LARGE.html#parse-error" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-error</font></a> (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> "Trying to access the top of an empty parse stack"))))

<a name="parse-stack-bottom"><a href = "xml-parser.html#parse-stack-bottom"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-stack-bottom" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-stack-bottom to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-stack-bottom)</font></b>
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> (<a href = "xml-parser-LARGE.html#parse-stack-empty?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack-empty?</font></a>))
      (last <a href = "xml-parser-LARGE.html#parse-stack" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack</font></a>)
      (<a href = "xml-parser-LARGE.html#parse-error" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-error</font></a> (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> "Trying to access the bottom of an empty parse stack"))))


<a name="make-tag-structure"><font color = "#70a800">; ---------------------------------------------------------------------------------------------------
; Tag structure and comment structure functions</font>
<a name="make-tag-structure"><a href = "xml-parser.html#make-tag-structure"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-m.html#make-tag-structure" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from make-tag-structure to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#tree-structure" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "1.3. The parse tree" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(make-tag-structure kind tag-name attribute-property-list)</font></b>
  (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> 'tag (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> kind (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> tag-name attribute-property-list))))

<a name="kind-of-tag-structure"><a href = "xml-parser.html#kind-of-tag-structure"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-k.html#kind-of-tag-structure" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from kind-of-tag-structure to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#tree-structure" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "1.3. The parse tree" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(kind-of-tag-structure tag-structure)</font></b>
  (as-symbol (<a href = "r4rs_8.htm#IDX256" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cadr</font></a> tag-structure)))

<a name="tag-of-tag-structure"><a href = "xml-parser.html#tag-of-tag-structure"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-t.html#tag-of-tag-structure" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from tag-of-tag-structure to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#tree-structure" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "1.3. The parse tree" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(tag-of-tag-structure tag-structure)</font></b>
  (as-string (<a href = "r4rs_8.htm#IDX254" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">caddr</font></a> tag-structure)))

<a name="attributes-of-tag-structure"><a href = "xml-parser.html#attributes-of-tag-structure"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-a.html#attributes-of-tag-structure" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from attributes-of-tag-structure to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#tree-structure" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "1.3. The parse tree" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(attributes-of-tag-structure tag-structure)</font></b>
  (<a href = "r4rs_8.htm#IDX254" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cdddr</font></a> tag-structure))

<a name="attribute-value"><font color = "#70a800">; Return the attribute value of attribute-key (a symbol) in attribute-list.
; If attribute does not exist, return #f.</font><a name="attribute-value"><a href = "xml-parser.html#attribute-value"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-a.html#attribute-value" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from attribute-value to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(attribute-value attribute-key attribute-list)</font></b>
 (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((a-list (propertylist-to-alist attribute-list)))
   (defaulted-get attribute-key a-list #f)))
  
<a name="make-comment-structure"><a href = "xml-parser.html#make-comment-structure"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-m.html#make-comment-structure" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from make-comment-structure to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(make-comment-structure comment-string)</font></b>
  (<a href = "r4rs_8.htm#IDX265" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list</font></a> 'comment comment-string))

<a name="make-processing-instruction-structure"><a href = "xml-parser.html#make-processing-instruction-structure"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-m.html#make-processing-instruction-structure" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from make-processing-instruction-structure to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(make-processing-instruction-structure pi-two-element-list)</font></b>
  (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> 'processing-instruction pi-two-element-list))

<a name="make-declaration-structure"><a href = "xml-parser.html#make-declaration-structure"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-m.html#make-declaration-structure" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from make-declaration-structure to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(make-declaration-structure kind val)</font></b>
  (<a href = "r4rs_8.htm#IDX265" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list</font></a> 'declaration kind val))

<a name="make-xml-declaration-structure"><a href = "xml-parser.html#make-xml-declaration-structure"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-m.html#make-xml-declaration-structure" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from make-xml-declaration-structure to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(make-xml-declaration-structure attribute-plist)</font></b>
  (<a href = "r4rs_8.htm#IDX265" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list</font></a> 'xml-declaration attribute-plist))

<a name="comment-of-comment-structure"><a href = "xml-parser.html#comment-of-comment-structure"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-c.html#comment-of-comment-structure" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from comment-of-comment-structure to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(comment-of-comment-structure node)</font></b>
  (<a href = "r4rs_8.htm#IDX256" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cadr</font></a> node))

<a name="kind-of-declaration-structure"><a href = "xml-parser.html#kind-of-declaration-structure"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-k.html#kind-of-declaration-structure" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from kind-of-declaration-structure to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(kind-of-declaration-structure node)</font></b>
  (<a href = "r4rs_8.htm#IDX256" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cadr</font></a> node))

<a name="value-of-declaration-structure"><a href = "xml-parser.html#value-of-declaration-structure"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-v.html#value-of-declaration-structure" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from value-of-declaration-structure to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(value-of-declaration-structure node)</font></b>
  (<a href = "r4rs_8.htm#IDX254" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">caddr</font></a> node))

<a name="attributes-of-xml-declaration-structure"><a href = "xml-parser.html#attributes-of-xml-declaration-structure"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-a.html#attributes-of-xml-declaration-structure" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from attributes-of-xml-declaration-structure to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(attributes-of-xml-declaration-structure node)</font></b>
  (<a href = "r4rs_8.htm#IDX256" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cadr</font></a> node))

<a name="html-tree-node?"><font color = "#70a800">; -------------------------------------------------------
; Tag structure and comment structure predicates.</font>
<a name="html-tree-node?"><a href = "xml-parser.html#html-tree-node?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-h.html#html-tree-node?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from html-tree-node? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(html-tree-node? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX264" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list?</font></a> x) (<a href = "r4rs_8.htm#IDX355" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;=</font></a> (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> x) 1) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> x) 'html-tree)))

<a name="xml-tree-node?"><a href = "xml-parser.html#xml-tree-node?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-x.html#xml-tree-node?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from xml-tree-node? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(xml-tree-node? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX264" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list?</font></a> x) (<a href = "r4rs_8.htm#IDX355" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;=</font></a> (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> x) 1) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> x) 'xml-tree))) 

<a name="start-node?"><a href = "xml-parser.html#start-node?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-s.html#start-node?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from start-node? to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#parse-tree-functions" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "1.4. Parse tree functions" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(start-node? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX264" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list?</font></a> x) (<a href = "r4rs_8.htm#IDX355" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;=</font></a> (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> x) 2) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> x) 'tag) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX256" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cadr</font></a> x) 'start)))

<a name="start-end-node?"><a href = "xml-parser.html#start-end-node?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-s.html#start-end-node?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from start-end-node? to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#parse-tree-functions" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "1.4. Parse tree functions" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(start-end-node? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX264" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list?</font></a> x) (<a href = "r4rs_8.htm#IDX355" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;=</font></a> (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> x) 2) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> x) 'tag) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX256" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cadr</font></a> x) 'start-end)))

<a name="comment-node?"><a href = "xml-parser.html#comment-node?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-c.html#comment-node?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from comment-node? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(comment-node? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX264" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list?</font></a> x) (<a href = "r4rs_8.htm#IDX351" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">=</font></a> (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> x) 2) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> x) 'comment)))

<a name="processing-instruction-node?"><a href = "xml-parser.html#processing-instruction-node?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#processing-instruction-node?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from processing-instruction-node? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(processing-instruction-node? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX264" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list?</font></a> x) (<a href = "r4rs_8.htm#IDX355" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;=</font></a> (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> x) 2) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> x) 'processing-instruction)))

<a name="declaration-node?"><a href = "xml-parser.html#declaration-node?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-d.html#declaration-node?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from declaration-node? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(declaration-node? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX264" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list?</font></a> x) (<a href = "r4rs_8.htm#IDX351" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">=</font></a> (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> x) 3) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> x) 'declaration)))

<a name="xml-declaration-node?"><a href = "xml-parser.html#xml-declaration-node?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-x.html#xml-declaration-node?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from xml-declaration-node? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(xml-declaration-node? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX264" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list?</font></a> x) (<a href = "r4rs_8.htm#IDX351" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">=</font></a> (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> x) 2) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> x) 'xml-declaration)))

<font color = "#70a800">; ---------------------------------------------------------------------------------------------------
; Parse tree functions</font>
<a name="resulting-parse-tree"><font color = "#70a800">;; A global varible holding the latest produced parse tree</font><a name="resulting-parse-tree"><a href = "xml-parser.html#resulting-parse-tree"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#resulting-parse-tree" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from resulting-parse-tree to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >resulting-parse-tree</font></b> #f)

<a name="make-parse-tree"><a href = "xml-parser.html#make-parse-tree"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-m.html#make-parse-tree" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from make-parse-tree to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#parse-tree-functions" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "1.4. Parse tree functions" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(make-parse-tree node subtree-list)</font></b>
  (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> 'tree (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> node subtree-list)))

<a name="root-of-parse-tree"><a href = "xml-parser.html#root-of-parse-tree"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#root-of-parse-tree" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from root-of-parse-tree to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#parse-tree-functions" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "1.4. Parse tree functions" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(root-of-parse-tree tree)</font></b>
  (<a href = "r4rs_8.htm#IDX256" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cadr</font></a> tree))

<a name="subtrees-of-parse-tree"><a href = "xml-parser.html#subtrees-of-parse-tree"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-s.html#subtrees-of-parse-tree" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from subtrees-of-parse-tree to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#parse-tree-functions" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "1.4. Parse tree functions" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(subtrees-of-parse-tree tree)</font></b>
  (<a href = "r4rs_8.htm#IDX254" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cddr</font></a> tree))

<a name="subtrees-of-xml-html-parse-tree"><a href = "xml-parser.html#subtrees-of-xml-html-parse-tree"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-s.html#subtrees-of-xml-html-parse-tree" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from subtrees-of-xml-html-parse-tree to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >subtrees-of-xml-html-parse-tree</font></b> <a href = "r4rs_8.htm#IDX249" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cdr</font></a>)

<a name="parse-tree?"><a href = "xml-parser.html#parse-tree?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-tree?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-tree? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-tree? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX243" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">pair?</font></a> x) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> x) 'tree)))

<a name="textual-content-node?"><a href = "xml-parser.html#textual-content-node?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-t.html#textual-content-node?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from textual-content-node? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >textual-content-node?</font></b> <a href = "r4rs_8.htm#IDX482" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string?</font></a>)

<a name="terminal-node?"><a href = "xml-parser.html#terminal-node?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-t.html#terminal-node?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from terminal-node? to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#parse-tree-functions" target = documentation-frame><img src = "./images/doc-left.gif" alt = "1.4. Parse tree functions" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(terminal-node? tree)</font></b>
  (<a href = "r4rs_6.htm#IDX96" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>or</b></a> (<a href = "r4rs_8.htm#IDX482" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string?</font></a> tree) 
      (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX264" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list?</font></a> tree) (<a href = "r4rs_8.htm#IDX351" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">=</font></a> 2 (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> tree)) (<a href = "r4rs_8.htm#IDX482" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string?</font></a> (<a href = "r4rs_8.htm#IDX256" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cadr</font></a> tree)))
      (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX264" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list?</font></a> tree) (<a href = "r4rs_8.htm#IDX351" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">=</font></a> 2 (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> tree)) (<a href = "xml-parser-LARGE.html#start-end-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">start-end-node?</font></a> (<a href = "r4rs_8.htm#IDX256" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cadr</font></a> tree)))
      (<a href = "xml-parser-LARGE.html#start-end-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">start-end-node?</font></a> tree)
      (<a href = "xml-parser-LARGE.html#comment-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">comment-node?</font></a> tree)
      (<a href = "xml-parser-LARGE.html#declaration-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">declaration-node?</font></a> tree)
      (<a href = "xml-parser-LARGE.html#xml-declaration-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">xml-declaration-node?</font></a> tree)))

<a name="inner-node?"><a href = "xml-parser.html#inner-node?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-i.html#inner-node?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from inner-node? to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#parse-tree-functions" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "1.4. Parse tree functions" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(inner-node? tree)</font></b>
  (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> (<a href = "xml-parser-LARGE.html#terminal-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">terminal-node?</font></a> tree)))

<a name="node-of-tree"><font color = "#70a800">; Return the node of a tree, which may be a contents string, a tag structure or a comment structure.</font><a name="node-of-tree"><a href = "xml-parser.html#node-of-tree"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-n.html#node-of-tree" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from node-of-tree to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(node-of-tree tree)</font></b>
 (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "xml-parser-LARGE.html#terminal-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">terminal-node?</font></a> tree)
          (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "r4rs_8.htm#IDX482" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string?</font></a> tree) tree)
                ((<a href = "xml-parser-LARGE.html#start-end-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">start-end-node?</font></a> tree) tree)
                ((<a href = "xml-parser-LARGE.html#comment-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">comment-node?</font></a> tree) tree)
                (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> (<a href = "xml-parser-LARGE.html#root-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">root-of-parse-tree</font></a> tree))))
       ((<a href = "xml-parser-LARGE.html#inner-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">inner-node?</font></a> tree)
          (<a href = "xml-parser-LARGE.html#root-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">root-of-parse-tree</font></a> tree))))

<a name="node-info"><font color = "#70a800">; Return the node contents or tag name of the node (a symbol). An ad hoc function.
; The node may have been extracted ny node-of-tree.</font><a name="node-info"><a href = "xml-parser.html#node-info"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-n.html#node-info" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from node-info to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(node-info node)</font></b>
 (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "xml-parser-LARGE.html#text-contents-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">text-contents-entry?</font></a> node) 
           (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_8.htm#IDX482" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string?</font></a> node) node (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> node)))
       ((<a href = "xml-parser-LARGE.html#tag-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-entry?</font></a> node)
           (as-symbol (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> node)))
       ((<a href = "xml-parser-LARGE.html#comment-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">comment-entry?</font></a> node)
           (<a href = "xml-parser-LARGE.html#comment-of-comment-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">comment-of-comment-structure</font></a> node))
       (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> (error "node-info: Should not happen"))))

<a name="node-attribute-info"><font color = "#70a800">; Return the attributes of a node. If there is no attributes of the node, return the empty list.</font><a name="node-attribute-info"><a href = "xml-parser.html#node-attribute-info"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-n.html#node-attribute-info" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from node-attribute-info to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(node-attribute-info node)</font></b>
 (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "xml-parser-LARGE.html#text-contents-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">text-contents-entry?</font></a> node) 
           '())
       ((<a href = "xml-parser-LARGE.html#tag-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-entry?</font></a> node)
           (<a href = "xml-parser-LARGE.html#attributes-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">attributes-of-tag-structure</font></a> node))
       (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> (error "node-attribute-inf: Should not happen"))))
 
 

<a name="tag-entry?"><font color = "#70a800">; ---------------------------------------------------------------------------------------------------
; Predicates on trees and tag structures:
; Most useful to make sense of stack entries. Can also be used to distinguish various kinds of subtrees
; of a tree from each other.</font>
<a name="tag-entry?"><a href = "xml-parser.html#tag-entry?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-t.html#tag-entry?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from tag-entry? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(tag-entry? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX264" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list?</font></a> x) (<a href = "r4rs_8.htm#IDX355" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;=</font></a> (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> x) 2) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> x) 'tag)))

<a name="comment-entry?"><a href = "xml-parser.html#comment-entry?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-c.html#comment-entry?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from comment-entry? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(comment-entry? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX264" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list?</font></a> x) (<a href = "r4rs_8.htm#IDX351" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">=</font></a> (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> x) 2) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> x) 'comment)))

<a name="declaration-entry?"><a href = "xml-parser.html#declaration-entry?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-d.html#declaration-entry?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from declaration-entry? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(declaration-entry? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX264" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list?</font></a> x) (<a href = "r4rs_8.htm#IDX351" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">=</font></a> (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> x) 3) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> x) 'declaration)))

<a name="xml-declaration-entry?"><a href = "xml-parser.html#xml-declaration-entry?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-x.html#xml-declaration-entry?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from xml-declaration-entry? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(xml-declaration-entry? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX264" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list?</font></a> x) (<a href = "r4rs_8.htm#IDX351" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">=</font></a> (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> x) 2) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> x) 'xml-declaration)))

<a name="start-tag-entry?"><a href = "xml-parser.html#start-tag-entry?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-s.html#start-tag-entry?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from start-tag-entry? to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#tree-building" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "2.4. Building the tree" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(start-tag-entry? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "xml-parser-LARGE.html#tag-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-entry?</font></a> x) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX256" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cadr</font></a> x) 'start)))

<a name="start-end-tag-entry?"><a href = "xml-parser.html#start-end-tag-entry?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-s.html#start-end-tag-entry?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from start-end-tag-entry? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(start-end-tag-entry? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "xml-parser-LARGE.html#tag-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-entry?</font></a> x) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX256" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cadr</font></a> x) 'start-end)))

<a name="tree-entry?"><a href = "xml-parser.html#tree-entry?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-t.html#tree-entry?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from tree-entry? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(tree-entry? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX264" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list?</font></a> x) (<a href = "r4rs_8.htm#IDX355" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;=</font></a> (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> x) 2) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> x) 'tree)))

<a name="text-contents-entry?"><a href = "xml-parser.html#text-contents-entry?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-t.html#text-contents-entry?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from text-contents-entry? to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#tree-building" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "2.4. Building the tree" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(text-contents-entry? x)</font></b>
  (<a href = "r4rs_6.htm#IDX96" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>or</b></a> (<a href = "r4rs_8.htm#IDX482" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string?</font></a> x) (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX264" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list?</font></a> x) (<a href = "r4rs_8.htm#IDX351" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">=</font></a> 1 (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> x)) (<a href = "r4rs_8.htm#IDX482" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string?</font></a> (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> x)))))

<a name="html-root?"><a href = "xml-parser.html#html-root?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-h.html#html-root?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from html-root? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(html-root? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX264" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list?</font></a> x) (<a href = "r4rs_8.htm#IDX355" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;=</font></a> (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> x) 1) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> x) 'html-tree)))

<a name="xml-root?"><a href = "xml-parser.html#xml-root?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-x.html#xml-root?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from xml-root? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(xml-root? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX264" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list?</font></a> x) (<a href = "r4rs_8.htm#IDX355" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;=</font></a> (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> x) 1) (<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> x) 'xml-tree)))
  


<a name="parse-xml-ip"><font color = "#70a800">; ---------------------------------------------------------------------------------------------------
; Substantial parse functions.</font>

<a name="parse-xml-ip"><a href = "xml-parser.html#parse-xml-ip"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-xml-ip" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-xml-ip to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#start-entry" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "1.1. The start" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-xml-ip)</font></b>
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> <a href = "collect-skip-LARGE.html#end-of-file?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">end-of-file?</font></a>) (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>))
  (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> <a href = "collect-skip-LARGE.html#end-of-file?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">end-of-file?</font></a> (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> (<a href = "xml-parser-LARGE.html#parse-stack-empty?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack-empty?</font></a>)) (<a href = "r4rs_8.htm#IDX355" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;=</font></a> (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> <a href = "xml-parser-LARGE.html#parse-stack" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack</font></a>) 1))
          (<a href = "xml-parser-LARGE.html#aggregate-final-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">aggregate-final-parse-tree</font></a> 'xml-tree))
        ((<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> <a href = "collect-skip-LARGE.html#end-of-file?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">end-of-file?</font></a> (<a href = "xml-parser-LARGE.html#parse-stack-empty?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack-empty?</font></a>))
          (<a href = "xml-parser-LARGE.html#make-final-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">make-final-parse-tree</font></a> 'xml-tree '()))
        ((<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> <a href = "collect-skip-LARGE.html#end-of-file?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">end-of-file?</font></a>)
          (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((next-parse-tree (<a href = "xml-parser-LARGE.html#parse-xml-balanced-expression" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-xml-balanced-expression</font></a>)))
            (<a href = "xml-parser-LARGE.html#parse-stack-push" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack-push</font></a> next-parse-tree)
            (<a href = "xml-parser-LARGE.html#parse-xml-ip" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-xml-ip</font></a>)))
        (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> (error (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> "parse-xml-ip: strange parse error.")))))


<a name="skip-front-matters"><font color = "#70a800">; Skip all XML document prefix stuff, including comments.
; As of this version, it cannot skip an inline DTD (causes parse error).</font><a name="skip-front-matters"><a href = "xml-parser.html#skip-front-matters"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-s.html#skip-front-matters" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from skip-front-matters to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#front-and-white" target = documentation-frame><img src = "./images/doc-left.gif" alt = "1.2. Handling white space, comments, and front matters." border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(skip-front-matters)</font></b>
 (<a href = "xml-parser-LARGE.html#parse-message" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-message</font></a> "Skipping front matter")
 (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
 (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> 2)
 (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "&lt;?")
          (<a href = "collect-skip-LARGE.html#read-a-string" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-string</font></a> 2)
          (<a href = "collect-skip-LARGE.html#skip-until-string" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">skip-until-string</font></a> "?&gt;" #t)
          (<a href = "xml-parser-LARGE.html#skip-front-matters" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-front-matters</font></a>))
       ((<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "&lt;!") <font color = "#70a800">; <a name="skip-front-matters-@a"><a href = "documentation.html#front-and-white-@a" target = documentation-frame><img src = "./images/source-mark-red.gif" alt = "A linked program source marker to section 1.2:
'Handling white space, comments, and front matters.'
Mark char: a" border = "0" ></a></font>         (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((comment (<a href = "collect-skip-LARGE.html#collect-balanced-until" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">collect-balanced-until</font></a> (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (ch) (<a href = "r4rs_8.htm#IDX185" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eqv?</font></a> ch #\<)) (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (ch) (<a href = "r4rs_8.htm#IDX185" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eqv?</font></a> ch #\>)))))
            'do-nothing)
         (<a href = "xml-parser-LARGE.html#skip-front-matters" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-front-matters</font></a>))))

<a name="parse-xml-balanced-expression"><a href = "xml-parser.html#parse-xml-balanced-expression"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-xml-balanced-expression" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-xml-balanced-expression to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#start-entry" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "1.1. The start" border = "0" ></a>&nbsp;<a href = "documentation.html#overall-parsing" target = documentation-frame><img src = "./images/doc-left.gif" alt = "2.1. Overall parsing functions" border = "0" ></a>&nbsp;<a href = "documentation.html#parse-balanced" target = documentation-frame><img src = "./images/doc-left.gif" alt = "2.2. Parsing a balanced XML expression." border = "0" ></a>&nbsp;<a href = "documentation.html#parse-contents" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "2.3. Parsing the contents after a start tag" border = "0" ></a>&nbsp;<a href = "documentation.html#tree-building" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "2.4. Building the tree" border = "0" ></a>&nbsp;<a href = "documentation.html#important-diff" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "3.1. Important differences" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-xml-balanced-expression)</font></b>
  (<a href = "xml-parser-LARGE.html#parse-message" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-message</font></a> "Parsing balanced expression.")
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> <a href = "collect-skip-LARGE.html#end-of-file?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">end-of-file?</font></a>) (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>))
  (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((what (<a href = "xml-parser-LARGE.html#what-is-ahead" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">what-is-ahead</font></a>))) <font color = "#70a800">; <a name="parse-xml-balanced-expression-@a"><a href = "documentation.html#parse-balanced-@a" target = documentation-frame><img src = "./images/source-mark-red.gif" alt = "A linked program source marker to section 2.2:
'Parsing a balanced XML expression.'
Mark char: a" border = "0" ></a> - looks ahead - does not read</font>    (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> what 'tag) 
            (<a href = "r4rs_6.htm#IDX107" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let*</b></a> ((tag (<a href = "xml-parser-LARGE.html#read-tag" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">read-tag</font></a>)) <font color = "#70a800">; <a name="parse-xml-balanced-expression-@b"><a href = "documentation.html#parse-balanced-@b" target = documentation-frame><img src = "./images/source-mark-green.gif" alt = "A linked program source marker to section 2.2:
'Parsing a balanced XML expression.'
Mark char: b" border = "0" ></a></font>                   (kind (<a href = "xml-parser-LARGE.html#kind-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">kind-of-tag-structure</font></a> tag)))
              (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> kind 'start) <font color = "#70a800">; <a name="parse-xml-balanced-expression-@c"><a href = "documentation.html#parse-balanced-@c" target = documentation-frame><img src = "./images/source-mark-blue.gif" alt = "A linked program source marker to section 2.2:
'Parsing a balanced XML expression.'
Mark char: c" border = "0" ></a></font>                       (<a href = "xml-parser-LARGE.html#parse-stack-push" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack-push</font></a> tag)
                       (<a href = "xml-parser-LARGE.html#read-and-push-subtrees-until-end-tag" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">read-and-push-subtrees-until-end-tag</font></a> (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> tag)) <font color = "#70a800">; consumes the end tag too</font>                       (<a href = "xml-parser-LARGE.html#build-tree-from-stack" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">build-tree-from-stack</font></a> (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> tag))  <font color = "#70a800">; return inner node</font>                    )
                    ((<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> kind 'start-end) 
                       tag  <font color = "#70a800">; return terminal node</font>                    )
                    ((<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> kind 'end) (<a href = "xml-parser-LARGE.html#parse-error" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-error</font></a> "end tag encountered without matching start tag: " (as-string tag)))
                    (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> (<a href = "xml-parser-LARGE.html#parse-error" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-error</font></a> "parse-xml-balanced-expression: unknown kind of tag"))
              )
             )
           )
           ((<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> what 'contents-string)
              (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((contents-string (<a href = "xml-parser-LARGE.html#read-contents-string" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">read-contents-string</font></a>)))
                 contents-string))
           ((<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> what 'comment)
              (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((comment-string (<a href = "xml-parser-LARGE.html#read-comment" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">read-comment</font></a>)))
                 (<a href = "xml-parser-LARGE.html#make-comment-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">make-comment-structure</font></a> comment-string)))
           ((<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> what 'processing-instruction)
              (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((pi-structure (<a href = "xml-parser-LARGE.html#read-processing-instruction" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">read-processing-instruction</font></a>)))
                 (<a href = "xml-parser-LARGE.html#make-processing-instruction-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">make-processing-instruction-structure</font></a> pi-structure)))
           ((<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> what 'declaration)
              (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((declaration-structure (<a href = "xml-parser-LARGE.html#read-declaration" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">read-declaration</font></a>)))
                 (<a href = "xml-parser-LARGE.html#make-declaration-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">make-declaration-structure</font></a> 
                        (<a href = "xml-parser-LARGE.html#kind-of-declaration-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">kind-of-declaration-structure</font></a> declaration-structure)
                        (<a href = "xml-parser-LARGE.html#value-of-declaration-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">value-of-declaration-structure</font></a> declaration-structure))))
           ((<a href = "r4rs_8.htm#IDX204" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eq?</font></a> what 'xml-declaration)
               (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((attributes (<a href = "xml-parser-LARGE.html#read-xml-declaration" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">read-xml-declaration</font></a>)))
                  (<a href = "xml-parser-LARGE.html#make-xml-declaration-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">make-xml-declaration-structure</font></a> attributes)))
           (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> (<a href = "xml-parser-LARGE.html#parse-error" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-error</font></a> "parse-xml-balanced-expression: Parse problem")))))

<a name="read-comment"><a href = "xml-parser.html#read-comment"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-comment" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from read-comment to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(read-comment)</font></b>
  (<a href = "xml-parser-LARGE.html#parse-message" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-message</font></a> "Reading comment")
  (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
  (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> 4)
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "&lt;!--")
      (<a href = "r4rs_6.htm#IDX117" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>begin</b></a>
        (<a href = "collect-skip-LARGE.html#read-a-string" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-string</font></a> 4)
        (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
        (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((res (<a href = "collect-skip-LARGE.html#collect-until-string" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">collect-until-string</font></a> "--")))
          (<a href = "collect-skip-LARGE.html#read-a-string" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-string</font></a> 2)
          (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
          (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> 1)
          (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "&gt;")
              (<a href = "collect-skip-LARGE.html#read-a-char" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-char</font></a>)
              (<a href = "xml-parser-LARGE.html#parse-error" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-error</font></a> "End of comment char '&gt;' expected"))
          res))
      (<a href = "xml-parser-LARGE.html#parse-error" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-error</font></a> "Beginning of comment '&lt;!--' expected")))

<a name="read-processing-instruction"><a href = "xml-parser.html#read-processing-instruction"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-processing-instruction" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from read-processing-instruction to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(read-processing-instruction)</font></b>
  (<a href = "xml-parser-LARGE.html#parse-message" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-message</font></a> "Reading processing instruction")
  (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
  (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> 4)
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "&lt;?")
      (<a href = "r4rs_6.htm#IDX117" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>begin</b></a>
        (<a href = "collect-skip-LARGE.html#read-a-string" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-string</font></a> 2)
        (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
        (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((pi-target (<a href = "collect-skip-LARGE.html#collect-until" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">collect-until</font></a> <a href = "collect-skip-LARGE.html#is-white-space?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">is-white-space?</font></a>)))
          (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
          (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((pi-string (<a href = "collect-skip-LARGE.html#collect-until-string" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">collect-until-string</font></a> "?&gt;")))
            (<a href = "collect-skip-LARGE.html#read-a-string" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-string</font></a> 2)
            (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
            (<a href = "r4rs_8.htm#IDX265" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list</font></a> pi-target pi-string))))
       (<a href = "xml-parser-LARGE.html#parse-error" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-error</font></a> "Beginning of processing instruction &lt;? expected")))
            


<a name="read-declaration"><a href = "xml-parser.html#read-declaration"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-declaration" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from read-declaration to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(read-declaration)</font></b> <font color = "#70a800">; such as doctype. A primitive version.</font>  (<a href = "xml-parser-LARGE.html#parse-message" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-message</font></a> "Reading declaration")
  (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
  (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> 2)
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "&lt;!")
      (<a href = "r4rs_6.htm#IDX117" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>begin</b></a>
         (<a href = "collect-skip-LARGE.html#read-a-string" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-string</font></a> 2)
         (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
         (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((kind (<a href = "collect-skip-LARGE.html#collect-until" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">collect-until</font></a> <a href = "collect-skip-LARGE.html#is-white-space?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">is-white-space?</font></a>)))
           (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
           (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((val (<a href = "collect-skip-LARGE.html#collect-until-string" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">collect-until-string</font></a> "&gt;")))
             (<a href = "collect-skip-LARGE.html#read-a-char" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-char</font></a>) <font color = "#70a800">; &gt;</font>             (<a href = "xml-parser-LARGE.html#make-declaration-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">make-declaration-structure</font></a> kind val))))
      (<a href = "xml-parser-LARGE.html#parse-error" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-error</font></a> "Beginning of decaration '&lt;!' expected")))

<a name="read-xml-declaration"><font color = "#70a800">; Return a the attribute list (property list) of an xml-declaration-structure.
; This procedures reads over the entire &lt;? ... ?&gt;  structure</font><a name="read-xml-declaration"><a href = "xml-parser.html#read-xml-declaration"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-xml-declaration" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from read-xml-declaration to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(read-xml-declaration)</font></b> <font color = "#70a800">; &lt;? ... ?&gt; </font>  (<a href = "xml-parser-LARGE.html#parse-message" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-message</font></a> "Reading xml declaration")
  (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
  (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> 5)
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "&lt;?xml")
      (<a href = "r4rs_6.htm#IDX117" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>begin</b></a>
         (<a href = "collect-skip-LARGE.html#read-a-string" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-string</font></a> 5)
         (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
         (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((attributes (<a href = "xml-parser-LARGE.html#read-tag-attributes" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">read-tag-attributes</font></a>)))
           (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
           (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> 2)
           (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "?&gt;")
               (<a href = "collect-skip-LARGE.html#read-a-string" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-string</font></a> 2)
               (<a href = "xml-parser-LARGE.html#parse-error" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-error</font></a> "?&gt; expected"))
           attributes))
      (<a href = "xml-parser-LARGE.html#parse-error" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-error</font></a> "Beginning of declaration '&lt;?xml' expected")))



<a name="what-is-ahead"><a href = "xml-parser.html#what-is-ahead"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-w.html#what-is-ahead" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from what-is-ahead to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#overall-parsing" target = documentation-frame><img src = "./images/doc-left.gif" alt = "2.1. Overall parsing functions" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(what-is-ahead)</font></b> 
  (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> 5)
  (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "&lt;!--")  'comment)
        ((<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "&lt;!") 'declaration)  <font color = "#70a800">; right concept?</font>        ((<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "&lt;?xml") 'xml-declaration)   <font color = "#70a800">; right concept?</font>        ((<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "&lt;?") 'processing-instruction)  
        ((<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "&lt;") 'tag)
        (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> 'contents-string)))

<a name="read-contents-string"><a href = "xml-parser.html#read-contents-string"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-contents-string" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from read-contents-string to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(read-contents-string)</font></b>
  (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((cont-string (<a href = "collect-skip-LARGE.html#collect-until" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">collect-until</font></a> (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (ch) (<a href = "r4rs_8.htm#IDX185" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eqv?</font></a> ch #\<)))))
    (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "xml-parser-LARGE.html#white-space-preserving-context?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">white-space-preserving-context?</font></a> <a href = "xml-parser-LARGE.html#parse-stack" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack</font></a>)
        cont-string
        (<a href = "xml-parser-LARGE.html#remove-redundant-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">remove-redundant-white-space</font></a> cont-string))))

<a name="white-space-preserving-context?"><font color = "#70a800">; In a white space preserving context, such as HTML pre, strings are not rebroken.
; In XML we should probably chose always to preserve white space.</font><a name="white-space-preserving-context?"><a href = "xml-parser.html#white-space-preserving-context?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-w.html#white-space-preserving-context?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from white-space-preserving-context? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(white-space-preserving-context? parse-stack)</font></b>
  #f)


<a name="remove-redundant-white-space"><font color = "#70a800">; remove extra white space from str by returning a truncated string. Turn extra white space in spaces. A pure function.</font><a name="remove-redundant-white-space"><a href = "xml-parser.html#remove-redundant-white-space"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#remove-redundant-white-space" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from remove-redundant-white-space to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(remove-redundant-white-space str)</font></b>
  (<a href = "xml-parser-LARGE.html#remove-redundant-white-space-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">remove-redundant-white-space-1</font></a> str "" 0 (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> str) #f))

<a name="remove-redundant-white-space-1"><a href = "xml-parser.html#remove-redundant-white-space-1"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#remove-redundant-white-space-1" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from remove-redundant-white-space-1 to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(remove-redundant-white-space-1 str res i lgt removing)</font></b>
  (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "r4rs_8.htm#IDX351" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">=</font></a> i lgt) res)
        ((<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> removing (<a href = "collect-skip-LARGE.html#is-white-space?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">is-white-space?</font></a> (<a href = "r4rs_8.htm#IDX488" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-ref</font></a> str i))) 
             (<a href = "xml-parser-LARGE.html#remove-redundant-white-space-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">remove-redundant-white-space-1</font></a> str res (<a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> i 1) lgt #t))
        ((<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> removing (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> (<a href = "collect-skip-LARGE.html#is-white-space?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">is-white-space?</font></a> (<a href = "r4rs_8.htm#IDX488" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-ref</font></a> str i)))) 
             (<a href = "xml-parser-LARGE.html#remove-redundant-white-space-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">remove-redundant-white-space-1</font></a> str (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> res (as-string (<a href = "r4rs_8.htm#IDX488" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-ref</font></a> str i)))  (<a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> i 1) lgt #f))
        ((<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> removing) (<a href = "collect-skip-LARGE.html#is-white-space?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">is-white-space?</font></a> (<a href = "r4rs_8.htm#IDX488" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-ref</font></a> str i)))
             (<a href = "xml-parser-LARGE.html#remove-redundant-white-space-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">remove-redundant-white-space-1</font></a> str (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> res (as-string #\space))  (<a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> i 1) lgt #t))
        ((<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> removing) (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> (<a href = "collect-skip-LARGE.html#is-white-space?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">is-white-space?</font></a> (<a href = "r4rs_8.htm#IDX488" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-ref</font></a> str i))))
             (<a href = "xml-parser-LARGE.html#remove-redundant-white-space-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">remove-redundant-white-space-1</font></a> str (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> res (as-string (<a href = "r4rs_8.htm#IDX488" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-ref</font></a> str i)))  (<a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> i 1) lgt #f))
        (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> (error "remove-redundant-white-space-1: should not happen"))))

<a name="read-and-push-subtrees-until-end-tag"><a href = "xml-parser.html#read-and-push-subtrees-until-end-tag"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-and-push-subtrees-until-end-tag" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from read-and-push-subtrees-until-end-tag to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#parse-balanced" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "2.2. Parsing a balanced XML expression." border = "0" ></a>&nbsp;<a href = "documentation.html#parse-contents" target = documentation-frame><img src = "./images/doc-left.gif" alt = "2.3. Parsing the contents after a start tag" border = "0" ></a>&nbsp;<a href = "documentation.html#important-diff" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "3.1. Important differences" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(read-and-push-subtrees-until-end-tag end-tag-name)</font></b>
  (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
  (<a href = "r4rs_6.htm#IDX107" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let*</b></a> ((n (<a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> end-tag-name) 3)) <font color = "#70a800">; <a name="read-and-push-subtrees-until-end-tag-@a"><a href = "documentation.html#parse-contents-@a" target = documentation-frame><img src = "./images/source-mark-red.gif" alt = "A linked program source marker to section 2.3:
'Parsing the contents after a start tag'
Mark char: a" border = "0" ></a></font>         (end-tag-string (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> (as-string #\<) (as-string #\/) end-tag-name (as-string #\>)))
        )
    (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> n)
    (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> end-tag-string) <font color = "#70a800">; <a name="read-and-push-subtrees-until-end-tag-@b"><a href = "documentation.html#parse-contents-@b" target = documentation-frame><img src = "./images/source-mark-green.gif" alt = "A linked program source marker to section 2.3:
'Parsing the contents after a start tag'
Mark char: b" border = "0" ></a></font>        (<a href = "r4rs_6.htm#IDX117" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>begin</b></a> 
          (<a href = "collect-skip-LARGE.html#read-a-string" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-string</font></a> n) <font color = "#70a800">; finish</font>          (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>))
        (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((subtree (<a href = "xml-parser-LARGE.html#parse-xml-balanced-expression" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-xml-balanced-expression</font></a>))) <font color = "#70a800">; <a name="read-and-push-subtrees-until-end-tag-@c"><a href = "documentation.html#parse-contents-@c" target = documentation-frame><img src = "./images/source-mark-blue.gif" alt = "A linked program source marker to section 2.3:
'Parsing the contents after a start tag'
Mark char: c" border = "0" ></a></font>          (<a href = "xml-parser-LARGE.html#parse-stack-push" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack-push</font></a> subtree)
          (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
          (<a href = "xml-parser-LARGE.html#read-and-push-subtrees-until-end-tag" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">read-and-push-subtrees-until-end-tag</font></a> end-tag-name) <font color = "#70a800">; tail recursive parsing of contents</font>        ))))

<a name="build-tree-from-stack"><a href = "xml-parser.html#build-tree-from-stack"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-b.html#build-tree-from-stack" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from build-tree-from-stack to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#parse-balanced" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "2.2. Parsing a balanced XML expression." border = "0" ></a>&nbsp;<a href = "documentation.html#tree-building" target = documentation-frame><img src = "./images/doc-left.gif" alt = "2.4. Building the tree" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(build-tree-from-stack end-tag-name)</font></b>
  (<a href = "xml-parser-LARGE.html#build-tree-from-stack-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">build-tree-from-stack-1</font></a> end-tag-name '()))

<a name="build-tree-from-stack-1"><a href = "xml-parser.html#build-tree-from-stack-1"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-b.html#build-tree-from-stack-1" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from build-tree-from-stack-1 to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#tree-building" target = documentation-frame><img src = "./images/doc-left.gif" alt = "2.4. Building the tree" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(build-tree-from-stack-1 tag-name tree-list)</font></b>
  (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((top (<a href = "xml-parser-LARGE.html#parse-stack-top-and-pop" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack-top-and-pop</font></a>)))
    (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "xml-parser-LARGE.html#start-tag-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">start-tag-entry?</font></a> top) (<a href = "xml-parser-LARGE.html#matches-stack-entry" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">matches-stack-entry</font></a> top tag-name))
        (<a href = "xml-parser-LARGE.html#make-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">make-parse-tree</font></a> top tree-list)
        (<a href = "xml-parser-LARGE.html#build-tree-from-stack-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">build-tree-from-stack-1</font></a> tag-name (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> top tree-list)))))

<a name="matches-stack-entry"><a href = "xml-parser.html#matches-stack-entry"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-m.html#matches-stack-entry" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from matches-stack-entry to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#tree-building" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "2.4. Building the tree" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(matches-stack-entry top-tag-structure tag-name)</font></b>
  (<a href = "r4rs_8.htm#IDX220" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">equal?</font></a> (downcase-string (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> top-tag-structure)) (downcase-string  tag-name)))



<a name="read-tag"><font color = "#70a800">; We know that we are just in front of a tag. Return a tag structure.</font><a name="read-tag"><a href = "xml-parser.html#read-tag"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-tag" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from read-tag to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#overall-parsing" target = documentation-frame><img src = "./images/doc-left.gif" alt = "2.1. Overall parsing functions" border = "0" ></a>&nbsp;<a href = "documentation.html#parse-balanced" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "2.2. Parsing a balanced XML expression." border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(read-tag)</font></b>
  (<a href = "xml-parser-LARGE.html#parse-message" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-message</font></a> "Reading tag")
  (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
  (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> 1)
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "&lt;")
      (<a href = "collect-skip-LARGE.html#read-a-char" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-char</font></a>)
      (<a href = "xml-parser-LARGE.html#parse-error" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-error</font></a> "'&lt;' expected"))
  (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> 1)
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "/") <font color = "#70a800">; end tag</font>      (<a href = "r4rs_6.htm#IDX117" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>begin</b></a> <font color = "#70a800">; <a name="read-tag-@a"><a href = "documentation.html#overall-parsing-@a" target = documentation-frame><img src = "./images/source-mark-red.gif" alt = "A linked program source marker to section 2.1:
'Overall parsing functions'
Mark char: a" border = "0" ></a></font>       (<a href = "collect-skip-LARGE.html#read-a-char" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-char</font></a>)
       (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((tag-name (<a href = "collect-skip-LARGE.html#collect-until" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">collect-until</font></a> (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (ch) (<a href = "r4rs_6.htm#IDX96" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>or</b></a> (<a href = "r4rs_8.htm#IDX185" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eqv?</font></a> ch #\>) (<a href = "collect-skip-LARGE.html#is-white-space?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">is-white-space?</font></a> ch))))))
        (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> 1)
        (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "&gt;")
            (<a href = "collect-skip-LARGE.html#read-a-char" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-char</font></a>) <font color = "#70a800">; &gt;</font>            (<a href = "xml-parser-LARGE.html#parse-error" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-error</font></a> "An end tag must not contain anything after the tag name"))
        (<a href = "xml-parser-LARGE.html#parse-message" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-message</font></a> "  " "End: " tag-name)
        (<a href = "xml-parser-LARGE.html#make-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">make-tag-structure</font></a> 'end tag-name '())))
      (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((tag-name (<a href = "collect-skip-LARGE.html#collect-until" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">collect-until</font></a> (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (ch) (<a href = "r4rs_6.htm#IDX96" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>or</b></a> (<a href = "r4rs_8.htm#IDX185" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eqv?</font></a> ch #\>) (<a href = "r4rs_8.htm#IDX185" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eqv?</font></a> ch #\/) (<a href = "collect-skip-LARGE.html#is-white-space?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">is-white-space?</font></a> ch))))))
        (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
        (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> 2) 
        <font color = "#70a800">; <a name="read-tag-@b"><a href = "documentation.html#overall-parsing-@b" target = documentation-frame><img src = "./images/source-mark-green.gif" alt = "A linked program source marker to section 2.1:
'Overall parsing functions'
Mark char: b" border = "0" ></a></font>        (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX355" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;=</font></a> (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> (<a href = "collect-skip-LARGE.html#max-look-ahead-prefix" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">max-look-ahead-prefix</font></a>)) 2) (<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "/&gt;"))  <font color = "#70a800">; <a name="read-tag-@c"><a href = "documentation.html#overall-parsing-@c" target = documentation-frame><img src = "./images/source-mark-blue.gif" alt = "A linked program source marker to section 2.1:
'Overall parsing functions'
Mark char: c" border = "0" ></a> - weird</font>               (<a href = "collect-skip-LARGE.html#read-a-string" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-string</font></a> 2)
               (<a href = "xml-parser-LARGE.html#make-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">make-tag-structure</font></a> 'start-end tag-name '()))
              ((<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX355" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;=</font></a> (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> (<a href = "collect-skip-LARGE.html#max-look-ahead-prefix" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">max-look-ahead-prefix</font></a>)) 1) (<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "&gt;"))  <font color = "#70a800">; <a name="read-tag-@d"><a href = "documentation.html#overall-parsing-@d" target = documentation-frame><img src = "./images/source-mark-black.gif" alt = "A linked program source marker to section 2.1:
'Overall parsing functions'
Mark char: d" border = "0" ></a></font>               (<a href = "collect-skip-LARGE.html#read-a-char" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-char</font></a>)
               (<a href = "xml-parser-LARGE.html#make-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">make-tag-structure</font></a> 'start tag-name '()))
              (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((attribute-list (<a href = "xml-parser-LARGE.html#read-tag-attributes" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">read-tag-attributes</font></a>))) <font color = "#70a800">; <a name="read-tag-@e"><a href = "documentation.html#overall-parsing-@e" target = documentation-frame><img src = "./images/source-mark-maroon.gif" alt = "A linked program source marker to section 2.1:
'Overall parsing functions'
Mark char: e" border = "0" ></a> - white space processes at this point</font>                      (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> 2)
                      (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX355" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;=</font></a> (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> (<a href = "collect-skip-LARGE.html#max-look-ahead-prefix" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">max-look-ahead-prefix</font></a>)) 2) (<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "/&gt;"))
                             (<a href = "collect-skip-LARGE.html#read-a-string" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-string</font></a> 2)
                             (<a href = "xml-parser-LARGE.html#parse-message" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-message</font></a> "  " "Start end: " tag-name ". Attributes: " (as-string attribute-list))
                             (<a href = "xml-parser-LARGE.html#make-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">make-tag-structure</font></a> 'start-end tag-name attribute-list))
                            ((<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX355" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;=</font></a> (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> (<a href = "collect-skip-LARGE.html#max-look-ahead-prefix" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">max-look-ahead-prefix</font></a>)) 1) (<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "&gt;"))
                             (<a href = "collect-skip-LARGE.html#read-a-char" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-char</font></a>)
                             (<a href = "xml-parser-LARGE.html#parse-message" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-message</font></a> "  " "Start: " tag-name ". Attributes: " (as-string attribute-list))
                             (<a href = "xml-parser-LARGE.html#make-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">make-tag-structure</font></a> 'start tag-name attribute-list))
                            (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> (<a href = "xml-parser-LARGE.html#parse-error" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-error</font></a> "read-tag: end of tag expected"))))
              )))))

<a name="read-tag-attributes"><font color = "#70a800">; Return attribute value pairs as a property list
; Expect that we are at the first character the first attribute name</font><a name="read-tag-attributes"><a href = "xml-parser.html#read-tag-attributes"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-tag-attributes" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from read-tag-attributes to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#overall-parsing" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "2.1. Overall parsing functions" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(read-tag-attributes)</font></b>
  (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
  (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((attr-val (<a href = "xml-parser-LARGE.html#read-attribute-value-pair" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">read-attribute-value-pair</font></a>))) <font color = "#70a800">; cons-pair or #f.</font>    (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
    (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> attr-val
        (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> 
         (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> attr-val) 
         (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> 
           (<a href = "r4rs_8.htm#IDX249" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cdr</font></a> attr-val) 
           (<a href = "xml-parser-LARGE.html#read-tag-attributes" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">read-tag-attributes</font></a>) <font color = "#70a800">; recursive reading</font>         )
        )
        '())))

<font color = "#70a800">; (define (read-attribute-value-pair)
  ; (ensure-look-ahead 2)
  ; (if (or (match-look-ahead? "/&gt;") (match-look-ahead? "?&gt;") (match-look-ahead? "&gt;"))
      ; #f
      ; (let* ((attr-name (collect-until (lambda (ch) (or (eqv? ch #\=)  (is-white-space? ch))))))
        ; (skip-white-space)
        ; (ensure-look-ahead 1)
        ; (if (match-look-ahead? "=")
            ; (begin
              ; (read-a-char)
              ; (skip-white-space))
            ; (parse-error "= expected after attribute value"))
        ; (ensure-look-ahead 1)
        ; (if (match-look-ahead? """)
            ; (begin
              ; (read-a-char)             ; reading first "
              ; (let ((value (collect-until (char-predicate #"))))
                ; (read-a-char)           ; reading second "
                ; (skip-white-space)
                ; (cons (as-symbol attr-name) value)))
            ; (parse-error "Attribute value in string quotes expected")))))</font>
<a name="read-attribute-value-pair"><font color = "#70a800">; read a single attribute value pair from the input port and return it is a cons pair.
; If no more attributes exists (we see end of tag characters) return #f.</font><a name="read-attribute-value-pair"><a href = "xml-parser.html#read-attribute-value-pair"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#read-attribute-value-pair" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from read-attribute-value-pair to it's cross reference table entry" border = "0" ></a>&nbsp;<a href = "documentation.html#overall-parsing" target = documentation-frame><img src = "./images/doc-left-weak.gif" alt = "2.1. Overall parsing functions" border = "0" ></a><br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(read-attribute-value-pair)</font></b>
  (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> 2)
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_6.htm#IDX96" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>or</b></a> (<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "/&gt;") (<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "?&gt;") (<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "&gt;"))
      #f
      (<a href = "r4rs_6.htm#IDX107" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let*</b></a> ((attr-name (<a href = "collect-skip-LARGE.html#collect-until" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">collect-until</font></a> (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (ch) (<a href = "r4rs_6.htm#IDX96" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>or</b></a> (<a href = "r4rs_8.htm#IDX185" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eqv?</font></a> ch #\=) (<a href = "r4rs_8.htm#IDX185" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eqv?</font></a> ch #\>)  (<a href = "collect-skip-LARGE.html#is-white-space?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">is-white-space?</font></a> ch))))))
        (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
        (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> 1)
        (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "=")
               (<a href = "collect-skip-LARGE.html#read-a-char" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-char</font></a>)
               (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
               (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> 1)
               (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "\"")
                         (<a href = "collect-skip-LARGE.html#read-a-char" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-char</font></a>)      <font color = "#70a800">; reading first "</font>                         (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((value (<a href = "collect-skip-LARGE.html#collect-until" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">collect-until</font></a> (<a href = "collect-skip-LARGE.html#char-predicate" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">char-predicate</font></a> #\"))))
                           (<a href = "collect-skip-LARGE.html#read-a-char" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-char</font></a>)    <font color = "#70a800">; reading second "</font>                           (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
                           (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> (as-symbol attr-name) value)))
                     ((<a href = "collect-skip-LARGE.html#match-look-ahead?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">match-look-ahead?</font></a> "'")   
                         (<a href = "collect-skip-LARGE.html#read-a-char" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-char</font></a>)      <font color = "#70a800">; reading first '</font>                         (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((value (<a href = "collect-skip-LARGE.html#collect-until" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">collect-until</font></a> (<a href = "collect-skip-LARGE.html#char-predicate" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">char-predicate</font></a> #\'))))
                           (<a href = "collect-skip-LARGE.html#read-a-char" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">read-a-char</font></a>)    <font color = "#70a800">; reading second '</font>                           (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
                           (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> (as-symbol attr-name) value)))
                     (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a>
                         (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((value (<a href = "collect-skip-LARGE.html#collect-until" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">collect-until</font></a> (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (ch) (<a href = "r4rs_6.htm#IDX96" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>or</b></a> (<a href = "collect-skip-LARGE.html#is-white-space?" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">is-white-space?</font></a> ch) (<a href = "r4rs_8.htm#IDX185" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eqv?</font></a> ch #\>))))))
                           (<a href = "xml-parser-LARGE.html#skip-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">skip-white-space</font></a>)
                           (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> (as-symbol attr-name) value)))))
             (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a>
               (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> (as-symbol attr-name) (as-string attr-name)) <font color = "#70a800">; boolean attribute</font>             )))))


<a name="aggregate-final-parse-tree"><font color = "#70a800">; aggregate remaining stack entries as subtrees of a kind node. kind is a symbol, such
; as html-tree or xml-tree</font><a name="aggregate-final-parse-tree"><a href = "xml-parser.html#aggregate-final-parse-tree"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-a.html#aggregate-final-parse-tree" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from aggregate-final-parse-tree to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(aggregate-final-parse-tree kind)</font></b>
  (<a href = "xml-parser-LARGE.html#make-final-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">make-final-parse-tree</font></a> kind (<a href = "r4rs_8.htm#IDX268" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">reverse</font></a> (<a href = "xml-parser-LARGE.html#shallow-list-copy" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">shallow-list-copy</font></a> <a href = "xml-parser-LARGE.html#parse-stack" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack</font></a>))))

<a name="make-final-parse-tree"><a href = "xml-parser.html#make-final-parse-tree"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-m.html#make-final-parse-tree" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from make-final-parse-tree to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(make-final-parse-tree kind subtrees)</font></b>
  (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> kind subtrees))

<a name="shallow-list-copy"><font color = "#70a800">; Assume as a pre-condition that lst is a proper list</font><a name="shallow-list-copy"><a href = "xml-parser.html#shallow-list-copy"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-s.html#shallow-list-copy" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from shallow-list-copy to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(shallow-list-copy lst)</font></b>
  (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "r4rs_8.htm#IDX261" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">null?</font></a> lst) '())
        (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> lst) (<a href = "xml-parser-LARGE.html#shallow-list-copy" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">shallow-list-copy</font></a> (<a href = "r4rs_8.htm#IDX249" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cdr</font></a> lst))))))


<font color = "#70a800">; ---------------------------------------------------------------------------------------------------</font><font color = "#70a800">;;; Utility parser functions. 
;;; The functions in this section are all miscelaneous and utility functions of the parser.</font>
<a name="traverse-and-collect-from-parse-tree"><font color = "#70a800">;; Traverse the parse tree, tree, and return a list of result-transformed nodes 
;; that satisfy the node-interesting? predicate in the parse tree.
;; In other words, apply the node-interesting? predicate to all subtrees of the tree during the traversal, and return
;; the result-transformed list of subtrees.
;; Both the functions node-interesting? and result-transformer are applied on trees and subtrees.
;; .example  (traverse-and-collect-from-parse-tree resulting-parse-tree (is-tag-of-kind? 'a) parse-tree-to-laml-expression) </font><a name="traverse-and-collect-from-parse-tree"><a href = "xml-parser.html#traverse-and-collect-from-parse-tree"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-t.html#traverse-and-collect-from-parse-tree" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from traverse-and-collect-from-parse-tree to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(traverse-and-collect-from-parse-tree tree node-interesting? result-transformer)</font></b>
  (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "r4rs_6.htm#IDX96" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>or</b></a> (<a href = "xml-parser-LARGE.html#html-tree-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">html-tree-node?</font></a> tree) (<a href = "xml-parser-LARGE.html#xml-tree-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">xml-tree-node?</font></a> tree))
          (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((subtree-results
                   (<a href = "r4rs_8.htm#IDX542" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">map</font></a> 
                    (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (subtr) (<a href = "xml-parser-LARGE.html#traverse-and-collect-from-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">traverse-and-collect-from-parse-tree</font></a> subtr node-interesting? result-transformer))
                    (<a href = "r4rs_8.htm#IDX249" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cdr</font></a> tree))))
             (flatten subtree-results)))
        ((<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "xml-parser-LARGE.html#terminal-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">terminal-node?</font></a> tree) (node-interesting? tree)) (<a href = "r4rs_8.htm#IDX265" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list</font></a> (result-transformer tree)))
        ((<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "xml-parser-LARGE.html#terminal-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">terminal-node?</font></a> tree) (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> (node-interesting? tree))) '())
        ((<a href = "xml-parser-LARGE.html#inner-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">inner-node?</font></a> tree)
           (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((subtree-results
                   (<a href = "r4rs_8.htm#IDX542" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">map</font></a> 
                    (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (subtr) (<a href = "xml-parser-LARGE.html#traverse-and-collect-from-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">traverse-and-collect-from-parse-tree</font></a> subtr node-interesting? result-transformer))
                    (<a href = "xml-parser-LARGE.html#subtrees-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">subtrees-of-parse-tree</font></a> tree))))
             (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (node-interesting? tree)
                 (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> 
                   (result-transformer tree)
                   (flatten subtree-results))
                 (flatten subtree-results))))))


<a name="collect-attributes-in-tree"><font color = "#70a800">;; Traverse the parse tree, tree, and return the list all attribute values of the attribute attr-key found
;; in the tree.
;; .example (collect-attributes-in-tree tree 'href) </font><a name="collect-attributes-in-tree"><a href = "xml-parser.html#collect-attributes-in-tree"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-c.html#collect-attributes-in-tree" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from collect-attributes-in-tree to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(collect-attributes-in-tree tree attr-key)</font></b>
 (filter (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (x) (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> x #t #f))
  (<a href = "xml-parser-LARGE.html#traverse-and-collect-from-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">traverse-and-collect-from-parse-tree</font></a> tree 
        (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (tr) (<a href = "xml-parser-LARGE.html#tag-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-entry?</font></a> (<a href = "xml-parser-LARGE.html#node-of-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">node-of-tree</font></a> tr)))
        (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (tr) (<a href = "xml-parser-LARGE.html#attribute-value" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">attribute-value</font></a> attr-key (<a href = "xml-parser-LARGE.html#attributes-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">attributes-of-tag-structure</font></a> (<a href = "xml-parser-LARGE.html#node-of-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">node-of-tree</font></a> tr)))))))


<a name="is-tag-of-kind?"><font color = "#70a800">;; Return a predicate which tests whether a subtree or node is of tag-kind (a symbol or string).
;; This function is a useful second parameter to traverse-and-collect-from-parse-tree.
;; .internal-references "related function" "traverse-and-collect-from-parse-tree"</font><a name="is-tag-of-kind?"><a href = "xml-parser.html#is-tag-of-kind?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-i.html#is-tag-of-kind?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from is-tag-of-kind? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(is-tag-of-kind? tag-kind)</font></b>
  (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (x)
    (<a href = "r4rs_6.htm#IDX96" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>or</b></a>
      (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "xml-parser-LARGE.html#tag-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-entry?</font></a> x) (<a href = "r4rs_8.htm#IDX220" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">equal?</font></a> (downcase-string (as-string tag-kind)) (downcase-string (as-string (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> x)))))
      (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "xml-parser-LARGE.html#tree-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tree-entry?</font></a> x) (<a href = "xml-parser-LARGE.html#tag-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-entry?</font></a> (<a href = "xml-parser-LARGE.html#node-of-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">node-of-tree</font></a> x)) (<a href = "r4rs_8.htm#IDX220" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">equal?</font></a> (downcase-string (as-string tag-kind)) (downcase-string (as-string (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> (<a href = "xml-parser-LARGE.html#node-of-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">node-of-tree</font></a> x)))))))))


<a name="parser-status"><font color = "#70a800">;; Display parser status in case of error in the parse process.</font><a name="parser-status"><a href = "xml-parser.html#parser-status"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parser-status" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parser-status to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parser-status)</font></b>
  (<a href = "r4rs_8.htm#IDX630" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">display</font></a> (<a href = "xml-parser-LARGE.html#stack-status" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">stack-status</font></a>)) (<a href = "r4rs_8.htm#IDX640" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">newline</font></a>)
  (<a href = "r4rs_8.htm#IDX630" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">display</font></a> (<a href = "xml-parser-LARGE.html#input-status" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">input-status</font></a>))
)

<a name="stack-status"><a href = "xml-parser.html#stack-status"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-s.html#stack-status" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from stack-status to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(stack-status)</font></b>
 (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> "THE PARSE STACK: " (as-string #\newline) (<a href = "xml-parser-LARGE.html#stack-status-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">stack-status-1</font></a> <a href = "xml-parser-LARGE.html#parse-stack" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-stack</font></a>)))


<a name="stack-status-1"><a href = "xml-parser.html#stack-status-1"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-s.html#stack-status-1" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from stack-status-1 to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(stack-status-1 lst)</font></b>
 (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_8.htm#IDX261" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">null?</font></a> lst)
    ""
    (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((top (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> lst)))
     (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a>
      (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "xml-parser-LARGE.html#text-contents-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">text-contents-entry?</font></a> top) (as-string (<a href = "xml-parser-LARGE.html#node-info" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">node-info</font></a> top)))
            ((<a href = "xml-parser-LARGE.html#tag-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-entry?</font></a> top) (as-string (<a href = "xml-parser-LARGE.html#node-info" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">node-info</font></a> top)))
            ((<a href = "xml-parser-LARGE.html#tree-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tree-entry?</font></a> top) (as-string (<a href = "xml-parser-LARGE.html#node-info" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">node-info</font></a> (<a href = "xml-parser-LARGE.html#node-of-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">node-of-tree</font></a> top))))
            (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> "???"))
      (as-string #\newline)
      (<a href = "xml-parser-LARGE.html#stack-status-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">stack-status-1</font></a> (<a href = "r4rs_8.htm#IDX249" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cdr</font></a> lst))))))

<a name="input-status"><a href = "xml-parser.html#input-status"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-i.html#input-status" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from input-status to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(input-status)</font></b>
  (<a href = "collect-skip-LARGE.html#ensure-look-ahead" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">ensure-look-ahead</font></a> 100)
  (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> "PREFIX OF REMAINING INPUT: " (as-string #\newline) (as-string #\") 
                 (<a href = "collect-skip-LARGE.html#max-look-ahead-prefix" title = "collect-skip" style = "{text-decoration: none;}" ><font color = "#000080">max-look-ahead-prefix</font></a>) (as-string #\") (as-string #\newline)))

  

                 
<font color = "#70a800">; ------------------------------------------------------------------------------------------------------------------------
; XML pretty printing.
; In reality this is mostly generic XML and HTML pretty printing.</font>
<font color = "#70a800">; ------------------------------------------------------------------</font><font color = "#70a800">;;; Top level XML pretty printing functions.</font>
<a name="pretty-print-xml-parse-tree-file"><font color = "#70a800">;; Pretty prints the XML parse tree (Lisp file) in in-file-path.
;; Outputs the pretty printed result in out-file-path,
;; which defaults to in-file-path if not explicitly passed.
;; .form (pretty-print-xml-parse-tree-file in-file-path [out-file-path])
;; .misc For XML-in-LAML ASTs use pretty-render-to-output-port instead of this function</font><a name="pretty-print-xml-parse-tree-file"><a href = "xml-parser.html#pretty-print-xml-parse-tree-file"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#pretty-print-xml-parse-tree-file" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from pretty-print-xml-parse-tree-file to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(pretty-print-xml-parse-tree-file in-file-path . optional-parameters)</font></b>
 (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((out-file-path (optional-parameter 1  optional-parameters in-file-path)))
  (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((parse-tree (file-read in-file-path)))
   (write-text-file
    (<a href = "xml-parser-LARGE.html#pretty-print-xml-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">pretty-print-xml-parse-tree</font></a> parse-tree) 
    out-file-path))))

<a name="pretty-print-xml-parse-tree"><font color = "#70a800">;; Pretty prints a HTML parse tree, and return the result as a string.
;; .misc For XML-in-LAML ASTs use pretty-xml-render instead of this function</font><a name="pretty-print-xml-parse-tree"><a href = "xml-parser.html#pretty-print-xml-parse-tree"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#pretty-print-xml-parse-tree" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from pretty-print-xml-parse-tree to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(pretty-print-xml-parse-tree parse-tree)</font></b>
 (<a href = "r4rs_6.htm#SEC32" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>set!</b></a> <a href = "xml-parser-LARGE.html#res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">res</font></a> '())
 (<a href = "xml-parser-LARGE.html#pretty-print-xml-html-parse-tree-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">pretty-print-xml-html-parse-tree-1</font></a> parse-tree 0 #f)
 (<a href = "xml-parser-LARGE.html#linearize-pp-result" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">linearize-pp-result</font></a> (<a href = "r4rs_8.htm#IDX268" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">reverse</font></a> <a href = "xml-parser-LARGE.html#res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">res</font></a>)))

<font color = "#70a800">; ------------------------------------------------------------------</font><font color = "#70a800">;;; Variables that control the pretty printing.
;;; These variables apply for both HTML and XML.</font>
<a name="indentation-delta"><font color = "#70a800">;; An integer which gives the level of indentation</font><a name="indentation-delta"><a href = "xml-parser.html#indentation-delta"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-i.html#indentation-delta" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from indentation-delta to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >indentation-delta</font></b> 3)

<a name="use-single-lining"><font color = "#70a800">;; A boolean which controls the application of single line pretty printing.
;; If true, the pretty printer will pretty print short list forms on a single line</font><a name="use-single-lining"><a href = "xml-parser.html#use-single-lining"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-u.html#use-single-lining" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from use-single-lining to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >use-single-lining</font></b> #t)

<a name="prefered-maximum-width"><font color = "#70a800">;; An integer that expresses the preferred maximum column width</font><a name="prefered-maximum-width"><a href = "xml-parser.html#prefered-maximum-width"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#prefered-maximum-width" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from prefered-maximum-width to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >prefered-maximum-width</font></b> 90)

<a name="res"><font color = "#70a800">; -------------------------------------------------------------------
; The internal result list</font>
<a name="res"><a href = "xml-parser.html#res"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#res" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from res to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >res</font></b> '())

<a name="add-to-res"><a href = "xml-parser.html#add-to-res"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-a.html#add-to-res" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from add-to-res to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(add-to-res x)</font></b>
  (<a href = "r4rs_6.htm#SEC32" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>set!</b></a> <a href = "xml-parser-LARGE.html#res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">res</font></a> (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> x <a href = "xml-parser-LARGE.html#res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">res</font></a>)))

<a name="add-list-to-res"><a href = "xml-parser.html#add-list-to-res"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-a.html#add-list-to-res" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from add-list-to-res to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(add-list-to-res lst)</font></b>
 (<a href = "r4rs_8.htm#IDX544" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">for-each</font></a>
   (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (el) (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> el))
   lst))


<a name="remove-from-res"><a href = "xml-parser.html#remove-from-res"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-r.html#remove-from-res" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from remove-from-res to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(remove-from-res i)</font></b>
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_8.htm#IDX353" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;</font></a> i 0)
      (<a href = "r4rs_6.htm#IDX117" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>begin</b></a>
        (<a href = "r4rs_6.htm#SEC32" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>set!</b></a> <a href = "xml-parser-LARGE.html#res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">res</font></a> (<a href = "r4rs_8.htm#IDX249" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cdr</font></a> <a href = "xml-parser-LARGE.html#res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">res</font></a>))
        (<a href = "xml-parser-LARGE.html#remove-from-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">remove-from-res</font></a> (<a href = "r4rs_8.htm#IDX369" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">-</font></a> i 1)))))

<a name="linearize-pp-result"><a href = "xml-parser.html#linearize-pp-result"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-l.html#linearize-pp-result" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from linearize-pp-result to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(linearize-pp-result lst)</font></b>
 (<a href = "r4rs_8.htm#IDX540" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">apply</font></a> <a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a>
  (<a href = "r4rs_8.htm#IDX542" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">map</font></a> as-string lst)))



<font color = "#70a800">; In response to Per Madsen's request - but not a real solution.
; space after a tag belongs to the word  just after the tag.
; (define (add-white-space single-lining?)
  ; (if (not single-lining?) 
       ; (if (eq? laml-platform 'windows) ; pc end of line convention
           ; (begin (add-to-res #\newline)) ; (add-to-res #\return)
           ; (add-to-res #\newline))))</font>
<a name="trailing-whitespace-on-res?"><font color = "#70a800">; Is the last element on res ended with white space?
; Start tag strings will always give #t</font><a name="trailing-whitespace-on-res?"><a href = "xml-parser.html#trailing-whitespace-on-res?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-t.html#trailing-whitespace-on-res?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from trailing-whitespace-on-res? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(trailing-whitespace-on-res?)</font></b>
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_8.htm#IDX261" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">null?</font></a> <a href = "xml-parser-LARGE.html#res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">res</font></a>)
      #f
      (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((lst-el (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> <a href = "xml-parser-LARGE.html#res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">res</font></a>)))
        (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "r4rs_8.htm#IDX482" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string?</font></a> lst-el)
                 (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((lgt (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> lst-el)))
                   (<a href = "r4rs_6.htm#IDX96" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>or</b></a> 
                      (<a href = "r4rs_8.htm#IDX185" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eqv?</font></a> #\space (<a href = "r4rs_8.htm#IDX488" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-ref</font></a> lst-el (<a href = "r4rs_8.htm#IDX369" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">-</font></a> lgt 1)))
                      (<a href = "xml-parser-LARGE.html#start-tag-string?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">start-tag-string?</font></a> lst-el)
                   )
                  ))
              ((<a href = "r4rs_8.htm#IDX452" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">char?</font></a> lst-el)
                 (<a href = "r4rs_6.htm#IDX96" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>or</b></a> (<a href = "r4rs_8.htm#IDX185" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eqv?</font></a> lst-el #\space) (<a href = "r4rs_8.htm#IDX185" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eqv?</font></a> lst-el #\newline)))
              (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> #f)))))


<a name="start-tag-string?"><font color = "#70a800">; precond: x is a string</font><a name="start-tag-string?"><a href = "xml-parser.html#start-tag-string?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-s.html#start-tag-string?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from start-tag-string? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(start-tag-string? x)</font></b>
  (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX353" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;</font></a> (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> x) 1)
       (<a href = "r4rs_8.htm#IDX185" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eqv?</font></a> (<a href = "r4rs_8.htm#IDX488" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-ref</font></a> x 0) #\<)
       (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> (<a href = "r4rs_8.htm#IDX185" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">eqv?</font></a> (<a href = "r4rs_8.htm#IDX488" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-ref</font></a> x 1) #\/))))


<a name="trailing-whitespace-pending"><a href = "xml-parser.html#trailing-whitespace-pending"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-t.html#trailing-whitespace-pending" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from trailing-whitespace-pending to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >trailing-whitespace-pending</font></b> #f)

<a name="add-white-space"><a href = "xml-parser.html#add-white-space"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-a.html#add-white-space" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from add-white-space to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(add-white-space single-lining?)</font></b>
 (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> #t <font color = "#70a800">; (trailing-whitespace-on-res?)</font>     (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> single-lining?) 
         (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> #\newline))
     (<a href = "r4rs_6.htm#SEC32" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>set!</b></a> <a href = "xml-parser-LARGE.html#trailing-whitespace-pending" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">trailing-whitespace-pending</font></a> #t)))
     

<a name="add-indentation"><a href = "xml-parser.html#add-indentation"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-a.html#add-indentation" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from add-indentation to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(add-indentation i)</font></b>
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> #t <font color = "#70a800">; (trailing-whitespace-on-res?)</font>      (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> (<a href = "xml-parser-LARGE.html#indentation" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">indentation</font></a> i))))

<a name="indentation"><font color = "#70a800">; -------------------------------------------------------------------</font>
<a name="indentation"><a href = "xml-parser.html#indentation"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-i.html#indentation" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from indentation to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(indentation n)</font></b>
  (<a href = "r4rs_8.htm#IDX483" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">make-string</font></a> n #\space))

<a name="single-liner-form?"><a href = "xml-parser.html#single-liner-form?"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-s.html#single-liner-form?" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from single-liner-form? to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(single-liner-form? x start-col max-width)</font></b>
  (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> <a href = "xml-parser-LARGE.html#use-single-lining" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">use-single-lining</font></a>
      (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((width (<a href = "xml-parser-LARGE.html#meassure-html-xml-form" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">meassure-html-xml-form</font></a> x)))
        (<a href = "r4rs_8.htm#IDX354" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&lt;=</font></a> (<a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> width start-col) max-width))
      #f))

<a name="problem-form"><font color = "#70a800">; ------------------------------------------------------------------------------------------------------------
; The substantial and central pretty printing function. This function
; support both XML and HTML.</font>
<a name="problem-form"><a href = "xml-parser.html#problem-form"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#problem-form" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from problem-form to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >problem-form</font></b> #f)

<a name="pretty-print-xml-html-parse-tree-1"><a href = "xml-parser.html#pretty-print-xml-html-parse-tree-1"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#pretty-print-xml-html-parse-tree-1" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from pretty-print-xml-html-parse-tree-1 to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(pretty-print-xml-html-parse-tree-1 form start-col single-lining?)</font></b>
  (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "xml-parser-LARGE.html#html-root?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">html-root?</font></a> form)
            (<a href = "xml-parser-LARGE.html#add-subtrees-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-subtrees-to-res</font></a> (<a href = "r4rs_8.htm#IDX249" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cdr</font></a> form) start-col single-lining?))
        ((<a href = "xml-parser-LARGE.html#xml-root?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">xml-root?</font></a> form)
            (<a href = "xml-parser-LARGE.html#add-subtrees-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-subtrees-to-res</font></a> (<a href = "r4rs_8.htm#IDX249" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cdr</font></a> form) start-col single-lining?))
        ((<a href = "xml-parser-LARGE.html#tree-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tree-entry?</font></a> form)
           (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "xml-parser-LARGE.html#single-liner-form?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">single-liner-form?</font></a> form start-col <a href = "xml-parser-LARGE.html#prefered-maximum-width" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">prefered-maximum-width</font></a>)
               (<a href = "r4rs_6.htm#IDX117" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>begin</b></a>
                 (<a href = "xml-parser-LARGE.html#pretty-print-start-tag" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">pretty-print-start-tag</font></a> (<a href = "xml-parser-LARGE.html#root-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">root-of-parse-tree</font></a> form) start-col #t)
                 (<a href = "xml-parser-LARGE.html#add-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-white-space</font></a> #t)
                 (<a href = "xml-parser-LARGE.html#add-subtrees-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-subtrees-to-res</font></a> (<a href = "xml-parser-LARGE.html#subtrees-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">subtrees-of-parse-tree</font></a> form) (<a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> start-col <a href = "xml-parser-LARGE.html#indentation-delta" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">indentation-delta</font></a>) #t)
                 (<a href = "xml-parser-LARGE.html#pretty-print-end-tag" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">pretty-print-end-tag</font></a> (<a href = "xml-parser-LARGE.html#root-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">root-of-parse-tree</font></a> form) start-col #t))
               (<a href = "r4rs_6.htm#IDX117" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>begin</b></a> 
                 (<a href = "xml-parser-LARGE.html#pretty-print-start-tag" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">pretty-print-start-tag</font></a> (<a href = "xml-parser-LARGE.html#root-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">root-of-parse-tree</font></a> form) start-col single-lining?)
                 (<a href = "xml-parser-LARGE.html#add-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-white-space</font></a> single-lining?)
                 (<a href = "xml-parser-LARGE.html#add-subtrees-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-subtrees-to-res</font></a> (<a href = "xml-parser-LARGE.html#subtrees-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">subtrees-of-parse-tree</font></a> form) (<a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> start-col <a href = "xml-parser-LARGE.html#indentation-delta" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">indentation-delta</font></a>) single-lining?)
                 (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> single-lining?) (<a href = "xml-parser-LARGE.html#add-indentation" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-indentation</font></a> start-col))
                 (<a href = "xml-parser-LARGE.html#pretty-print-end-tag" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">pretty-print-end-tag</font></a> (<a href = "xml-parser-LARGE.html#root-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">root-of-parse-tree</font></a> form) start-col single-lining?))))
        ((<a href = "xml-parser-LARGE.html#text-contents-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">text-contents-entry?</font></a> form) 
            (<a href = "xml-parser-LARGE.html#add-list-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-list-to-res</font></a> (<a href = "xml-parser-LARGE.html#break-long-string" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">break-long-string</font></a> (<a href = "xml-parser-LARGE.html#node-info" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">node-info</font></a> form) start-col (<a href = "r4rs_8.htm#IDX363" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">max</font></a> 10 (<a href = "r4rs_8.htm#IDX369" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">-</font></a> <a href = "xml-parser-LARGE.html#prefered-maximum-width" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">prefered-maximum-width</font></a> start-col)))))
<font color = "#70a800">;        ((text-contents-entry? form) 
           ; (add-to-res (node-info form)))</font>        ((<a href = "xml-parser-LARGE.html#comment-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">comment-entry?</font></a> form)
            (<a href = "xml-parser-LARGE.html#pretty-print-comment" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">pretty-print-comment</font></a> (<a href = "xml-parser-LARGE.html#comment-of-comment-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">comment-of-comment-structure</font></a> form)))
        ((<a href = "xml-parser-LARGE.html#declaration-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">declaration-entry?</font></a> form)
            (<a href = "xml-parser-LARGE.html#pretty-print-declaration" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">pretty-print-declaration</font></a> (<a href = "xml-parser-LARGE.html#kind-of-declaration-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">kind-of-declaration-structure</font></a> form) (<a href = "xml-parser-LARGE.html#value-of-declaration-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">value-of-declaration-structure</font></a> form)))
        ((<a href = "xml-parser-LARGE.html#xml-declaration-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">xml-declaration-entry?</font></a> form)
            (<a href = "xml-parser-LARGE.html#pretty-print-xml-declaration" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">pretty-print-xml-declaration</font></a> (<a href = "xml-parser-LARGE.html#attributes-of-xml-declaration-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">attributes-of-xml-declaration-structure</font></a> form)))
        ((<a href = "xml-parser-LARGE.html#start-end-tag-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">start-end-tag-entry?</font></a> form)
            (<a href = "xml-parser-LARGE.html#pretty-print-empty-tag" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">pretty-print-empty-tag</font></a> form start-col single-lining?))
        (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> (<a href = "r4rs_6.htm#IDX117" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>begin</b></a> (<a href = "r4rs_6.htm#SEC32" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>set!</b></a> <a href = "xml-parser-LARGE.html#problem-form" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">problem-form</font></a> form) (error (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> "pretty-print-xml-html-parse-tree-1: Unknown structure encountered: " (as-string form)))))))


<a name="break-long-string"><font color = "#70a800">; Break string into a list of substrings with interleaved indentation strings
; Handles the breaking and pretty printing of long textual pieces.</font><a name="break-long-string"><a href = "xml-parser.html#break-long-string"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-b.html#break-long-string" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from break-long-string to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(break-long-string str indentation max-length)</font></b>
 (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX482" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string?</font></a> str) (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> (empty-string? str)))
     (<a href = "r4rs_6.htm#IDX107" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let*</b></a> ((str1 (transliterate str #\newline (as-string #\space)))
            (indentation-string (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> (as-string #\newline) (<a href = "r4rs_8.htm#IDX483" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">make-string</font></a> indentation #\space)))
            (broken-strings (<a href = "xml-parser-LARGE.html#break-long-string-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">break-long-string-1</font></a> str1 (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> str) 0 max-length '()))
            (lgt (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> broken-strings))
            )
       (merge-lists-simple
        broken-strings (make-list (<a href = "r4rs_8.htm#IDX369" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">-</font></a> lgt 1) indentation-string)))
     (<a href = "r4rs_8.htm#IDX265" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list</font></a> str)))


<a name="break-long-string-1"><a href = "xml-parser.html#break-long-string-1"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-b.html#break-long-string-1" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from break-long-string-1 to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(break-long-string-1 str str-lgt i max-length res)</font></b>
  (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "r4rs_8.htm#IDX355" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;=</font></a> i str-lgt) (<a href = "r4rs_8.htm#IDX268" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">reverse</font></a> (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> str res)))
        ((<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX352" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&lt;</font></a> i str-lgt) (<a href = "r4rs_8.htm#IDX274" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">member</font></a> (<a href = "r4rs_8.htm#IDX488" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-ref</font></a> str i) white-space-char-list))
           (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_8.htm#IDX353" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;</font></a> i max-length)
               (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((first (<a href = "r4rs_8.htm#IDX508" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">substring</font></a> str 0 i))
                     (rest (<a href = "r4rs_8.htm#IDX508" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">substring</font></a> str (<a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> i 1) str-lgt)))
                  (<a href = "xml-parser-LARGE.html#break-long-string-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">break-long-string-1</font></a> rest (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> rest) 1 max-length (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a> first res)))
               (<a href = "xml-parser-LARGE.html#break-long-string-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">break-long-string-1</font></a> str str-lgt (<a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> i 1) max-length res)))
        (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> (<a href = "xml-parser-LARGE.html#break-long-string-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">break-long-string-1</font></a> str str-lgt (<a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> i 1) max-length res))))


<a name="add-subtrees-to-res"><a href = "xml-parser.html#add-subtrees-to-res"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-a.html#add-subtrees-to-res" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from add-subtrees-to-res to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(add-subtrees-to-res subtree-list start-col single-lining?)</font></b>
  (<a href = "r4rs_8.htm#IDX544" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">for-each</font></a>
    (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (tree)
      (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> single-lining?) (<a href = "xml-parser-LARGE.html#add-indentation" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-indentation</font></a> start-col))
      (<a href = "xml-parser-LARGE.html#pretty-print-xml-html-parse-tree-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">pretty-print-xml-html-parse-tree-1</font></a> tree start-col single-lining?)
      (<a href = "xml-parser-LARGE.html#add-white-space" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-white-space</font></a> single-lining?))
   subtree-list))

<a name="pretty-print-start-tag"><a href = "xml-parser.html#pretty-print-start-tag"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#pretty-print-start-tag" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from pretty-print-start-tag to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(pretty-print-start-tag tag-structure start-col single-lining?)</font></b>
  (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((tag-name (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> tag-structure))
        (attributes (<a href = "xml-parser-LARGE.html#attributes-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">attributes-of-tag-structure</font></a> tag-structure)))
    (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_8.htm#IDX261" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">null?</font></a> attributes)
        (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> (as-string #\<) (as-string tag-name) (as-string #\>)))
        (<a href = "r4rs_6.htm#IDX117" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>begin</b></a>
          (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> (as-string #\<) (as-string tag-name)))
          (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> #\space)
          (<a href = "xml-parser-LARGE.html#add-attributes-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-attributes-to-res</font></a> attributes (<a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> start-col 2 (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> tag-name)) single-lining?)
          (<a href = "xml-parser-LARGE.html#remove-from-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">remove-from-res</font></a> 1) <font color = "#70a800">; last space before greater than char</font>          (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> #\>)))))

<a name="add-attributes-to-res"><font color = "#70a800">; attributes is a property list</font><a name="add-attributes-to-res"><a href = "xml-parser.html#add-attributes-to-res"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-a.html#add-attributes-to-res" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from add-attributes-to-res to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(add-attributes-to-res attributes start-col single-lining?)</font></b>
  (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> (<a href = "r4rs_8.htm#IDX261" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">null?</font></a> attributes)) (<a href = "r4rs_8.htm#IDX355" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&gt;=</font></a> (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> attributes) 2))
         (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((key (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> attributes))
               (val (<a href = "r4rs_8.htm#IDX256" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cadr</font></a> attributes))
               (res-attributes (<a href = "r4rs_8.htm#IDX254" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cddr</font></a> attributes)))
           (<a href = "xml-parser-LARGE.html#add-single-attribute-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-single-attribute-to-res</font></a> key val start-col single-lining?)
           (<a href = "xml-parser-LARGE.html#add-attributes-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-attributes-to-res</font></a> (<a href = "r4rs_8.htm#IDX254" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cddr</font></a> attributes) start-col single-lining?)))
        ((<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "r4rs_8.htm#IDX177" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">not</font></a> (<a href = "r4rs_8.htm#IDX261" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">null?</font></a> attributes)) (<a href = "r4rs_8.htm#IDX352" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">&lt;</font></a> (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> attributes) 2))
           (error (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> "add-attributes-to-res: malformed attribute list: " (as-string attributes))))))

<a name="add-single-attribute-to-res"><a href = "xml-parser.html#add-single-attribute-to-res"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-a.html#add-single-attribute-to-res" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from add-single-attribute-to-res to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(add-single-attribute-to-res key val start-col single-lining?)</font></b>
  (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> key) (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> "=") 
  (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> (string-it val)) (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> #\space))

<a name="pretty-print-empty-tag"><a href = "xml-parser.html#pretty-print-empty-tag"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#pretty-print-empty-tag" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from pretty-print-empty-tag to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(pretty-print-empty-tag tag-structure start-col single-lining?)</font></b>
  (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((tag-name (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> tag-structure))
        (attributes (<a href = "xml-parser-LARGE.html#attributes-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">attributes-of-tag-structure</font></a> tag-structure)))
    (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "r4rs_8.htm#IDX261" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">null?</font></a> attributes)
        (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> (as-string #\<) (as-string tag-name) (as-string #\/) (as-string #\>)))
        (<a href = "r4rs_6.htm#IDX117" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>begin</b></a>
          (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> (as-string #\<) (as-string tag-name)))
          (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> #\space)
          (<a href = "xml-parser-LARGE.html#add-attributes-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-attributes-to-res</font></a> attributes (<a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> start-col 2 (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> tag-name)) single-lining?)
          (<a href = "xml-parser-LARGE.html#remove-from-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">remove-from-res</font></a> 1) <font color = "#70a800">; last space before greater than char</font>          (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a>  (as-string #\/) (as-string #\>) ))))))

<a name="pretty-print-end-tag"><a href = "xml-parser.html#pretty-print-end-tag"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#pretty-print-end-tag" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from pretty-print-end-tag to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(pretty-print-end-tag tag-structure start-col single-lining?)</font></b>
  (<a href = "r4rs_6.htm#IDX107" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let*</b></a> ((tag-name (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> tag-structure))
         (end-tag (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> (as-string #\<) (as-string #\/) (as-string tag-name) (as-string #\>))))
    (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> end-tag)))

<a name="pretty-print-comment"><a href = "xml-parser.html#pretty-print-comment"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#pretty-print-comment" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from pretty-print-comment to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(pretty-print-comment comment-string)</font></b>
  (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> "&lt;!--") (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> #\space)
  (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> comment-string)
  (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> "--&gt;"))

<a name="pretty-print-declaration"><a href = "xml-parser.html#pretty-print-declaration"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#pretty-print-declaration" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from pretty-print-declaration to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(pretty-print-declaration kind value)</font></b>
  (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> "&lt;!")
  (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> (as-string kind))
  (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> #\space)
  (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> value)
  (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> "&gt;"))

<a name="pretty-print-xml-declaration"><a href = "xml-parser.html#pretty-print-xml-declaration"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#pretty-print-xml-declaration" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from pretty-print-xml-declaration to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(pretty-print-xml-declaration attributes)</font></b>
  (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> "&lt;?xml")
  (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> #\space)
  (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((dummy 0))
    (<a href = "xml-parser-LARGE.html#add-attributes-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-attributes-to-res</font></a> attributes dummy #f))
  (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> #\space)
  (<a href = "xml-parser-LARGE.html#add-to-res" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">add-to-res</font></a> "?&gt;"))





<a name="meassure-html-xml-form"><font color = "#70a800">; ------------------------------------------------------------------
; Html and xml meassuring</font>
<a name="meassure-html-xml-form"><a href = "xml-parser.html#meassure-html-xml-form"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-m.html#meassure-html-xml-form" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from meassure-html-xml-form to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(meassure-html-xml-form form)</font></b>
  (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "xml-parser-LARGE.html#html-root?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">html-root?</font></a> form)
           (accumulate-right <a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> 0 
            (<a href = "r4rs_8.htm#IDX542" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">map</font></a> <a href = "xml-parser-LARGE.html#meassure-html-xml-form" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">meassure-html-xml-form</font></a> (<a href = "r4rs_8.htm#IDX249" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cdr</font></a> form))))
        ((<a href = "xml-parser-LARGE.html#tree-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tree-entry?</font></a> form) 
            (<a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> (<a href = "xml-parser-LARGE.html#meassure-html-xml-form" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">meassure-html-xml-form</font></a> (<a href = "xml-parser-LARGE.html#root-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">root-of-parse-tree</font></a> form)) <font color = "#70a800">; both start only</font>               1
               (accumulate-right <a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> 0 
                 (<a href = "r4rs_8.htm#IDX542" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">map</font></a> <a href = "xml-parser-LARGE.html#meassure-html-xml-form" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">meassure-html-xml-form</font></a> (<a href = "xml-parser-LARGE.html#subtrees-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">subtrees-of-parse-tree</font></a> form)))
               (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> (as-string (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> (<a href = "xml-parser-LARGE.html#root-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">root-of-parse-tree</font></a> form)))) 3))
        ((<a href = "xml-parser-LARGE.html#text-contents-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">text-contents-entry?</font></a> form) 
            (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> (<a href = "xml-parser-LARGE.html#node-info" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">node-info</font></a> form)))
        ((<a href = "xml-parser-LARGE.html#comment-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">comment-entry?</font></a> form)
            (<a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> 7 (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> (<a href = "xml-parser-LARGE.html#comment-of-comment-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">comment-of-comment-structure</font></a> form))))
        ((<a href = "xml-parser-LARGE.html#declaration-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">declaration-entry?</font></a> form)
            (<a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> 3
               (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> (as-string (<a href = "xml-parser-LARGE.html#kind-of-declaration-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">kind-of-declaration-structure</font></a> form)))
               (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> (<a href = "xml-parser-LARGE.html#value-of-declaration-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">value-of-declaration-structure</font></a> form))))
        ((<a href = "r4rs_6.htm#IDX96" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>or</b></a> (<a href = "xml-parser-LARGE.html#start-end-tag-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">start-end-tag-entry?</font></a> form) (<a href = "xml-parser-LARGE.html#start-tag-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">start-tag-entry?</font></a> form))
            (<a href = "xml-parser-LARGE.html#meassure-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">meassure-tag-structure</font></a> form))
        (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> (error (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> "meassure-html-xml-form: Unknown structure encountered: " (as-string form))))))

<a name="meassure-tag-structure"><a href = "xml-parser.html#meassure-tag-structure"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-m.html#meassure-tag-structure" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from meassure-tag-structure to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(meassure-tag-structure tag-structure)</font></b>
  (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((tag-name (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> tag-structure))
        (attributes (<a href = "xml-parser-LARGE.html#attributes-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">attributes-of-tag-structure</font></a> tag-structure)))
    (<a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> (as-string tag-name))
        3
       (<a href = "xml-parser-LARGE.html#meassure-attributes" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">meassure-attributes</font></a> attributes))))

<a name="meassure-attributes"><a href = "xml-parser.html#meassure-attributes"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-m.html#meassure-attributes" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from meassure-attributes to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(meassure-attributes attributes)</font></b>
   (accumulate-right <a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> 0   
     (<a href = "r4rs_8.htm#IDX542" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">map</font></a> <a href = "xml-parser-LARGE.html#meassure-attribute" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">meassure-attribute</font></a> (propertylist-to-alist attributes))))

<a name="meassure-attribute"><a href = "xml-parser.html#meassure-attribute"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-m.html#meassure-attribute" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from meassure-attribute to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(meassure-attribute attribute)</font></b>
  (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((key (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> attribute))
        (val (<a href = "r4rs_8.htm#IDX249" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cdr</font></a> attribute)))
    (<a href = "r4rs_8.htm#IDX367" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">+</font></a> (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> (as-string key))
       1
       (<a href = "r4rs_8.htm#IDX487" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-length</font></a> (as-string val)))))
  
<font color = "#70a800">; ------------------------------------------------------------------</font>
<font color = "#70a800">;;; Parse tree conversions.
;;; In this section we provide a number of conversion functions that work on parse trees.</font>
<a name="parse-tree-to-laml"><font color = "#70a800">;; Transform an XML or HTML parse tree to a similar surface LAML expression on output-file. 
;; This function accept parse tree rooted by the symbols html-tree, xml-tree, as well the symbol tree.
;; .parameter tree an XML or HTML parse tree
;; .parameter output-file The name of the file on which to write the LAML expression. Can be full path. Must include extension.
;; .reference "laml.scm function" "html-to-laml" "../../../man/laml.html#html-to-laml"
;; .misc When the resulting file is LAML processed, the LAML file will write the a LAML file, say f.laml, to f.html in the same directory as the laml file.</font><a name="parse-tree-to-laml"><a href = "xml-parser.html#parse-tree-to-laml"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-tree-to-laml" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-tree-to-laml to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-tree-to-laml tree output-file)</font></b>
  (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((prefix (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a>
                  "(load (string-append laml-dir \"laml.scm\")) " 
                  "(laml-style \"simple-html4.0-loose\")"
                  "(write-text-file "))
        (html-document (<a href = "xml-parser-LARGE.html#parse-tree-2-laml-string" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree-2-laml-string</font></a> tree))
        (suffix " (string-append (startup-directory) laml-source-file-name-without-extension \".html\"))")
       )
    (write-text-file (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> prefix html-document suffix) output-file)))

<a name="parse-tree-2-laml-string"><font color = "#70a800">; Given a parse tree return a string with a LAML version of the tree.</font><a name="parse-tree-2-laml-string"><a href = "xml-parser.html#parse-tree-2-laml-string"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-tree-2-laml-string" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-tree-2-laml-string to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-tree-2-laml-string tree)</font></b>
 (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "xml-parser-LARGE.html#parse-tree?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree?</font></a> tree)
     (<a href = "xml-parser-LARGE.html#parse-tree-2-laml-string-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree-2-laml-string-1</font></a> tree)
     (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((the-tree 
            (find-in-list 
             (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (x) (<a href = "xml-parser-LARGE.html#tree-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tree-entry?</font></a> x))   (<a href = "xml-parser-LARGE.html#subtrees-of-xml-html-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">subtrees-of-xml-html-parse-tree</font></a> tree))))
       (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> the-tree
           (<a href = "xml-parser-LARGE.html#parse-tree-2-laml-string-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree-2-laml-string-1</font></a> the-tree)
           (laml-error "parse-tree-2-laml-string: Cannot find tree structure...")))))
 
<a name="parse-tree-2-laml-string-1"><font color = "#70a800">; The function doing the real work</font><a name="parse-tree-2-laml-string-1"><a href = "xml-parser.html#parse-tree-2-laml-string-1"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-tree-2-laml-string-1" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-tree-2-laml-string-1 to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-tree-2-laml-string-1 tree)</font></b>
  (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "xml-parser-LARGE.html#inner-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">inner-node?</font></a> tree)
           (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "xml-parser-LARGE.html#html-tree-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">html-tree-node?</font></a> tree) 
                  (list-to-string (<a href = "r4rs_8.htm#IDX542" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">map</font></a> <a href = "xml-parser-LARGE.html#parse-tree-2-laml-string-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree-2-laml-string-1</font></a> (<a href = "r4rs_8.htm#IDX249" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cdr</font></a> tree)) " "))
                 (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a>
                  (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((root (<a href = "xml-parser-LARGE.html#root-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">root-of-parse-tree</font></a> tree))
                        (subtrees (<a href = "xml-parser-LARGE.html#subtrees-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">subtrees-of-parse-tree</font></a> tree)))
                    (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a>
                     "(" 
                     (downcase-string (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> root)) " "
                     (<a href = "xml-parser-LARGE.html#lamlify-attributes-string" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">lamlify-attributes-string</font></a> (<a href = "xml-parser-LARGE.html#attributes-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">attributes-of-tag-structure</font></a> root))
                     (list-to-string (<a href = "r4rs_8.htm#IDX542" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">map</font></a> <a href = "xml-parser-LARGE.html#parse-tree-2-laml-string-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree-2-laml-string-1</font></a> subtrees) " ")
                     ")")))))
        ((<a href = "xml-parser-LARGE.html#terminal-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">terminal-node?</font></a> tree)
         (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "xml-parser-LARGE.html#text-contents-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">text-contents-entry?</font></a> tree) (string-it (<a href = "xml-parser-LARGE.html#string-protect" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">string-protect</font></a> (<a href = "xml-parser-LARGE.html#node-info" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">node-info</font></a> tree))))
               ((<a href = "xml-parser-LARGE.html#start-end-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">start-end-node?</font></a> tree) 
                (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> 
                 "("
                 (downcase-string (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> tree)) " "
                 (<a href = "xml-parser-LARGE.html#lamlify-attributes-string" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">lamlify-attributes-string</font></a>  (<a href = "xml-parser-LARGE.html#attributes-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">attributes-of-tag-structure</font></a> tree))
                 ")"))
               (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> "")                <font color = "#70a800">; drops comments and declarations from the output.</font>               )
         )
        (error "parse-tree-2-laml: Should not happen 2")))

<a name="lamlify-attributes-string"><a href = "xml-parser.html#lamlify-attributes-string"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-l.html#lamlify-attributes-string" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from lamlify-attributes-string to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(lamlify-attributes-string attr-list)</font></b>
  (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "r4rs_8.htm#IDX261" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">null?</font></a> attr-list) "")
        (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((key (downcase-string (as-string (<a href = "r4rs_8.htm#IDX247" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">car</font></a> attr-list))))
                    (val (<a href = "r4rs_8.htm#IDX256" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cadr</font></a> attr-list)))
                (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> 
                   "'" key " " (string-it val) " " (<a href = "xml-parser-LARGE.html#lamlify-attributes-string" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">lamlify-attributes-string</font></a> (<a href = "r4rs_8.htm#IDX254" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cddr</font></a> attr-list)))))))

<a name="string-protect"><font color = "#70a800">; Protect internal string quotes in str with backslashes.</font><a name="string-protect"><a href = "xml-parser.html#string-protect"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-s.html#string-protect" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from string-protect to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(string-protect str)</font></b>
  (replace-string str (as-string #\") (<a href = "r4rs_8.htm#IDX510" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">string-append</font></a> (as-string #\\) (as-string #\"))))



<a name="parse-tree-to-laml-expression"><font color = "#70a800">; Transform an XML or HTML parse tree to a LAML surface expressions (in terms of a Scheme list structure).
; This function is similar to parse-tree-to-laml which delivers a textual result 
; (a string) on an output file.
; Feb 2002: There are some problems with this function. Removed from public interface.</font><a name="parse-tree-to-laml-expression"><a href = "xml-parser.html#parse-tree-to-laml-expression"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-tree-to-laml-expression" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-tree-to-laml-expression to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-tree-to-laml-expression tree)</font></b>
 (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "xml-parser-LARGE.html#inner-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">inner-node?</font></a> tree)
           (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "r4rs_6.htm#IDX95" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>and</b></a> (<a href = "xml-parser-LARGE.html#html-tree-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">html-tree-node?</font></a> tree) (<a href = "r4rs_8.htm#IDX351" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">=</font></a> 1 (<a href = "r4rs_8.htm#IDX266" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">length</font></a> (<a href = "r4rs_8.htm#IDX249" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cdr</font></a> tree)))) 
                    (<a href = "xml-parser-LARGE.html#parse-tree-to-laml-expression" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree-to-laml-expression</font></a> (<a href = "xml-parser-LARGE.html#root-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">root-of-parse-tree</font></a> tree)))
                 ((<a href = "xml-parser-LARGE.html#html-tree-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">html-tree-node?</font></a> tree) 
                    (<a href = "r4rs_8.htm#IDX542" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">map</font></a> <a href = "xml-parser-LARGE.html#parse-tree-to-laml-expression" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree-to-laml-expression</font></a> (<a href = "r4rs_8.htm#IDX249" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cdr</font></a> tree)))
                 (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a>
                  (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((root (<a href = "xml-parser-LARGE.html#root-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">root-of-parse-tree</font></a> tree))
                        (subtrees (<a href = "xml-parser-LARGE.html#subtrees-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">subtrees-of-parse-tree</font></a> tree)))
                     (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a>
                      (as-symbol (downcase-string (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> root)))
                      (<a href = "r4rs_8.htm#IDX267" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">append</font></a>
                       (<a href = "xml-parser-LARGE.html#attributes-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">attributes-of-tag-structure</font></a> root)
                       (<a href = "r4rs_8.htm#IDX542" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">map</font></a> <a href = "xml-parser-LARGE.html#parse-tree-to-laml-expression" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree-to-laml-expression</font></a> subtrees)))))))
        ((<a href = "xml-parser-LARGE.html#terminal-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">terminal-node?</font></a> tree)
         (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "xml-parser-LARGE.html#text-contents-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">text-contents-entry?</font></a> tree)  (<a href = "xml-parser-LARGE.html#node-info" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">node-info</font></a> tree))
               ((<a href = "xml-parser-LARGE.html#start-end-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">start-end-node?</font></a> tree) 
                 (<a href = "r4rs_8.htm#IDX245" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">cons</font></a>
                   (as-symbol (downcase-string (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> tree)))
                   (<a href = "xml-parser-LARGE.html#attributes-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">attributes-of-tag-structure</font></a> tree)))
               (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> "")                <font color = "#70a800">; Problematic !!!</font>               ))
        (error "parse-tree-to-laml-expression: Should not happen")))



<a name="parse-tree-to-ast"><font color = "#70a800">;; Convert a HTML/XML parse tree to a LAML abstract syntax tree in language.
;; This function accept parse tree rooted by the symbols html-tree, xml-tree, as well the symbol tree.
;; Recall that the syntax trees are used as the internal format by
;; the validating mirrors of LAML.
;; .parameter pt The parse tree
;; .parameter language The name of the XML language, such as xhtml10-transitional. A symbol.
;; .internal-references "related function" "parse-tree-to-element-structure"</font><a name="parse-tree-to-ast"><a href = "xml-parser.html#parse-tree-to-ast"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-tree-to-ast" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-tree-to-ast to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-tree-to-ast pt language)</font></b>
 (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "xml-parser-LARGE.html#parse-tree?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree?</font></a> pt)
     (<a href = "xml-parser-LARGE.html#parse-tree-to-ast-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree-to-ast-1</font></a> pt language)
     (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((the-tree 
            (find-in-list 
             (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (x) (<a href = "xml-parser-LARGE.html#tree-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tree-entry?</font></a> x))   (<a href = "xml-parser-LARGE.html#subtrees-of-xml-html-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">subtrees-of-xml-html-parse-tree</font></a> pt))))
       (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> the-tree
           (<a href = "xml-parser-LARGE.html#parse-tree-to-ast-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree-to-ast-1</font></a> the-tree language)
           (laml-error "parse-tree-to-ast: Cannot locate parse tree proper in the parse tree: " pt)))))

<a name="parse-tree-to-ast-1"><font color = "#70a800">; The function doing the real work.</font><a name="parse-tree-to-ast-1"><a href = "xml-parser.html#parse-tree-to-ast-1"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-tree-to-ast-1" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-tree-to-ast-1 to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-tree-to-ast-1 pt language)</font></b>
 (<a href = "r4rs_6.htm#IDX112" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>letrec</b></a> ((make-ast  <font color = "#70a800">; restricted version. Precondition: contents is a list.</font>           (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (element-name contents attributes kind language)
             (<a href = "r4rs_8.htm#IDX265" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list</font></a> 'ast (as-string element-name) contents attributes (as-symbol kind) (as-symbol language) '())))
          (make-xml-comment (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (str) (<a href = "r4rs_8.htm#IDX265" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list</font></a> 'xml-comment str)))
          (make-xml-processing-instruction (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (pi-target pi-string) (<a href = "r4rs_8.htm#IDX265" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list</font></a> 'processing-instruction pi-target pi-string)))
         )
  (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a> ((<a href = "xml-parser-LARGE.html#parse-tree?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree?</font></a> pt)
          (<a href = "r4rs_6.htm#IDX107" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let*</b></a> ((node (<a href = "xml-parser-LARGE.html#root-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">root-of-parse-tree</font></a> pt))
                 (subtrees (<a href = "xml-parser-LARGE.html#subtrees-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">subtrees-of-parse-tree</font></a> pt)))
            (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "xml-parser-LARGE.html#start-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">start-node?</font></a> node)
                (make-ast 
                  (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> node)
                  (<a href = "r4rs_8.htm#IDX542" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">map</font></a> (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (st) (<a href = "xml-parser-LARGE.html#parse-tree-to-ast-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree-to-ast-1</font></a> st language)) subtrees)
                  (<a href = "xml-parser-LARGE.html#attributes-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">attributes-of-tag-structure</font></a> node)
                  'double
                  language
                )
                (laml-error "parse-tree-to-ast-1: Parse tree is expected to have a start-node as root: " pt))))
        ((<a href = "xml-parser-LARGE.html#textual-content-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">textual-content-node?</font></a> pt) pt)
        ((<a href = "xml-parser-LARGE.html#start-end-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">start-end-node?</font></a> pt) (make-ast (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> pt) '() (<a href = "xml-parser-LARGE.html#attributes-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">attributes-of-tag-structure</font></a> pt) 'single language))
        ((<a href = "xml-parser-LARGE.html#start-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">start-node?</font></a> pt) 
          (laml-error "parse-tree-to-ast-1: Start-end node encountered as direct child of tree node. Should not happen: " pt))
        ((<a href = "xml-parser-LARGE.html#comment-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">comment-node?</font></a> pt)
            (make-xml-comment (second pt)))
        ((<a href = "xml-parser-LARGE.html#processing-instruction-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">processing-instruction-node?</font></a> pt)
            (make-xml-processing-instruction (second pt) (third pt)))
        ((<a href = "r4rs_6.htm#IDX96" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>or</b></a> (<a href = "xml-parser-LARGE.html#declaration-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">declaration-node?</font></a> pt) (<a href = "xml-parser-LARGE.html#xml-declaration-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">xml-declaration-node?</font></a> pt)  ""))
        (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> (laml-error "parse-tree-to-ast-1: Unknown kind of parse tree: " pt)))))


<a name="parse-tree-to-element-structure"><font color = "#70a800">;; Convert a HTML/XML parse tree to an element structure ala LENO.
;; This function accept parse tree rooted by the symbols html-tree, xml-tree, as well the symbol tree.
;; Modelled after parse-tree-to-ast.
;; .internal-references "related function" "parse-tree-to-ast"</font><a name="parse-tree-to-element-structure"><a href = "xml-parser.html#parse-tree-to-element-structure"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-tree-to-element-structure" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-tree-to-element-structure to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-tree-to-element-structure pt)</font></b>
 (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "xml-parser-LARGE.html#parse-tree?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree?</font></a> pt)
     (<a href = "xml-parser-LARGE.html#parse-tree-to-element-structure-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree-to-element-structure-1</font></a> pt)
     (<a href = "r4rs_6.htm#SEC35" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let</b></a> ((the-tree 
            (find-in-list 
             (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (x) (<a href = "xml-parser-LARGE.html#tree-entry?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tree-entry?</font></a> x))   (<a href = "xml-parser-LARGE.html#subtrees-of-xml-html-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">subtrees-of-xml-html-parse-tree</font></a> pt))))
       (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> the-tree
           (<a href = "xml-parser-LARGE.html#parse-tree-to-element-structure-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree-to-element-structure-1</font></a> the-tree)
           (laml-error "parse-tree-to-element-structure: Cannot locate parse tree proper in the parse tree: " pt)))))

<a name="parse-tree-to-element-structure-1"><font color = "#70a800">; The function doing the real work.</font><a name="parse-tree-to-element-structure-1"><a href = "xml-parser.html#parse-tree-to-element-structure-1"><img src = "./images/small-square.gif" alt = "Show source file in small font" border = "0" ></a>&nbsp;<a href = "cross-reference-index-p.html#parse-tree-to-element-structure-1" target = control-frame><img src = "./images/small-green-up-triangle.gif" alt = "In xml-parser: Link from parse-tree-to-element-structure-1 to it's cross reference table entry" border = "0" ></a>&nbsp;<br>(<a href = "r4rs_7.htm#SEC42" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>define</b></a> <b><font color = "#ff0000"  >(parse-tree-to-element-structure-1 pt)</font></b>
 (<a href = "r4rs_6.htm#IDX112" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>letrec</b></a> ((make-element-structure (<a href = "r4rs_6.htm#SEC30" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>lambda</b></a> (name contents attributes) (<a href = "r4rs_8.htm#IDX265" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">list</font></a> 'element name contents attributes)))) <font color = "#70a800">; COPIED FROM LENO</font>  (<a href = "r4rs_6.htm#SEC34" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>cond</b></a>  ((<a href = "xml-parser-LARGE.html#parse-tree?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree?</font></a> pt)
          (<a href = "r4rs_6.htm#IDX107" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>let*</b></a> ((node (<a href = "xml-parser-LARGE.html#root-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">root-of-parse-tree</font></a> pt))
                 (subtrees (<a href = "xml-parser-LARGE.html#subtrees-of-parse-tree" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">subtrees-of-parse-tree</font></a> pt)))
            (<a href = "r4rs_6.htm#SEC31" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>if</b></a> (<a href = "xml-parser-LARGE.html#start-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">start-node?</font></a> node)
                (make-element-structure
                  (as-symbol (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> node))
                  (<a href = "r4rs_8.htm#IDX542" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><font color = "#a64700">map</font></a> <a href = "xml-parser-LARGE.html#parse-tree-to-element-structure-1" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">parse-tree-to-element-structure-1</font></a> subtrees)
                  (propertylist-to-alist (<a href = "xml-parser-LARGE.html#attributes-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">attributes-of-tag-structure</font></a> node)))
                (laml-error "parse-tree-to-element-structure-1: Parse tree is expected to have a start-node as root: " pt))))
        ((<a href = "xml-parser-LARGE.html#textual-content-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">textual-content-node?</font></a> pt) pt)
        ((<a href = "xml-parser-LARGE.html#start-end-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">start-end-node?</font></a> pt) 
           (make-element-structure (as-symbol (<a href = "xml-parser-LARGE.html#tag-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">tag-of-tag-structure</font></a> pt)) '() (propertylist-to-alist (<a href = "xml-parser-LARGE.html#attributes-of-tag-structure" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">attributes-of-tag-structure</font></a> pt))))
        ((<a href = "xml-parser-LARGE.html#start-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">start-node?</font></a> pt) 
           (laml-error "parse-tree-to-element-structure-1: Start-end node encountered as direct child of tree node. Should not happen: " pt))
        ((<a href = "r4rs_6.htm#IDX96" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>or</b></a> (<a href = "xml-parser-LARGE.html#declaration-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">declaration-node?</font></a> pt) (<a href = "xml-parser-LARGE.html#xml-declaration-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">xml-declaration-node?</font></a> pt) (<a href = "xml-parser-LARGE.html#comment-node?" title = "xml-parser" style = "{text-decoration: none;}" ><font color = "#000080">comment-node?</font></a> pt) ""))
        (<a href = "r4rs_6.htm#IDX82" style = "{text-decoration: none;}" target = "documentation-frame" title = "R4RS Scheme form" ><b>else</b></a> (laml-error "parse-tree-to-element-structure-1: Unknown kind of parse tree: " pt)))))












</pre></font>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p>&nbsp;<p></body></html>