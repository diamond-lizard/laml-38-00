<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><title>Reference Manual of the URL Encode and Decode Library</title> <link href="../../css-stylesheets/manual/manual-stylesheet.css" rel="stylesheet" type="text/css" /> <link rel="SHORTCUT ICON" href="../../images/16-16-icon.ico" /></head> <body class="manual-body"><a name="MANUAL-TOP"></a> <table border="0px" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td width="33%" align="left" valign="top"><font size="2"><span class="manual-top-banner-when-generated">Generated: Monday, November 14, 2011, 09:16:26</span></font></td> <td width="34%" align="center" valign="top"><font size="2"><span>Copyright  &copy; 2011 , Kurt Nørmark</span></font></td> <td width="33%" align="right" valign="top"><font size="2"><a href="../../index.html" title="The local LAML software home page" target="_top"><img src="../../images/laml-home.gif" alt="The local LAML software home page" border="0" /></a></font></td></tr></tbody></table> <h1 class="manual-title">Reference Manual of the URL Encode and Decode Library</h1> <p></p> <h3><span class="manual-author-element"><span>Kurt Nørmark   &copy;</span> normark@cs.aau.dk</span> <span class="manual-affiliation-element">Department of Computer Science, Aalborg University, Denmark.</span></h3> <p></p>   <div class="manual-source-file-description">LAML Source file: lib/encode-decode.scm</div> <p></p> <a name="MANUAL-ABSTRACT"></a> <div class="manual-abstract"> URLs are encoded in order to avoid special characters causing problems in an Internet adresss.  This library provides functions to encode and decode parts of an URL. The main functions are encode-a-list and string-decode (also known as extract-attributes). The library also supports decoding of the multipart/form-data format, which can be used for file uploading. The main function in this area is multipart-decode. Encode-a-list takes an association list and encodes it to a string with &#39;=&#39; and &#39;&amp;&#39; representation. string-decode (extract-attributes) takes a string, such as produced by encode-a-list, and returns an association list. Thus, each of the two functions are inverse version of the other function.<p> This library requires the <a href = "color.html"> color library</a>  to be loaded (not for coloring purpose, but in order to get access to the  the function that convert hexadecimal numbers to decimal numbers). In case multipart-decode is used, also the <a href="collect-skip.html">collect-skip library</a> is required.<p> This library is used by the accompanying <a href = "cgi.html">CGI library</a>.<p> </div> <p></p> <a name="MANUAL-TOC"></a> <div class="manual-table-of-contents-header">Table of Contents:</div> <div style="margin-left:12px;"><div><table border="0"><tbody><tr><td width="280" valign="top"><a href="#SECTION1"><font size="2">1.  Encoding stuff.</font></a></td> <td width="280" valign="top"><a href="#SECTION2"><font size="2">2.  Decoding stuff.</font></a></td> <td width="280" valign="top"><a href="#SECTION3"><font size="2">3.  Multipart form decoding (file uploading).</font></a></td></tr></tbody></table></div></div> <p></p> <a name="MANUAL-INDEX"></a> <div class="manual-alphabetic-index-header">Alphabetic index:</div> <div style="margin-left:12px;"><table border="3" class="manual-alphabetic-index"><tr><td class="manual-header-title"><a href="#encode-a-list">encode-a-list</a></td> <td class="manual-header-form">(encode-a-list a-list)</td> <td class="manual-header-description">Encode an a-list (both keys and values).</td></tr> <tr><td class="manual-header-title"><a href="#encode-string">encode-string</a></td> <td class="manual-header-form">(encode-string str)</td> <td class="manual-header-description">Encode the string str, thus protecting a number of special characters.</td></tr> <tr><td class="manual-header-title"><a href="#encode-vector">encode-vector</a></td> <td class="manual-header-form">encode-vector</td> <td class="manual-header-description">A vector which controls the working of encode-string and encode-a-list (and others).</td></tr> <tr><td class="manual-header-title"><a href="#extract-attributes">extract-attributes</a></td> <td class="manual-header-form">(extract-attributes str-a-list)</td> <td class="manual-header-description">Decodes and extract the attributes from the string str-a-list and return an association list.</td></tr> <tr><td class="manual-header-title"><a href="#multipart-decode">multipart-decode</a></td> <td class="manual-header-form">(multipart-decode cur-time)</td> <td class="manual-header-description">Return the association list of decoded keyword value pairs from a multipart encoded  standard input.</td></tr> <tr><td class="manual-header-title"><a href="#string-decode">string-decode</a></td> <td class="manual-header-form">(string-decode str-a-list)</td> <td class="manual-header-description">Decodes and extract the attributes from the string str-a-list and return an association list.</td></tr> <tr><td class="manual-header-title"><a href="#upload-target-filename">upload-target-filename</a></td> <td class="manual-header-form">(upload-target-filename proper-name extension cur-time)</td> <td class="manual-header-description">This function determines the proper name and extension of a downloaded file (no initial path information must be given) as represented in the server&#39;s file system.</td></tr></table></div> <p></p> <table class="manual-table"><tr><td width="3000px" colspan="4"></td></tr> <tr class="manual-section"><td class="manual-section" colspan="4"><a name="SECTION1"></a> <span><a href="#MANUAL-TOP"><img src="../../images/small-up.gif" title="Manual top" alt="" border="0" /></a> <img src="../../images/small-prev-blind.gif" title="" alt="" border="0" /> <a href="#SECTION2"><img src="../../images/small-next.gif" title="Next manual section" alt="" border="0" /></a></span> <br /> <span class="manual-section-number">1</span> <span class="manual-section-title">Encoding stuff.</span></td></tr> <tr><td colspan="4" class="manual-section-description"></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="encode-vector"></a> encode-vector</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">encode-vector</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">A vector which controls the working of encode-string and encode-a-list (and others). The vector contains 128 entries. Entry n contains the encoding of character n. All % encodings must be strings of lenght exactly 3. Chars outside the range (chars between 128 and 255) are intended always to be encoded. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="encode-decode-ep/encode-decode-1.html#encode-vector">encode-vector</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="encode-string"></a> encode-string</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(encode-string str)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Encode the string str, thus protecting a number of special characters. The encoding is controlled by the list encode-vector.    </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="encode-decode-ep/encode-decode-1.html#encode-string">encode-string</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="encode-a-list"></a> encode-a-list</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(encode-a-list a-list)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Encode an a-list (both keys and values). Return a string in whichs the encoded keys and values are puted together as: <pre> key1 = val1 &amp; key2 = val2 </pre>. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="encode-decode-ep/encode-decode-1.html#encode-a-list">encode-a-list</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr class="manual-section"><td class="manual-section" colspan="4"><a name="SECTION2"></a> <span><a href="#MANUAL-TOP"><img src="../../images/small-up.gif" title="Manual top" alt="" border="0" /></a> <a href="#SECTION1"><img src="../../images/small-prev.gif" title="Previous manual section" alt="" border="0" /></a> <a href="#SECTION3"><img src="../../images/small-next.gif" title="Next manual section" alt="" border="0" /></a></span> <br /> <span class="manual-section-number">2</span> <span class="manual-section-title">Decoding stuff.</span></td></tr> <tr><td colspan="4" class="manual-section-description"> Because spaces and certain special characters may not appear in URLs, an encoding scheme is used when it is necessary to generate a URL that includes them:  Each space is converted to a plus sign, and each special character is replaced by a triplet of characters consisting of a percent sign and two hexadecimal digits, which together identify the ASCII code for the character.</td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="string-decode"></a> string-decode</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(string-decode str-a-list)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Decodes and extract the attributes from the string str-a-list and return an association list. Assume that str-a-list is url encoded (application/x-www-form-urlencoded). In CGI programming, a query string consists of a sequence of equations separated by ampersands, with the name of some attribute on the left-hand side of each equation and the value of that attribute on the right-hand side.   This function returns an association list from the string str-a-list, which represents an association list. In the string, the character &#39;=&#39; separates keys and values.  Similarly, the character &#39;&amp;&#39; separate key-value pairs. In addition, the &#39;+&#39; character represents a blank space. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">Parameters</td> <td class="manual-plain-parameter-name">str-a-list</td> <td class="manual-plain-parameter-description" colspan="2">The part a URL that follows the question mark.</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="2">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="encode-decode-ep/encode-decode-1.html#string-decode">string-decode</a></td></tr> <tr class="manual-row"><td class="manual-plain-reference-role">alias function</td> <td colspan="3" class="manual-plain-reference-anchor"><a class="manual-plain-internal-reference" href="#extract-attributes">extract-attributes</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="extract-attributes"></a> extract-attributes</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(extract-attributes str-a-list)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Decodes and extract the attributes from the string str-a-list and return an association list. Just and alias of string-decode. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">Parameters</td> <td class="manual-plain-parameter-name">str-a-list</td> <td class="manual-plain-parameter-description" colspan="2">The part a URL that follows the question mark.</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="2">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="encode-decode-ep/encode-decode-1.html#extract-attributes">extract-attributes</a></td></tr> <tr class="manual-row"><td class="manual-plain-reference-role">alias function</td> <td colspan="3" class="manual-plain-reference-anchor"><a class="manual-plain-internal-reference" href="#string-decode">string-decode</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr class="manual-section"><td class="manual-section" colspan="4"><a name="SECTION3"></a> <span><a href="#MANUAL-TOP"><img src="../../images/small-up.gif" title="Manual top" alt="" border="0" /></a> <a href="#SECTION2"><img src="../../images/small-prev.gif" title="Previous manual section" alt="" border="0" /></a> <img src="../../images/small-next-blind.gif" title="" alt="" border="0" /></span> <br /> <span class="manual-section-number">3</span> <span class="manual-section-title">Multipart form decoding (file uploading).</span></td></tr> <tr><td colspan="4" class="manual-section-description">The main function in this part is multipart-decode, which is able to extract keyword value pairs, as done by string-decode. In addition, multipart-decode will save uploaded files in a particular directory on the server. The directory is given as a hidden field of the accompanying HTML form, called multipart-form.</td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="multipart-decode"></a> multipart-decode</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(multipart-decode cur-time)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Return the association list of decoded keyword value pairs from a multipart encoded  standard input. As a side effect, write uploaded files into the servers file system. Information about the uploaded file is stored in a four-tuple (list of length 4) under a keyname corresponding to the parameter called name in the file-upload form. The four-tuple is (file-path-at-client file-path-at-server contents-type server-directory-url). file-path-at-client is the full file path of the file on the client. file-path-at-server is the full file path of the file on the server. The function upload-target-filename can be redefined in order to  determine the exact name on the server. From file-path-at-server the file name proper on the server can easily be extracted. The constituent contents-type is the contents type, such as &#39;image/bmp&#39;.  Finally, server-directory-url is the URL prefix of the directory in which the uploaded files reside. This information is useful if you are going to link to the uploaded file. cur-time is the current time (an integer second count) used to unique naming of the target file in the servers file system together with initial path, which is passed in a hidden field. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="5">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="encode-decode-ep/encode-decode-1.html#multipart-decode">multipart-decode</a></td></tr> <tr class="manual-row"><td class="manual-plain-reference-role">accompanying function</td> <td colspan="3" class="manual-plain-reference-anchor"><a class="manual-plain-external-reference" href="../html4.0-loose/man/convenience.html#multipart-form">multipart-form</a></td></tr> <tr class="manual-row"><td class="manual-plain-reference-role">accompanying function</td> <td colspan="3" class="manual-plain-reference-anchor"><a class="manual-plain-external-reference" href="../html4.0-loose/man/convenience.html#file-upload">file-upload</a></td></tr> <tr class="manual-row"><td class="manual-plain-reference-role">accompanying function</td> <td colspan="3" class="manual-plain-reference-anchor"><a class="manual-plain-external-reference" href="../html4.0-loose/man/convenience.html#file-upload">file-upload</a></td></tr> <tr class="manual-row"><td class="manual-plain-reference-role">determination of file name on server</td> <td colspan="3" class="manual-plain-reference-anchor"><a class="manual-plain-internal-reference" href="#upload-target-filename">upload-target-filename</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="upload-target-filename"></a> upload-target-filename</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(upload-target-filename proper-name extension cur-time)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">This function determines the proper name and extension of a downloaded file (no initial path information must be given) as represented in the server&#39;s file system. It is essential in most situations to ensure uniqueness of the file on the server. Therefore it is recommended that cur-time (the current time in seconds elapsed since January 1, 1970) is used in the file file. This function can be redefined if you want to define the upload target filename in a special way. The default is (string-append proper-name "-" cur-time "." extension), or if the extension is empty, (string-append proper-name "-" cur-time). </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="encode-decode-ep/encode-decode-1.html#upload-target-filename">upload-target-filename</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr></table> <div class="manual-end-remark">Generated: Monday, November 14, 2011, 09:16:26 <br /> Generated by LAML <a href="http://www.cs.aau.dk/~normark/schemedoc/index.html" style="color:inherit;">SchemeDoc</a> using LAML Version 38.0 (November 14, 2011, full) <br /> </div> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p></body></html>