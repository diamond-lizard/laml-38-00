(((title . "Reference Manual of the URL Encode and Decode Library") (author (ast "span" ("Kurt N\370rmark" #t " " #t (char-ref copy)) () double xhtml10-transitional ()) #t "normark@cs.aau.dk") (affiliation "Department of Computer Science," #t "Aalborg University," #t "Denmark.") (abstract . " URLs are encoded in order to avoid special characters causing problems in an Internet adresss.  This library provides functions to encode and decode parts of an URL. The main functions are encode-a-list and string-decode (also known as extract-attributes). The library also supports decoding of the multipart/form-data format, which can be used for file uploading. The main function in this area is multipart-decode. Encode-a-list takes an association list and encodes it to a string with '=' and '&' representation. string-decode (extract-attributes) takes a string, such as produced by encode-a-list, and returns an association list. Thus, each of the two functions are inverse version of the other function.<p> This library requires the <a href = \"color.html\"> color library</a>  to be loaded (not for coloring purpose, but in order to get access to the  the function that convert hexadecimal numbers to decimal numbers). In case multipart-decode is used, also the <a href=\"collect-skip.html\">collect-skip library</a> is required.<p> This library is used by the accompanying <a href = \"cgi.html\">CGI library</a>.<p> ") (scheme-source-file . "/user/normark/scheme/lib/encode-decode.scm/") (laml-resource . "true") (documentation-commenting-style . not-provided) (default-attribute-explanation . not-provided) (source-destination-delta . not-provided) (css-prestylesheet . "compact") (css-stylesheet . "argentina") (css-stylesheet-copying . "true") (make-dtd-manual-template . not-provided) (keep-syntactical-comment-file . not-provided) (manual-destination-name . not-provided) (mirror-names-defined . not-provided) (mirror-name-prefix . not-provided) (attribute-sorting . not-provided) (scheme-source-linking . "true")) ((kind "manual-section") (section-title "Encoding stuff.") (section-body "")) ((cross-references (reference "Scheme source file" "encode-vector" "encode-decode-ep/encode-decode-1.html#encode-vector")) (kind "manual-page") (description "A vector which controls the working of encode-string and encode-a-list (and others). The vector contains 128 entries. Entry n contains the encoding of character n. All % encodings must be strings of lenght exactly 3. Chars outside the range (chars between 128 and 255) are intended always to be encoded. ") (title "encode-vector") (form encode-vector)) ((cross-references (reference "Scheme source file" "encode-string" "encode-decode-ep/encode-decode-1.html#encode-string")) (kind "manual-page") (description "Encode the string str, thus protecting a number of special characters. The encoding is controlled by the list encode-vector. ") (title "encode-string") (form (encode-string str))) ((cross-references (reference "Scheme source file" "encode-a-list" "encode-decode-ep/encode-decode-1.html#encode-a-list")) (kind "manual-page") (description "Encode an a-list (both keys and values). Return a string in whichs the encoded keys and values are puted together as: <pre> key1 = val1 & key2 = val2 </pre>. ") (title "encode-a-list") (form (encode-a-list a-list))) ((kind "manual-section") (section-title "Decoding stuff.") (section-body " Because spaces and certain special characters may not appear in URLs, an encoding scheme is used when it is necessary to generate a URL that includes them: Each space is converted to a plus sign, and each special character is replaced by a triplet of characters consisting of a percent sign and two hexadecimal digits, which together identify the ASCII code for the character.")) ((kind "manual-page") (parameters (parameter "str-a-list" "The part a URL that follows the question mark.")) (description "Decodes and extract the attributes from the string str-a-list and return an association list. Assume that str-a-list is url encoded (application/x-www-form-urlencoded). In CGI programming, a query string consists of a sequence of equations separated by ampersands, with the name of some attribute on the left-hand side of each equation and the value of that attribute on the right-hand side. This function returns an association list from the string str-a-list, which represents an association list. In the string, the character '=' separates keys and values. Similarly, the character '&' separate key-value pairs. In addition, the '+' character represents a blank space. ") (title "string-decode") (form (string-decode str-a-list)) (cross-references (reference "Scheme source file" "string-decode" "encode-decode-ep/encode-decode-1.html#string-decode") (internal-references "alias function" "extract-attributes"))) ((kind "manual-page") (parameters (parameter "str-a-list" "The part a URL that follows the question mark.")) (description "Decodes and extract the attributes from the string str-a-list and return an association list. Just and alias of string-decode. ") (form "(extract-attributes str-a-list)") (title "extract-attributes") (cross-references (reference "Scheme source file" "extract-attributes" "encode-decode-ep/encode-decode-1.html#extract-attributes") (internal-references "alias function" "string-decode"))) ((kind "manual-section") (section-title "Multipart form decoding (file uploading).") (section-body "The main function in this part is multipart-decode, which is able to extract keyword value pairs, as done by string-decode. In addition, multipart-decode will save uploaded files in a particular directory on the server. The directory is given as a hidden field of the accompanying HTML form, called multipart-form.")) ((kind "manual-page") (description "Return the association list of decoded keyword value pairs from a multipart encoded standard input. As a side effect, write uploaded files into the servers file system. Information about the uploaded file is stored in a four-tuple (list of length 4) under a keyname corresponding to the parameter called name in the file-upload form. The four-tuple is (file-path-at-client file-path-at-server contents-type server-directory-url). file-path-at-client is the full file path of the file on the client. file-path-at-server is the full file path of the file on the server. The function upload-target-filename can be redefined in order to determine the exact name on the server. From file-path-at-server the file name proper on the server can easily be extracted. The constituent contents-type is the contents type, such as 'image/bmp'. Finally, server-directory-url is the URL prefix of the directory in which the uploaded files reside. This information is useful if you are going to link to the uploaded file. cur-time is the current time (an integer second count) used to unique naming of the target file in the servers file system together with initial path, which is passed in a hidden field. ") (title "multipart-decode") (form (multipart-decode cur-time)) (cross-references (reference "Scheme source file" "multipart-decode" "encode-decode-ep/encode-decode-1.html#multipart-decode") (reference "accompanying function" "multipart-form" "../html4.0-loose/man/convenience.html#multipart-form") (reference "accompanying function" "file-upload" "../html4.0-loose/man/convenience.html#file-upload") (reference "accompanying function" "file-upload" "../html4.0-loose/man/convenience.html#file-upload") (internal-references "determination of file name on server" "upload-target-filename"))) ((cross-references (reference "Scheme source file" "upload-target-filename" "encode-decode-ep/encode-decode-1.html#upload-target-filename")) (kind "manual-page") (description "This function determines the proper name and extension of a downloaded file (no initial path information must be given) as represented in the server's file system. It is essential in most situations to ensure uniqueness of the file on the server. Therefore it is recommended that cur-time (the current time in seconds elapsed since January 1, 1970) is used in the file file. This function can be redefined if you want to define the upload target filename in a special way. The default is (string-append proper-name \"-\" cur-time \".\" extension), or if the extension is empty, (string-append proper-name \"-\" cur-time). ") (title "upload-target-filename") (form (upload-target-filename proper-name extension cur-time))))