(((title . "Reference Manual of the CGI library") (author (ast "span" ("Kurt N\370rmark" #t " " #t (char-ref copy)) () double xhtml10-transitional ()) #t "normark@cs.aau.dk") (affiliation "Department of Computer Science," #t "Aalborg University," #t "Denmark.") (abstract . " This is a collection of Scheme functions used for CGI programming purposes. We use the so-called POST method, according to which input to a CGI program is read from standard input.<p> The function extract-form-input reads the necessary amounts of input (as determined by the environment variable CONTENT_LENGT) and returns a Lisp association list.<p> The function extract-url-parameters returns and decodes the url parameters. The url parameters are the part of an URL found after the question mark. Using the CGI interface, these are passed via the environment variable QUERY_STRING. Like extract-form-input, the result of this function is also a Lisp association list.<p> The input functions (extract-form-input and extract-url-parameters) take a parameter, which is used for testing purposes in the situation where we are not connected to a WWW server. The global variable cgi-testing controls whether this parameter is used. The variable cgi-testing must be defined in the context of this library.<p> The function time-extend extends an association list with time and date information. This time stamping is quite useful when we extract data from an input form.<p> On the output side, the function write-page writes a page to standard output. If cgi-testing, the page is written to a local test-file.<p> The variable test-file must be defined in the context of this library.<p> The function make-url-parameters produces and encodes url paramters. This is used if we make an URL which passes parameters to another CGI program. The function make-url makes and returns an URL.<p> The CGI library depends on the accompanying <a href = \"encode-decode.html\">URL encode and decode library</a>.<p> There exists a simple <a href=\"../../tutorial/cgi-programming/cgi-programming.html\">tutorial CGI example</a> in elucidative style. ") (scheme-source-file . "/user/normark/scheme/lib/cgi.scm/") (laml-resource . "true") (documentation-commenting-style . not-provided) (default-attribute-explanation . not-provided) (source-destination-delta . not-provided) (css-prestylesheet . "compact") (css-stylesheet . "argentina") (css-stylesheet-copying . "true") (make-dtd-manual-template . not-provided) (keep-syntactical-comment-file . not-provided) (manual-destination-name . not-provided) (mirror-names-defined . not-provided) (mirror-name-prefix . not-provided) (attribute-sorting . not-provided) (scheme-source-linking . "true")) ((kind "manual-section") (section-title "CGI output functions.") (section-body "")) ((cross-references (reference "Scheme source file" "cgi-write" "cgi-ep/cgi-1.html#cgi-write")) (kind "manual-page") (parameters (parameter "output" "The text to be written to std output (a string) or the LAML AST to be linearized to standard output.")) (description "Write output (a text or a LAML AST) to standard output, or if cgi-testing, to test-file. ") (title "cgi-write") (form (cgi-write output))) ((cross-references (reference "Scheme source file" "write-page" "cgi-ep/cgi-1.html#write-page")) (kind "manual-page") (description "Writes an HTML page to standard output. The page is described in terms of title, body, and an optional color-list. These three parameters are passed through the HTML function page. If cgi-testing is true, write the page to test-file (a global variable) instead of to standard output.") (title "write-page") (form (write-page title body . color-list))) ((cross-references (reference "Scheme source file" "writeln" "cgi-ep/cgi-1.html#writeln")) (kind "manual-page") (description "Writes a newline on standard output ") (form "(writeln . args)") (title "writeln")) ((cross-references (reference "Scheme source file" "end" "cgi-ep/cgi-1.html#end")) (kind "manual-page") (description "Ends and exit the CGI program. Normally issued as the last command in a cgi program. When we are cgi-testing, this is the empty command. ") (title "end") (form (end))) ((kind "manual-section") (section-title "CGI input functions.") (section-body "")) ((cross-references (reference "Scheme source file" "read-std-input" "cgi-ep/cgi-1.html#read-std-input")) (kind "manual-page") (description "Read n chars from standard input and return as string. ") (title "read-std-input") (form (read-std-input n))) ((cross-references (reference "Scheme source file" "length-of-std-input" "cgi-ep/cgi-1.html#length-of-std-input")) (kind "manual-page") (description "Return the number of chars on standard input") (title "length-of-std-input") (form (length-of-std-input))) ((cross-references (reference "Scheme source file" "cgi-url-input" "cgi-ep/cgi-1.html#cgi-url-input")) (kind "manual-page") (description "Return the url input (a string) also known as the query string. This functions does not kind of decoding. If testing, a parameter is required; the parameter plays the role of the input source (an URL encoded string). ") (title "cgi-url-input") (form (cgi-url-input . the-input))) ((cross-references (reference "Scheme source file" "extract-form-input" "cgi-ep/cgi-1.html#extract-form-input")) (kind "manual-page") (description "Extract form input from std input, and return the decoded data as an association list. Assumes that the input is application/x-www-form-urlencoded (which is the default encoding of an HTML form). The optional parameter must be supplied if testing. In that case input is taken from the file instead of std input. The file must contain an a-list.") (title "extract-form-input") (form (extract-form-input . testfile))) ((cross-references (reference "Scheme source file" "time-extend" "cgi-ep/cgi-1.html#time-extend")) (kind "manual-page") (description "Extend the the a-list with date, time and second-cound fields (all strings). ") (title "time-extend") (form (time-extend a-list second-count))) ((kind "manual-section") (section-title "Other CGI functions.") (section-body "")) ((cross-references (reference "Scheme source file" "make-url-parameters-and-encode" "cgi-ep/cgi-1.html#make-url-parameters-and-encode")) (kind "manual-page") (description "Make the last part of an url - the part after the question mark. The partial url is made from a list of keys and a list of values. They are expected to be of the same length. Make and encode the keys and values in key-list and val-list, respectively. Returns a string. This is the original version used before August 23, 2011. ") (title "make-url-parameters-and-encode") (form (make-url-parameters-and-encode key-list val-list))) ((cross-references (reference "Scheme source file" "make-url-parameters" "cgi-ep/cgi-1.html#make-url-parameters")) (kind "manual-page") (description "Make the last part of an url - the part after the question mark. The partial url is made from a list of keys and a list of values. They are expected to be of the same length. A variant which does not URL encode keys and values. Returns a string. New as of August 23, 2011. ") (title "make-url-parameters") (form (make-url-parameters key-list val-list))) ((cross-references (reference "Scheme source file" "extract-url-parameters" "cgi-ep/cgi-1.html#extract-url-parameters")) (kind "manual-page") (description "Return a decoded URL input, as taken from the QUERY_STRING and decoded appropritely to an association list. The optional parameter the-input is used in case of cgi-testing, namely as the encoded url parameter. If not testing, the function is called without parameters. In that case, the parameters are taken from an environment variable, QUERY_STRING. ") (title "extract-url-parameters") (form (extract-url-parameters . the-input))) ((cross-references (reference "Scheme source file" "make-url" "cgi-ep/cgi-1.html#make-url")) (kind "manual-page") (description "Return an URL from the parameters. The URL includes URL parameters (the part which follows the question mark). The two last parameters are passed into make-url-parameters after a question mark ") (title "make-url") (form (make-url url-prefix cgi-program key-list val-list))) ((cross-references (reference "Scheme source file" "save-registrations" "cgi-ep/cgi-1.html#save-registrations")) (kind "manual-page") (description "A special purpose function which saves the a-list in two files f and g. The a-list is the registered data. Save this structure in file f, appart from the contents field with key 'contributin' of a-list, which is to be saved in file g. No file deletion nor directory updating is done in this function. ") (title "save-registrations") (form (save-registrations a-list f g))) ((cross-references (reference "Scheme source file" "split-file-name" "cgi-ep/cgi-1.html#split-file-name")) (kind "manual-page") (description "Return a list of the file name components separated by underscore. This function is useful in case we save various kinds of transactions on a file whose name represents part of the file contents. The components of the file name is separated by the underscore character. ") (title "split-file-name") (form (split-file-name filename))) ((kind "manual-section") (section-title "Multipart input.") (section-body "")) ((cross-references (reference "Scheme source file" "extract-multipart-form-input" "cgi-ep/cgi-1.html#extract-multipart-form-input")) (kind "manual-page") (description "Extract form input from std input, and return the decoded data as an association list. Assumes that the input is multipart/form-data, which is the encoding that provides for file uploading. The parameter cur-time is used as part of the file name of uploaded files - in order to ensure unique naming. The optional parameter must be supplied if testing. In that case input is taken from the file instead of std input. The file is assumed to contain the raw textual contents. ") (title "extract-multipart-form-input") (form (extract-multipart-form-input cur-time . testfile))))