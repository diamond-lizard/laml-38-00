<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><title>Reference Manual of Buffered Input Streams</title> <link href="../../css-stylesheets/manual/manual-stylesheet.css" rel="stylesheet" type="text/css" /> <link rel="SHORTCUT ICON" href="../../images/16-16-icon.ico" /></head> <body class="manual-body"><a name="MANUAL-TOP"></a> <table border="0px" cellpadding="0" cellspacing="0" width="100%"><tbody><tr><td width="33%" align="left" valign="top"><font size="2"><span class="manual-top-banner-when-generated">Generated: Monday, November 14, 2011, 09:18:08</span></font></td> <td width="34%" align="center" valign="top"><font size="2"><span>Copyright  &copy; 2011 , Kurt Nørmark</span></font></td> <td width="33%" align="right" valign="top"><font size="2"><a href="../../index.html" title="The local LAML software home page" target="_top"><img src="../../images/laml-home.gif" alt="The local LAML software home page" border="0" /></a></font></td></tr></tbody></table> <h1 class="manual-title">Reference Manual of Buffered Input Streams</h1> <p></p> <h3><span class="manual-author-element"><span>Kurt Nørmark   &copy;</span> normark@cs.aau.dk</span> <span class="manual-affiliation-element">Department of Computer Science, Aalborg University, Denmark.</span></h3> <p></p>   <div class="manual-source-file-description">LAML Source file: lib/collect-skip.scm</div> <p></p> <a name="MANUAL-ABSTRACT"></a> <div class="manual-abstract"> This library supports buffered input stream. A buffered input stream is convenient for various kinds of parsing tasks. <p> It is assumed that the variable ip references an open input port, or a string. The assignment of ip must be done exernally to this library, and after the library is loaded. If ip references an open input stream (made by the Scheme function open-input-file, for instance) input is read from that port. If ip is string, the variable pstring-ip-pointer is used as a pointer into the string.<p> The functions in section one are generic, low-level reading functions that either read from the open input port, or from a string (at the location  determined by the variable pstring-ip-pointer). The functions in section two are the basic reading and peeking functions.  In section three a number of convenient collection and skipping functions are provided for.<p> This library has been developed as part of an SGML/XML Document Type Definition (DTD) parser, but it is useful in many other parsing situations. There exists <a href="http://www.cs.auc.dk/~normark/scheme/tools/dtd-parser/doc/html/index.html">som early internal documentation</a> of the DTD parser (on the www.cs.auc.dk site) and as such also of some aspects of the functions in this library.<p> In earlier versions of LAML, this library was called &#39;the text collection and skipping library&#39;. </div> <p></p> <a name="MANUAL-TOC"></a> <div class="manual-table-of-contents-header">Table of Contents:</div> <div style="margin-left:12px;"><div><table border="0"><tbody><tr><td width="280" valign="top"><a href="#SECTION1"><font size="2">1.  Low-level, generic input functions.</font></a></td> <td width="280" valign="top"><a href="#SECTION3"><font size="2">3.  Collection and skipping functions.</font></a></td> <td width="280" valign="top"> </td></tr> <tr><td width="280" valign="top"><a href="#SECTION2"><font size="2">2.  Look ahead buffer and queue.</font></a></td> <td width="280" valign="top"><a href="#SECTION4"><font size="2">4.  Useful predicates for skipping and collecting.</font></a></td> <td width="280" valign="top"> </td></tr></tbody></table></div></div> <p></p> <a name="MANUAL-INDEX"></a> <div class="manual-alphabetic-index-header">Alphabetic index:</div> <div style="margin-left:12px;"><table border="3" class="manual-alphabetic-index"><tr><td class="manual-header-title"><a href="#advance-look-ahead">advance-look-ahead</a></td> <td class="manual-header-form">(advance-look-ahead n)</td> <td class="manual-header-description">Provided that there is at least n characters in the buffer, advance next-read with n positions.</td></tr> <tr><td class="manual-header-title"><a href="#char-predicate">char-predicate</a></td> <td class="manual-header-form">(char-predicate ch)</td> <td class="manual-header-description">Return a predicate functions which matches the character ch.</td></tr> <tr><td class="manual-header-title"><a href="#collect-balanced-until">collect-balanced-until</a></td> <td class="manual-header-form">(collect-balanced-until char-pred-1 char-pred-2)</td> <td class="manual-header-description">This collection procedure returns a balanced collection given two char predicates.</td></tr> <tr><td class="manual-header-title"><a href="#collect-until">collect-until</a></td> <td class="manual-header-form">(collect-until p)</td> <td class="manual-header-description">Read and collect a string from the input, controlled by a predicate.</td></tr> <tr><td class="manual-header-title"><a href="#collect-until-string">collect-until-string</a></td> <td class="manual-header-form">(collect-until-string str  . inclusive)</td> <td class="manual-header-description">Collect characters until str is encountered.</td></tr> <tr><td class="manual-header-title"><a href="#end-of-line?">end-of-line?</a></td> <td class="manual-header-form">(end-of-line? ch)</td> <td class="manual-header-description">Is ch an end of line charcter? </td></tr> <tr><td class="manual-header-title"><a href="#ensure-look-ahead">ensure-look-ahead</a></td> <td class="manual-header-form">(ensure-look-ahead n)</td> <td class="manual-header-description">Make sure that there is at least n characters in the buffer.</td></tr> <tr><td class="manual-header-title"><a href="#eof?">eof?</a></td> <td class="manual-header-form">(eof? ch)</td> <td class="manual-header-description">Is ch an end of file character? </td></tr> <tr><td class="manual-header-title"><a href="#generic-eof-object?">generic-eof-object?</a></td> <td class="manual-header-form">(generic-eof-object? x)</td> <td class="manual-header-description">Is x the designated end-of-file value relative to the implicitly given input port ip.</td></tr> <tr><td class="manual-header-title"><a href="#generic-read-char">generic-read-char</a></td> <td class="manual-header-form">(generic-read-char ip)</td> <td class="manual-header-description">Reads a single character from ip, and advances the input pointer.</td></tr> <tr><td class="manual-header-title"><a href="#is-white-space?">is-white-space?</a></td> <td class="manual-header-form">(is-white-space? ch)</td> <td class="manual-header-description">Is ch a white space character? </td></tr> <tr><td class="manual-header-title"><a href="#look-ahead-char">look-ahead-char</a></td> <td class="manual-header-form">(look-ahead-char)</td> <td class="manual-header-description">Return the first character from the "read end" of the buffer.</td></tr> <tr><td class="manual-header-title"><a href="#look-ahead-prefix">look-ahead-prefix</a></td> <td class="manual-header-form">(look-ahead-prefix lgt)</td> <td class="manual-header-description">Return a string of length lgt from the "read end" of the buffer.</td></tr> <tr><td class="manual-header-title"><a href="#match-look-ahead?">match-look-ahead?</a></td> <td class="manual-header-form">(match-look-ahead? str)</td> <td class="manual-header-description">Return whether the buffer matches the string str.</td></tr> <tr><td class="manual-header-title"><a href="#max-look-ahead">max-look-ahead</a></td> <td class="manual-header-form">max-look-ahead</td> <td class="manual-header-description">The length of the cyclic look ahead buffer.</td></tr> <tr><td class="manual-header-title"><a href="#max-look-ahead-prefix">max-look-ahead-prefix</a></td> <td class="manual-header-form">(max-look-ahead-prefix)</td> <td class="manual-header-description">Return the entire look ahead queue as a string.</td></tr> <tr><td class="manual-header-title"><a href="#peek-a-char">peek-a-char</a></td> <td class="manual-header-form">(peek-a-char)</td> <td class="manual-header-description">Peek a character from the input port, but queues it for subsequent reading at "the peek end".</td></tr> <tr><td class="manual-header-title"><a href="#peek-chars">peek-chars</a></td> <td class="manual-header-form">(peek-chars n)</td> <td class="manual-header-description">Peeks n charcters, by n calls of peek-a-char.</td></tr> <tr><td class="manual-header-title"><a href="#put-back-a-char-read-end">put-back-a-char-read-end</a></td> <td class="manual-header-form">(put-back-a-char-read-end ch)</td> <td class="manual-header-description">Put ch into the "read end" buffer (where read-a-char operates).</td></tr> <tr><td class="manual-header-title"><a href="#put-back-a-char-write-end">put-back-a-char-write-end</a></td> <td class="manual-header-form">(put-back-a-char-write-end ch)</td> <td class="manual-header-description">Put ch into the "peek end" of buffer (where peek-a-char operates).</td></tr> <tr><td class="manual-header-title"><a href="#put-back-a-string">put-back-a-string</a></td> <td class="manual-header-form">(put-back-a-string str which-end)</td> <td class="manual-header-description">Put str back into the buffer.</td></tr> <tr><td class="manual-header-title"><a href="#read-a-char">read-a-char</a></td> <td class="manual-header-form">(read-a-char)</td> <td class="manual-header-description">Read from the the look ahead buffer.</td></tr> <tr><td class="manual-header-title"><a href="#read-a-string">read-a-string</a></td> <td class="manual-header-form">(read-a-string n)</td> <td class="manual-header-description">Read and return a string of length n by means of repeated activations of read-a-char.</td></tr> <tr><td class="manual-header-title"><a href="#reset-look-ahead-buffer">reset-look-ahead-buffer</a></td> <td class="manual-header-form">(reset-look-ahead-buffer)</td> <td class="manual-header-description">Reset the look ahead buffer.</td></tr> <tr><td class="manual-header-title"><a href="#skip-string">skip-string</a></td> <td class="manual-header-form">(skip-string str if-not-message)</td> <td class="manual-header-description">Assume that str is just in front of us.</td></tr> <tr><td class="manual-header-title"><a href="#skip-until-string">skip-until-string</a></td> <td class="manual-header-form">(skip-until-string str  . inclusive)</td> <td class="manual-header-description">Skip characters until str is encountered.</td></tr> <tr><td class="manual-header-title"><a href="#skip-while">skip-while</a></td> <td class="manual-header-form">(skip-while p)</td> <td class="manual-header-description">Skip characters while p holds.</td></tr></table></div> <p></p> <table class="manual-table"><tr><td width="3000px" colspan="4"></td></tr> <tr class="manual-section"><td class="manual-section" colspan="4"><a name="SECTION1"></a> <span><a href="#MANUAL-TOP"><img src="../../images/small-up.gif" title="Manual top" alt="" border="0" /></a> <img src="../../images/small-prev-blind.gif" title="" alt="" border="0" /> <a href="#SECTION2"><img src="../../images/small-next.gif" title="Next manual section" alt="" border="0" /></a></span> <br /> <span class="manual-section-number">1</span> <span class="manual-section-title">Low-level, generic input functions.</span></td></tr> <tr><td colspan="4" class="manual-section-description">The functions in this section reads from either an input port, or from a string.</td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="generic-read-char"></a> generic-read-char</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(generic-read-char ip)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Reads a single character from ip, and advances the input pointer. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#generic-read-char">generic-read-char</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="generic-eof-object?"></a> generic-eof-object?</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(generic-eof-object? x)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Is x the designated end-of-file value relative to the implicitly given input port ip. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#generic-eof-object?">generic-eof-object?</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr class="manual-section"><td class="manual-section" colspan="4"><a name="SECTION2"></a> <span><a href="#MANUAL-TOP"><img src="../../images/small-up.gif" title="Manual top" alt="" border="0" /></a> <a href="#SECTION1"><img src="../../images/small-prev.gif" title="Previous manual section" alt="" border="0" /></a> <a href="#SECTION3"><img src="../../images/small-next.gif" title="Next manual section" alt="" border="0" /></a></span> <br /> <span class="manual-section-number">2</span> <span class="manual-section-title">Look ahead buffer and queue.</span></td></tr> <tr><td colspan="4" class="manual-section-description">The functions in this section manipulates a look ahead queue, which is in between the input port ip and the applications. Via this buffer it is possible to implement look ahead in the input port.<p> Imagine an input buffer of (actual) size n: <pre>    c1 c2 c3 ... cn </pre> When characters are read from the input stream, they enter to the right (the peek end). When characters are read by an application they are taken from the left (the read end). Thus, cn is the last character read from the input port (or from the input string); This is done by peek-a-char. c1 is the next char to leave the buffer, and to be read by the client application; This will be done by read-a-char.<p> A few words about terminology in relation to R4RS or R5RS. The Scheme procedure read-char corresponds roughtly to read-a-char; The former always reads a character from an input port; The latter reads from an input stream via the buffer;  Only if the buffer is empty, a character is read from the port or string. The proper Scheme function peek-char returns the next char from the input port, without updating the &#39;input pointer&#39;. The function peek-a-char of this library is different, because it reads a character from the file and puts it into the buffer. This use of terminology is unfortunate, and it may be confusing for some readers.</td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="max-look-ahead"></a> max-look-ahead</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">max-look-ahead</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">The length of the cyclic look ahead buffer. Predefined to 20000 characters. A constant. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#max-look-ahead">max-look-ahead</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="reset-look-ahead-buffer"></a> reset-look-ahead-buffer</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(reset-look-ahead-buffer)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Reset the look ahead buffer.  You should always call this function after you have re-assigned ip to a new input stream. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#reset-look-ahead-buffer">reset-look-ahead-buffer</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="peek-a-char"></a> peek-a-char</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(peek-a-char)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Peek a character from the input port, but queues it for subsequent reading at "the peek end". This function always reads one character via generic-read-char, and puts in into the "peek end" of the buffer. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#peek-a-char">peek-a-char</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="peek-chars"></a> peek-chars</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(peek-chars n)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Peeks n charcters, by n calls of peek-a-char.  In other words, the buffer is extended with n characters read from the input stream. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="2">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#peek-chars">peek-chars</a></td></tr> <tr class="manual-row"><td class="manual-plain-reference-role">relies on</td> <td colspan="3" class="manual-plain-reference-anchor"><a class="manual-plain-internal-reference" href="#peek-a-char">peek-a-char</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="read-a-char"></a> read-a-char</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(read-a-char)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Read from the the look ahead buffer. Only if this buffer is empty, read from the port. Reads from "the read end" of the queue. In case the buffer is non-empty, this procedure takes a character out of the buffer in the "read end". In any case, it advances the implicit input pointer of the input stream. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#read-a-char">read-a-char</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="read-a-string"></a> read-a-string</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(read-a-string n)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Read and return a string of length n by means of repeated activations of read-a-char. Takes eof into account such that a string shorter than n can be returned. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#read-a-string">read-a-string</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="look-ahead-prefix"></a> look-ahead-prefix</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(look-ahead-prefix lgt)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Return a string of length lgt from the "read end" of the buffer. A proper function. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Precondition</td> <td colspan="3" class="manual-plain-condition">lgt cannot be larger than the number of characters in the buffer.</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#look-ahead-prefix">look-ahead-prefix</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="max-look-ahead-prefix"></a> max-look-ahead-prefix</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(max-look-ahead-prefix)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Return the entire look ahead queue as a string. A proper function. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#max-look-ahead-prefix">max-look-ahead-prefix</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="look-ahead-char"></a> look-ahead-char</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(look-ahead-char)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Return the first character from the "read end" of the buffer. A proper function. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Precondition</td> <td colspan="3" class="manual-plain-condition">The buffer is not empty.</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#look-ahead-char">look-ahead-char</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="match-look-ahead?"></a> match-look-ahead?</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(match-look-ahead? str)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Return whether the buffer matches the string str. Matching is done by the function equal? A proper function. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#match-look-ahead?">match-look-ahead?</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="ensure-look-ahead"></a> ensure-look-ahead</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(ensure-look-ahead n)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Make sure that there is at least n characters in the buffer. If there are less than n characters, ented a sufficient number of characters with peek-chars. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="2">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#ensure-look-ahead">ensure-look-ahead</a></td></tr> <tr class="manual-row"><td class="manual-plain-reference-role">relies on</td> <td colspan="3" class="manual-plain-reference-anchor"><a class="manual-plain-internal-reference" href="#peek-chars">peek-chars</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="put-back-a-char-write-end"></a> put-back-a-char-write-end</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(put-back-a-char-write-end ch)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Put ch into the "peek end" of buffer (where peek-a-char operates). </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#put-back-a-char-write-end">put-back-a-char-write-end</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="put-back-a-char-read-end"></a> put-back-a-char-read-end</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(put-back-a-char-read-end ch)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Put ch into the "read end" buffer (where read-a-char operates). </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#put-back-a-char-read-end">put-back-a-char-read-end</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="put-back-a-string"></a> put-back-a-string</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(put-back-a-string str which-end)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Put str back into the buffer. The second parameter which-end controls whether to put back in read end or write end (equivalent to peek end). Possible values of which end are the symbols read-end or write-end. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#put-back-a-string">put-back-a-string</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="advance-look-ahead"></a> advance-look-ahead</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(advance-look-ahead n)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Provided that there is at least n characters in the buffer, advance next-read with n positions. Hereby n queued characters are skipped from the buffer at the "read end". </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#advance-look-ahead">advance-look-ahead</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr class="manual-section"><td class="manual-section" colspan="4"><a name="SECTION3"></a> <span><a href="#MANUAL-TOP"><img src="../../images/small-up.gif" title="Manual top" alt="" border="0" /></a> <a href="#SECTION2"><img src="../../images/small-prev.gif" title="Previous manual section" alt="" border="0" /></a> <a href="#SECTION4"><img src="../../images/small-next.gif" title="Next manual section" alt="" border="0" /></a></span> <br /> <span class="manual-section-number">3</span> <span class="manual-section-title">Collection and skipping functions.</span></td></tr> <tr><td colspan="4" class="manual-section-description">This section contains a number of higher level collection and skipping functions. These functions use the funtions from the previous section. The functions in this section are the most important of this library.</td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="collect-until"></a> collect-until</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(collect-until p)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Read and collect a string from the input, controlled by a predicate. The collection stops when the predicate p holds on the character read. The last read character (the first character on which p holds) is left as the oldest character in the queue. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#collect-until">collect-until</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="collect-balanced-until"></a> collect-balanced-until</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(collect-balanced-until char-pred-1 char-pred-2)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">This collection procedure returns a balanced collection given two char predicates. Return the string collected from the input port ip. The collection stops when the predicate char-pred-2 holds on the character read. However, if char-pred-1 becomes true it has to be matched by char-pred-2 without causing a termination of the collection. The last read character (the first character on which char-pred-2 holds) is processed by this function. As a precondition assume that if char-pred-1 holds then char-pred-2 does not hold, and vice versa. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#collect-balanced-until">collect-balanced-until</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="skip-while"></a> skip-while</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(skip-while p)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Skip characters while p holds. The first character on which p fails is left as the oldest character in the queue. The predicate does not hold if end of file. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#skip-while">skip-while</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="skip-string"></a> skip-string</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(skip-string str if-not-message)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Assume that str is just in front of us. Skip through it. If str is not in front of us, a fatal error occurs with if-not-message as error message. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#skip-string">skip-string</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="skip-until-string"></a> skip-until-string</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(skip-until-string str  . inclusive)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Skip characters until str is encountered. If inclusive, also skip str. It is assumed as a precondition that the length of str is at least one. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#skip-until-string">skip-until-string</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="collect-until-string"></a> collect-until-string</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(collect-until-string str  . inclusive)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Collect characters until str is encountered. If inclusive, also collect str. It is assumed as a precondition that the length of str is at least one. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#collect-until-string">collect-until-string</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr class="manual-section"><td class="manual-section" colspan="4"><a name="SECTION4"></a> <span><a href="#MANUAL-TOP"><img src="../../images/small-up.gif" title="Manual top" alt="" border="0" /></a> <a href="#SECTION3"><img src="../../images/small-prev.gif" title="Previous manual section" alt="" border="0" /></a> <img src="../../images/small-next-blind.gif" title="" alt="" border="0" /></span> <br /> <span class="manual-section-number">4</span> <span class="manual-section-title">Useful predicates for skipping and collecting.</span></td></tr> <tr><td colspan="4" class="manual-section-description"></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="is-white-space?"></a> is-white-space?</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(is-white-space? ch)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Is ch a white space character? </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#is-white-space?">is-white-space?</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="end-of-line?"></a> end-of-line?</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(end-of-line? ch)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Is ch an end of line charcter? </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#end-of-line?">end-of-line?</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="eof?"></a> eof?</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(eof? ch)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Is ch an end of file character? </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#eof?">eof?</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr> <tr><td colspan="4" class="manual-plain-title"><span><a name="char-predicate"></a> char-predicate</span></td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Form</td> <td colspan="3" class="manual-plain-form">(char-predicate ch)</td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind">Description</td> <td colspan="3" class="manual-plain-description">Return a predicate functions which matches the character ch. A higher order function. </td></tr> <tr class="manual-row"><td class="manual-plain-entry-kind" rowspan="1">See also</td> <td class="manual-plain-reference-role">Scheme source file</td> <td class="manual-plain-reference-anchor" colspan="2"><a class="manual-plain-external-reference" href="collect-skip-ep/collect-skip-1.html#char-predicate">char-predicate</a></td></tr> <tr class="manual-plain-end-of-entry"><td class="manual-plain-end-of-entry" colspan="4"><hr class="manual-plain-end-of-entry" /></td></tr></table> <div class="manual-end-remark">Generated: Monday, November 14, 2011, 09:18:08 <br /> Generated by LAML <a href="http://www.cs.aau.dk/~normark/schemedoc/index.html" style="color:inherit;">SchemeDoc</a> using LAML Version 38.0 (November 14, 2011, full) <br /> </div> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p> &nbsp; <p></p></body></html>